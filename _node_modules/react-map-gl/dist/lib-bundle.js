!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("immutable"),require("viewport-mercator-project"),require("mapbox-gl"),require("react-addons-shallow-compare"),require("assert"),require("d3-selection"),require("point-geometry"),require("bowser"),require("min-document"),require("unitbezier"),require("whoots-js")):"function"==typeof define&&define.amd?define(["react","immutable","viewport-mercator-project","mapbox-gl","react-addons-shallow-compare","assert","d3-selection","point-geometry","bowser","min-document","unitbezier","whoots-js"],t):"object"==typeof exports?exports["react-map-gl"]=t(require("react"),require("immutable"),require("viewport-mercator-project"),require("mapbox-gl"),require("react-addons-shallow-compare"),require("assert"),require("d3-selection"),require("point-geometry"),require("bowser"),require("min-document"),require("unitbezier"),require("whoots-js")):n["react-map-gl"]=t(n.react,n.immutable,n["viewport-mercator-project"],n["mapbox-gl"],n["react-addons-shallow-compare"],n.assert,n["d3-selection"],n["point-geometry"],n.bowser,n["min-document"],n.unitbezier,n["whoots-js"])}(this,function(__WEBPACK_EXTERNAL_MODULE_0__,__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_5__,__WEBPACK_EXTERNAL_MODULE_6__,__WEBPACK_EXTERNAL_MODULE_13__,__WEBPACK_EXTERNAL_MODULE_21__,__WEBPACK_EXTERNAL_MODULE_22__,__WEBPACK_EXTERNAL_MODULE_44__,__WEBPACK_EXTERNAL_MODULE_46__,__WEBPACK_EXTERNAL_MODULE_48__,__WEBPACK_EXTERNAL_MODULE_49__){return function(n){function t(g){if(I[g])return I[g].exports;var B=I[g]={i:g,l:!1,exports:{}};return n[g].call(B.exports,B,B.exports,t),B.l=!0,B.exports}var I={};return t.m=n,t.c=I,t.i=function(n){return n},t.d=function(n,I,g){t.o(n,I)||Object.defineProperty(n,I,{configurable:!1,enumerable:!0,get:g})},t.n=function(n){var I=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(I,"a",I),I},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=50)}([function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_0__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInJlYWN0XCI/M2M2MiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicmVhY3RcIlxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_1__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImltbXV0YWJsZVwiPzFkMjAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImltbXV0YWJsZVwiXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (immutable) */ exports[\"a\"] = autobind;\nvar PREDEFINED = [\n  'constructor', 'render', 'componentWillMount', 'componentDidMount',\n  'componentWillReceiveProps', 'shouldComponentUpdate', 'componentWillUpdate',\n  'componentDidUpdate', 'componentWillUnmount'\n];\n\n/**\n * Binds the \"this\" argument of all functions on a class instance to the instance\n * @param {Object} obj - class instance (typically a react component)\n */\nfunction autobind(obj) {\n  var proto = Object.getPrototypeOf(obj);\n  var propNames = Object.getOwnPropertyNames(proto);\n  var loop = function () {\n    var key = list[i];\n\n    if (typeof obj[key] === 'function') {\n      if (!PREDEFINED.find(function (name) { return key === name; })) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  };\n\n  for (var i = 0, list = propNames; i < list.length; i += 1) loop();\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rpc3QvdXRpbHMvYXV0b2JpbmQuanM/NDc1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUFJFREVGSU5FRCA9IFtcbiAgJ2NvbnN0cnVjdG9yJywgJ3JlbmRlcicsICdjb21wb25lbnRXaWxsTW91bnQnLCAnY29tcG9uZW50RGlkTW91bnQnLFxuICAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycsICdzaG91bGRDb21wb25lbnRVcGRhdGUnLCAnY29tcG9uZW50V2lsbFVwZGF0ZScsXG4gICdjb21wb25lbnREaWRVcGRhdGUnLCAnY29tcG9uZW50V2lsbFVubW91bnQnXG5dO1xuXG4vKipcbiAqIEJpbmRzIHRoZSBcInRoaXNcIiBhcmd1bWVudCBvZiBhbGwgZnVuY3Rpb25zIG9uIGEgY2xhc3MgaW5zdGFuY2UgdG8gdGhlIGluc3RhbmNlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gY2xhc3MgaW5zdGFuY2UgKHR5cGljYWxseSBhIHJlYWN0IGNvbXBvbmVudClcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXV0b2JpbmQob2JqKSB7XG4gIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopO1xuICB2YXIgcHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pO1xuICB2YXIgbG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIga2V5ID0gbGlzdFtpXTtcblxuICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICghUFJFREVGSU5FRC5maW5kKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBrZXkgPT09IG5hbWU7IH0pKSB7XG4gICAgICAgIG9ialtrZXldID0gb2JqW2tleV0uYmluZChvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHByb3BOYW1lczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIGxvb3AoKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC91dGlscy9hdXRvYmluZC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_3__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInZpZXdwb3J0LW1lcmNhdG9yLXByb2plY3RcIj80YmM5Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJ2aWV3cG9ydC1tZXJjYXRvci1wcm9qZWN0XCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {if (typeof window !== "undefined") {\n    module.exports = window;\n} else if (typeof global !== "undefined") {\n    module.exports = global;\n} else if (typeof self !== "undefined"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../webpack/buildin/global.js */ 20)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vZ2xvYmFsL3dpbmRvdy5qcz83ZmYyIl0sInNvdXJjZXNDb250ZW50IjpbImlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIG1vZHVsZS5leHBvcnRzID0gc2VsZjtcbn0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7fTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9nbG9iYWwvd2luZG93LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_5__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIm1hcGJveC1nbFwiP2E1ZWQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIm1hcGJveC1nbFwiXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_6__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInJlYWN0LWFkZG9ucy1zaGFsbG93LWNvbXBhcmVcIj9lYzA4Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJyZWFjdC1hZGRvbnMtc2hhbGxvdy1jb21wYXJlXCJcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_bowser__ = __webpack_require__(/*! bowser */ 44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_bowser___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_bowser__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\nvar PREFIX =\n  __WEBPACK_IMPORTED_MODULE_0_bowser___default.a.webkit || __WEBPACK_IMPORTED_MODULE_0_bowser___default.a.blink ? \'-webkit-\' :\n  __WEBPACK_IMPORTED_MODULE_0_bowser___default.a.gecko ? \'-moz-\' :\n  \'\';\n\n/* harmony default export */ exports["a"] = {\n  DEFAULTS: {},\n  MAPBOX_API_ACCESS_TOKEN: null,\n  CURSOR: {\n    GRABBING: (PREFIX + "grabbing"),\n    GRAB: (PREFIX + "grab"),\n    POINTER: \'pointer\'\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rpc3QvY29uZmlnLmpzPzgwYjEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IGJyb3dzZXIgZnJvbSAnYm93c2VyJztcblxudmFyIFBSRUZJWCA9XG4gIGJyb3dzZXIud2Via2l0IHx8IGJyb3dzZXIuYmxpbmsgPyAnLXdlYmtpdC0nIDpcbiAgYnJvd3Nlci5nZWNrbyA/ICctbW96LScgOlxuICAnJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBERUZBVUxUUzoge30sXG4gIE1BUEJPWF9BUElfQUNDRVNTX1RPS0VOOiBudWxsLFxuICBDVVJTT1I6IHtcbiAgICBHUkFCQklORzogKFBSRUZJWCArIFwiZ3JhYmJpbmdcIiksXG4gICAgR1JBQjogKFBSRUZJWCArIFwiZ3JhYlwiKSxcbiAgICBQT0lOVEVSOiAncG9pbnRlcidcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9jb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){"use strict";eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_immutable__ = __webpack_require__(/*! immutable */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_immutable__);\n/* harmony export (immutable) */ exports[\"a\"] = getInteractiveLayerIds;\n\n\nfunction getInteractiveLayerIds(mapStyle) {\n  var interactiveLayerIds = [];\n\n  if (__WEBPACK_IMPORTED_MODULE_0_immutable__[\"Map\"].isMap(mapStyle) && mapStyle.has('layers')) {\n    interactiveLayerIds = mapStyle.get('layers')\n      .filter(function (l) { return l.get('interactive'); })\n      .map(function (l) { return l.get('id'); })\n      .toJS();\n  } else if (Array.isArray(mapStyle.layers)) {\n    interactiveLayerIds = mapStyle.layers.filter(function (l) { return l.interactive; })\n      .map(function (l) { return l.id; });\n  }\n\n  return interactiveLayerIds;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rpc3QvdXRpbHMvc3R5bGUtdXRpbHMuanM/ODgwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge01hcH0gZnJvbSAnaW1tdXRhYmxlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyYWN0aXZlTGF5ZXJJZHMobWFwU3R5bGUpIHtcbiAgdmFyIGludGVyYWN0aXZlTGF5ZXJJZHMgPSBbXTtcblxuICBpZiAoTWFwLmlzTWFwKG1hcFN0eWxlKSAmJiBtYXBTdHlsZS5oYXMoJ2xheWVycycpKSB7XG4gICAgaW50ZXJhY3RpdmVMYXllcklkcyA9IG1hcFN0eWxlLmdldCgnbGF5ZXJzJylcbiAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGwpIHsgcmV0dXJuIGwuZ2V0KCdpbnRlcmFjdGl2ZScpOyB9KVxuICAgICAgLm1hcChmdW5jdGlvbiAobCkgeyByZXR1cm4gbC5nZXQoJ2lkJyk7IH0pXG4gICAgICAudG9KUygpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWFwU3R5bGUubGF5ZXJzKSkge1xuICAgIGludGVyYWN0aXZlTGF5ZXJJZHMgPSBtYXBTdHlsZS5sYXllcnMuZmlsdGVyKGZ1bmN0aW9uIChsKSB7IHJldHVybiBsLmludGVyYWN0aXZlOyB9KVxuICAgICAgLm1hcChmdW5jdGlvbiAobCkgeyByZXR1cm4gbC5pZDsgfSk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJhY3RpdmVMYXllcklkcztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC91dGlscy9zdHlsZS11dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mapbox_gl_js_geo_transform__ = __webpack_require__(/*! mapbox-gl/js/geo/transform */ 41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mapbox_gl_js_geo_transform___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mapbox_gl_js_geo_transform__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_0_mapbox_gl_js_geo_transform___default.a; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mapbox_gl__ = __webpack_require__(/*! mapbox-gl */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mapbox_gl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mapbox_gl__);\n/* harmony export (immutable) */ exports["b"] = mod;\n/* harmony export (immutable) */ exports["d"] = unprojectFromTransform;\n/* harmony export (immutable) */ exports["c"] = cloneTransform;\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// NOTE: Transform is not a public API so we should be careful to always lock\n// down mapbox-gl to a specific major, minor, and patch version.\n\n\n\n\n\nfunction mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\n\nfunction unprojectFromTransform(transform, point) {\n  return transform.pointLocation(__WEBPACK_IMPORTED_MODULE_1_mapbox_gl__["Point"].convert(point));\n}\n\nfunction cloneTransform(original) {\n  var transform = new __WEBPACK_IMPORTED_MODULE_0_mapbox_gl_js_geo_transform___default.a(original._minZoom, original._maxZoom);\n  transform.latRange = original.latRange;\n  transform.width = original.width;\n  transform.height = original.height;\n  transform.zoom = original.zoom;\n  transform.center = original.center;\n  transform.angle = original.angle;\n  transform.altitude = original.altitude;\n  transform.pitch = original.pitch;\n  transform.bearing = original.bearing;\n  transform.altitude = original.altitude;\n  return transform;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rpc3QvdXRpbHMvdHJhbnNmb3JtLmpzP2U0YTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVHJhbnNmb3JtIGlzIG5vdCBhIHB1YmxpYyBBUEkgc28gd2Ugc2hvdWxkIGJlIGNhcmVmdWwgdG8gYWx3YXlzIGxvY2tcbi8vIGRvd24gbWFwYm94LWdsIHRvIGEgc3BlY2lmaWMgbWFqb3IsIG1pbm9yLCBhbmQgcGF0Y2ggdmVyc2lvbi5cbmltcG9ydCBUcmFuc2Zvcm0gZnJvbSAnbWFwYm94LWdsL2pzL2dlby90cmFuc2Zvcm0nO1xuZXhwb3J0IHtUcmFuc2Zvcm0gYXMgZGVmYXVsdH07XG5cbmltcG9ydCB7UG9pbnR9IGZyb20gJ21hcGJveC1nbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2QodmFsdWUsIGRpdmlzb3IpIHtcbiAgdmFyIG1vZHVsdXMgPSB2YWx1ZSAlIGRpdmlzb3I7XG4gIHJldHVybiBtb2R1bHVzIDwgMCA/IGRpdmlzb3IgKyBtb2R1bHVzIDogbW9kdWx1cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVucHJvamVjdEZyb21UcmFuc2Zvcm0odHJhbnNmb3JtLCBwb2ludCkge1xuICByZXR1cm4gdHJhbnNmb3JtLnBvaW50TG9jYXRpb24oUG9pbnQuY29udmVydChwb2ludCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmFuc2Zvcm0ob3JpZ2luYWwpIHtcbiAgdmFyIHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0ob3JpZ2luYWwuX21pblpvb20sIG9yaWdpbmFsLl9tYXhab29tKTtcbiAgdHJhbnNmb3JtLmxhdFJhbmdlID0gb3JpZ2luYWwubGF0UmFuZ2U7XG4gIHRyYW5zZm9ybS53aWR0aCA9IG9yaWdpbmFsLndpZHRoO1xuICB0cmFuc2Zvcm0uaGVpZ2h0ID0gb3JpZ2luYWwuaGVpZ2h0O1xuICB0cmFuc2Zvcm0uem9vbSA9IG9yaWdpbmFsLnpvb207XG4gIHRyYW5zZm9ybS5jZW50ZXIgPSBvcmlnaW5hbC5jZW50ZXI7XG4gIHRyYW5zZm9ybS5hbmdsZSA9IG9yaWdpbmFsLmFuZ2xlO1xuICB0cmFuc2Zvcm0uYWx0aXR1ZGUgPSBvcmlnaW5hbC5hbHRpdHVkZTtcbiAgdHJhbnNmb3JtLnBpdGNoID0gb3JpZ2luYWwucGl0Y2g7XG4gIHRyYW5zZm9ybS5iZWFyaW5nID0gb3JpZ2luYWwuYmVhcmluZztcbiAgdHJhbnNmb3JtLmFsdGl0dWRlID0gb3JpZ2luYWwuYWx0aXR1ZGU7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Rpc3QvdXRpbHMvdHJhbnNmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__ = __webpack_require__(/*! react-addons-shallow-compare */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__ = __webpack_require__(/*! mapbox-gl */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_mapbox_gl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_selection__ = __webpack_require__(/*! d3-selection */ 21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_selection___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_d3_selection__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_immutable__ = __webpack_require__(/*! immutable */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_assert__ = __webpack_require__(/*! assert */ 13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_assert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_assert__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_global_window__ = __webpack_require__(/*! global/window */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_global_window___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_global_window__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__map_interactions__ = __webpack_require__(/*! ./map-interactions */ 33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__utils_style_utils__ = __webpack_require__(/*! ../utils/style-utils */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_diff_styles__ = __webpack_require__(/*! ../utils/diff-styles */ 18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__utils_transform__ = __webpack_require__(/*! ../utils/transform */ 9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__config__ = __webpack_require__(/*! ../config */ 7);\n  // Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction noop() {}\n\n// Note: Max pitch is a hard coded value (not a named constant) in transform.js\nvar MAX_PITCH = 60;\nvar PITCH_MOUSE_THRESHOLD = 20;\nvar PITCH_ACCEL = 1.2;\n\nvar propTypes = {\n  /**\n    * The latitude of the center of the map.\n    */\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /**\n    * The longitude of the center of the map.\n    */\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /**\n    * The tile zoom level of the map.\n    */\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /**\n    * The maximum tile zoom level of the map. Defaults to 20.\n    * Increasing this will allow you to zoom further into the map but should\n    * only be used if you know what you are doing past zoom 20. The default\n    * map styles won\'t render anything useful past 20.\n    */\n  maxZoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n  /**\n    * The Mapbox style the component should use. Can either be a string url\n    * or a MapboxGL style Immutable.Map object.\n    */\n  mapStyle: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].oneOfType([\n    __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string,\n    __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].instanceOf(__WEBPACK_IMPORTED_MODULE_5_immutable___default.a.Map)\n  ]),\n  /**\n    * The Mapbox API access token to provide to mapbox-gl-js. This is required\n    * when using Mapbox provided vector tiles and styles.\n    */\n  mapboxApiAccessToken: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string,\n  /**\n    * `onChangeViewport` callback is fired when the user interacted with the\n    * map. The object passed to the callback contains `latitude`,\n    * `longitude` and `zoom` and additional state information.\n    */\n  onChangeViewport: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n  /**\n    * The width of the map.\n    */\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /**\n    * The height of the map.\n    */\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /**\n    * Is the component currently being dragged. This is used to show/hide the\n    * drag cursor. Also used as an optimization in some overlays by preventing\n    * rendering while dragging.\n    */\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  /**\n    * Required to calculate the mouse projection after the first click event\n    * during dragging. Where the map is depends on where you first clicked on\n    * the map.\n    */\n  startDragLngLat: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].array,\n  /**\n    * Called when a feature is hovered over. Uses Mapbox\'s\n    * queryRenderedFeatures API to find features under the pointer:\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`. See Mapbox\'s style spec\n    * https://www.mapbox.com/mapbox-gl-style-spec/#layer-interactive\n    * If no interactive layers are found (e.g. using Mapbox\'s default styles),\n    * will fall back to query all layers.\n    * @callback\n    * @param {array} features - The array of features the mouse is over.\n    */\n  onHoverFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n  /**\n    * Defaults to TRUE\n    * Set to false to enable onHoverFeatures to be called regardless if\n    * there is an actual feature at x, y. This is useful to emulate\n    * "mouse-out" behaviors on features.\n    */\n  ignoreEmptyFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /**\n    * Show attribution control or not.\n    */\n  attributionControl: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /**\n   * Called when the map is clicked. The handler is called with the clicked\n   * coordinates (https://www.mapbox.com/mapbox-gl-js/api/#LngLat) and the\n   * screen coordinates (https://www.mapbox.com/mapbox-gl-js/api/#PointLike).\n   */\n  onClick: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n  /**\n    * Called when a feature is clicked on. Uses Mapbox\'s\n    * queryRenderedFeatures API to find features under the pointer:\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`. See Mapbox\'s style spec\n    * https://www.mapbox.com/mapbox-gl-style-spec/#layer-interactive\n    * If no interactive layers are found (e.g. using Mapbox\'s default styles),\n    * will fall back to query all layers.\n    */\n  onClickFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n  /**\n    * Radius to detect features around a clicked point. Defaults to 15.\n    */\n  clickRadius: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n\n  /**\n    * Passed to Mapbox Map constructor which passes it to the canvas context.\n    * This is unseful when you want to export the canvas as a PNG.\n    */\n  preserveDrawingBuffer: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /**\n    * There are still known issues with style diffing. As a temporary stopgap,\n    * add the option to prevent style diffing.\n    */\n  preventStyleDiffing: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /**\n    * Enables perspective control event handling\n    */\n  perspectiveEnabled: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /**\n    * Specify the bearing of the viewport\n    */\n  bearing: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n\n  /**\n    * Specify the pitch of the viewport\n    */\n  pitch: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n\n  /**\n    * Specify the altitude of the viewport camera\n    * Unit: map heights, default 1.5\n    * Non-public API, see https://github.com/mapbox/mapbox-gl-js/issues/1137\n    */\n  altitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n\n  /**\n    * The load callback is called when all dependencies have been loaded and\n    * the map is ready.\n    */\n  onLoad: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func\n\n};\n\nvar defaultProps = {\n  mapStyle: \'mapbox://styles/mapbox/light-v9\',\n  onChangeViewport: null,\n  mapboxApiAccessToken: getAccessToken(),\n  preserveDrawingBuffer: false,\n  attributionControl: true,\n  ignoreEmptyFeatures: true,\n  bearing: 0,\n  pitch: 0,\n  altitude: 1.5,\n  clickRadius: 15,\n  maxZoom: 20\n};\n\n// Try to get access token from URL, env, local storage or config\nfunction getAccessToken() {\n  var accessToken = null;\n\n  if (__WEBPACK_IMPORTED_MODULE_7_global_window___default.a.location) {\n    var match = __WEBPACK_IMPORTED_MODULE_7_global_window___default.a.location.search.match(/access_token=([^&\\/]*)/);\n    accessToken = match && match[1];\n  }\n\n  if (!accessToken) {\n    // Note: This depends on the bundler (e.g. webpack) inmporting environment correctly\n    accessToken =\n      process.env.MapboxAccessToken || process.env.MAPBOX_ACCESS_TOKEN; // eslint-disable-line\n  }\n\n  // Try to save and restore from local storage\n  // if (window.localStorage) {\n  //   if (accessToken) {\n  //     window.localStorage.accessToken = accessToken;\n  //   } else {\n  //     accessToken = window.localStorage.accessToken;\n  //   }\n  // }\n\n  return accessToken || __WEBPACK_IMPORTED_MODULE_12__config__["a" /* default */].DEFAULTS.MAPBOX_API_ACCESS_TOKEN;\n}\n\nvar MapGL = (function (Component) {\n  function MapGL(props) {\n    Component.call(this, props);\n    this.state = {\n      isSupported: __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default.a.supported(),\n      isDragging: false,\n      isHovering: false,\n      startDragLngLat: null,\n      startBearing: null,\n      startPitch: null\n    };\n    this._queryParams = {};\n    __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default.a.accessToken = props.mapboxApiAccessToken;\n\n    if (!this.state.isSupported) {\n      this.componentDidMount = noop;\n      this.componentWillReceiveProps = noop;\n      this.componentDidUpdate = noop;\n    }\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_autobind__["a" /* default */])(this);\n  }\n\n  if ( Component ) MapGL.__proto__ = Component;\n  MapGL.prototype = Object.create( Component && Component.prototype );\n  MapGL.prototype.constructor = MapGL;\n\n  MapGL.supported = function supported () {\n    return __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default.a.supported();\n  };\n\n  MapGL.prototype.componentDidMount = function componentDidMount () {\n    var mapStyle = __WEBPACK_IMPORTED_MODULE_5_immutable___default.a.Map.isMap(this.props.mapStyle) ?\n      this.props.mapStyle.toJS() :\n      this.props.mapStyle;\n\n    var map = new __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default.a.Map({\n      container: this.refs.mapboxMap,\n      center: [this.props.longitude, this.props.latitude],\n      zoom: this.props.zoom,\n      maxZoom: this.props.maxZoom,\n      pitch: this.props.pitch,\n      bearing: this.props.bearing,\n      style: mapStyle,\n      interactive: false,\n      preserveDrawingBuffer: this.props.preserveDrawingBuffer\n      // TODO?\n      // attributionControl: this.props.attributionControl\n    });\n\n    // TODO - can we drop d3-select dependency?\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_d3_selection__["select"])(map.getCanvas()).style(\'outline\', \'none\');\n\n    this._map = map;\n    this._updateMapViewport({}, this.props);\n    this._callOnChangeViewport(map.transform);\n    this._updateQueryParams(mapStyle);\n  };\n\n  // New props are comin\' round the corner!\n  MapGL.prototype.componentWillReceiveProps = function componentWillReceiveProps (newProps) {\n    this._updateStateFromProps(this.props, newProps);\n    this._updateMapViewport(this.props, newProps);\n    this._updateMapStyle(this.props, newProps);\n    // Save width/height so that we can check them in componentDidUpdate\n    this.setState({\n      width: this.props.width,\n      height: this.props.height\n    });\n  };\n\n  // Pure render\n  MapGL.prototype.shouldComponentUpdate = function shouldComponentUpdate (nextProps, nextState) {\n    return __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default()(this, nextProps, nextState);\n  };\n\n  MapGL.prototype.componentDidUpdate = function componentDidUpdate () {\n    // map.resize() reads size from DOM, we need to call after render\n    this._updateMapSize(this.state, this.props);\n  };\n\n  MapGL.prototype.componentWillUnmount = function componentWillUnmount () {\n    if (this._map) {\n      this._map.remove();\n    }\n  };\n\n  // External apps can access map this way\n  MapGL.prototype._getMap = function _getMap () {\n    return this._map;\n  };\n\n  // Calculate a cursor style\n  MapGL.prototype._getCursor = function _getCursor () {\n    var isInteractive =\n      this.props.onChangeViewport ||\n      this.props.onClickFeature ||\n      this.props.onHoverFeatures;\n    if (isInteractive) {\n      return this.props.isDragging ?\n        __WEBPACK_IMPORTED_MODULE_12__config__["a" /* default */].CURSOR.GRABBING :\n        (this.state.isHovering ? __WEBPACK_IMPORTED_MODULE_12__config__["a" /* default */].CURSOR.POINTER : __WEBPACK_IMPORTED_MODULE_12__config__["a" /* default */].CURSOR.GRAB);\n    }\n    return \'inherit\';\n  };\n\n  MapGL.prototype._updateStateFromProps = function _updateStateFromProps (oldProps, newProps) {\n    __WEBPACK_IMPORTED_MODULE_3_mapbox_gl___default.a.accessToken = newProps.mapboxApiAccessToken;\n    this.setState({\n      startDragLngLat: newProps.startDragLngLat\n    });\n  };\n\n  // Hover and click only query layers whose interactive property is true\n  // If no interactivity is specified, query all layers\n  MapGL.prototype._updateQueryParams = function _updateQueryParams (mapStyle) {\n    var interactiveLayerIds = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9__utils_style_utils__["a" /* getInteractiveLayerIds */])(mapStyle);\n    this._queryParams = interactiveLayerIds.length === 0 ? {} :\n      {layers: interactiveLayerIds};\n  };\n\n  // Update a source in the map style\n  MapGL.prototype._updateSource = function _updateSource (map, update) {\n    var newSource = update.source.toJS();\n    if (newSource.type === \'geojson\') {\n      var oldSource = map.getSource(update.id);\n      if (oldSource.type === \'geojson\') {\n        // update data if no other GeoJSONSource options were changed\n        var oldOpts = oldSource.workerOptions;\n        if (\n          (newSource.maxzoom === undefined ||\n            newSource.maxzoom === oldOpts.geojsonVtOptions.maxZoom) &&\n          (newSource.buffer === undefined ||\n            newSource.buffer === oldOpts.geojsonVtOptions.buffer) &&\n          (newSource.tolerance === undefined ||\n            newSource.tolerance === oldOpts.geojsonVtOptions.tolerance) &&\n          (newSource.cluster === undefined ||\n            newSource.cluster === oldOpts.cluster) &&\n          (newSource.clusterRadius === undefined ||\n            newSource.clusterRadius === oldOpts.superclusterOptions.radius) &&\n          (newSource.clusterMaxZoom === undefined ||\n            newSource.clusterMaxZoom === oldOpts.superclusterOptions.maxZoom)\n        ) {\n          oldSource.setData(newSource.data);\n          return;\n        }\n      }\n    }\n\n    map.removeSource(update.id);\n    map.addSource(update.id, newSource);\n  };\n\n  // Individually update the maps source and layers that have changed if all\n  // other style props haven\'t changed. This prevents flicking of the map when\n  // styles only change sources or layers.\n  /* eslint-disable max-statements, complexity */\n  MapGL.prototype._setDiffStyle = function _setDiffStyle (prevStyle, nextStyle) {\n    var this$1 = this;\n\n    var prevKeysMap = prevStyle && styleKeysMap(prevStyle) || {};\n    var nextKeysMap = styleKeysMap(nextStyle);\n    function styleKeysMap(style) {\n      return style.map(function () { return true; }).delete(\'layers\').delete(\'sources\').toJS();\n    }\n    function propsOtherThanLayersOrSourcesDiffer() {\n      var prevKeysList = Object.keys(prevKeysMap);\n      var nextKeysList = Object.keys(nextKeysMap);\n      if (prevKeysList.length !== nextKeysList.length) {\n        return true;\n      }\n      // `nextStyle` and `prevStyle` should not have the same set of props.\n      if (nextKeysList.some(\n        function (key) { return prevStyle.get(key) !== nextStyle.get(key); }\n        // But the value of one of those props is different.\n      )) {\n        return true;\n      }\n      return false;\n    }\n\n    var map = this._map;\n\n    if (!prevStyle || propsOtherThanLayersOrSourcesDiffer()) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    var ref = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_10__utils_diff_styles__["a" /* default */])(prevStyle, nextStyle);\n    var sourcesDiff = ref.sourcesDiff;\n    var layersDiff = ref.layersDiff;\n\n    // TODO: It\'s rather difficult to determine style diffing in the presence\n    // of refs. For now, if any style update has a ref, fallback to no diffing.\n    // We can come back to this case if there\'s a solid usecase.\n    if (layersDiff.updates.some(function (node) { return node.layer.get(\'ref\'); })) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    for (var i = 0, list = sourcesDiff.enter; i < list.length; i += 1) {\n      var enter = list[i];\n\n      map.addSource(enter.id, enter.source.toJS());\n    }\n    for (var i$1 = 0, list$1 = sourcesDiff.update; i$1 < list$1.length; i$1 += 1) {\n      var update = list$1[i$1];\n\n      this$1._updateSource(map, update);\n    }\n    for (var i$2 = 0, list$2 = sourcesDiff.exit; i$2 < list$2.length; i$2 += 1) {\n      var exit = list$2[i$2];\n\n      map.removeSource(exit.id);\n    }\n    for (var i$3 = 0, list$3 = layersDiff.exiting; i$3 < list$3.length; i$3 += 1) {\n      var exit$1 = list$3[i$3];\n\n      if (map.style.getLayer(exit$1.id)) {\n        map.removeLayer(exit$1.id);\n      }\n    }\n    for (var i$4 = 0, list$4 = layersDiff.updates; i$4 < list$4.length; i$4 += 1) {\n      var update$1 = list$4[i$4];\n\n      if (!update$1.enter) {\n        // This is an old layer that needs to be updated. Remove the old layer\n        // with the same id and add it back again.\n        map.removeLayer(update$1.id);\n      }\n      map.addLayer(update$1.layer.toJS(), update$1.before);\n    }\n  };\n  /* eslint-enable max-statements, complexity */\n\n  MapGL.prototype._updateMapStyle = function _updateMapStyle (oldProps, newProps) {\n    var mapStyle = newProps.mapStyle;\n    var oldMapStyle = oldProps.mapStyle;\n    if (mapStyle !== oldMapStyle) {\n      if (__WEBPACK_IMPORTED_MODULE_5_immutable___default.a.Map.isMap(mapStyle)) {\n        if (this.props.preventStyleDiffing) {\n          this._map.setStyle(mapStyle.toJS());\n        } else {\n          this._setDiffStyle(oldMapStyle, mapStyle);\n        }\n      } else {\n        this._map.setStyle(mapStyle);\n      }\n      this._updateQueryParams(mapStyle);\n    }\n  };\n\n  MapGL.prototype._updateMapViewport = function _updateMapViewport (oldProps, newProps) {\n    var viewportChanged =\n      newProps.latitude !== oldProps.latitude ||\n      newProps.longitude !== oldProps.longitude ||\n      newProps.zoom !== oldProps.zoom ||\n      newProps.pitch !== oldProps.pitch ||\n      newProps.zoom !== oldProps.bearing ||\n      newProps.altitude !== oldProps.altitude;\n\n    if (viewportChanged) {\n      this._map.jumpTo({\n        center: [newProps.longitude, newProps.latitude],\n        zoom: newProps.zoom,\n        bearing: newProps.bearing,\n        pitch: newProps.pitch\n      });\n\n      // TODO - jumpTo doesn\'t handle altitude\n      if (newProps.altitude !== oldProps.altitude) {\n        this._map.transform.altitude = newProps.altitude;\n      }\n    }\n  };\n\n  // Note: needs to be called after render (e.g. in componentDidUpdate)\n  MapGL.prototype._updateMapSize = function _updateMapSize (oldProps, newProps) {\n    var sizeChanged =\n      oldProps.width !== newProps.width || oldProps.height !== newProps.height;\n\n    if (sizeChanged) {\n      this._map.resize();\n      this._callOnChangeViewport(this._map.transform);\n    }\n  };\n\n  // Calculates a new pitch and bearing from a position (coming from an event)\n  MapGL.prototype._calculateNewPitchAndBearing = function _calculateNewPitchAndBearing (ref) {\n    var pos = ref.pos;\n    var startPos = ref.startPos;\n    var startBearing = ref.startBearing;\n    var startPitch = ref.startPitch;\n\n    var xDelta = pos[0] - startPos[0];\n    var bearing = startBearing + 180 * xDelta / this.props.width;\n\n    var pitch = startPitch;\n    var yDelta = pos[1] - startPos[1];\n    if (yDelta > 0) {\n      // Dragging downwards, gradually decrease pitch\n      if (Math.abs(this.props.height - startPos[1]) > PITCH_MOUSE_THRESHOLD) {\n        var scale = yDelta / (this.props.height - startPos[1]);\n        pitch = (1 - scale) * PITCH_ACCEL * startPitch;\n      }\n    } else if (yDelta < 0) {\n      // Dragging upwards, gradually increase pitch\n      if (startPos.y > PITCH_MOUSE_THRESHOLD) {\n        // Move from 0 to 1 as we drag upwards\n        var yScale = 1 - pos[1] / startPos[1];\n        // Gradually add until we hit max pitch\n        pitch = startPitch + yScale * (MAX_PITCH - startPitch);\n      }\n    }\n\n    // console.debug(startPitch, pitch);\n    return {\n      pitch: Math.max(Math.min(pitch, MAX_PITCH), 0),\n      bearing: bearing\n    };\n  };\n\n   // Helper to call props.onChangeViewport\n  MapGL.prototype._callOnChangeViewport = function _callOnChangeViewport (transform, opts) {\n    if ( opts === void 0 ) opts = {};\n\n    if (this.props.onChangeViewport) {\n      this.props.onChangeViewport(Object.assign({}, {latitude: transform.center.lat,\n        longitude: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["b" /* mod */])(transform.center.lng + 180, 360) - 180,\n        zoom: transform.zoom,\n        pitch: transform.pitch,\n        bearing: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["b" /* mod */])(transform.bearing + 180, 360) - 180,\n\n        isDragging: this.props.isDragging,\n        startDragLngLat: this.props.startDragLngLat,\n        startBearing: this.props.startBearing,\n        startPitch: this.props.startPitch},\n\n        opts));\n    }\n  };\n\n  MapGL.prototype._onTouchStart = function _onTouchStart (opts) {\n    this._onMouseDown(opts);\n  };\n\n  MapGL.prototype._onTouchDrag = function _onTouchDrag (opts) {\n    this._onMouseDrag(opts);\n  };\n\n  MapGL.prototype._onTouchRotate = function _onTouchRotate (opts) {\n    this._onMouseRotate(opts);\n  };\n\n  MapGL.prototype._onTouchEnd = function _onTouchEnd (opts) {\n    this._onMouseUp(opts);\n  };\n\n  MapGL.prototype._onTouchTap = function _onTouchTap (opts) {\n    this._onMouseClick(opts);\n  };\n\n  MapGL.prototype._onMouseDown = function _onMouseDown (ref) {\n    var pos = ref.pos;\n\n    var ref$1 = this._map;\n    var transform = ref$1.transform;\n    var ref$2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["d" /* unprojectFromTransform */])(transform, new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__["Point"], [ null ].concat( pos) )));\n    var lng = ref$2.lng;\n    var lat = ref$2.lat;\n    this._callOnChangeViewport(transform, {\n      isDragging: true,\n      startDragLngLat: [lng, lat],\n      startBearing: transform.bearing,\n      startPitch: transform.pitch\n    });\n  };\n\n  MapGL.prototype._onMouseDrag = function _onMouseDrag (ref) {\n    var pos = ref.pos;\n\n    if (!this.props.onChangeViewport) {\n      return;\n    }\n\n    // take the start lnglat and put it where the mouse is down.\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(this.props.startDragLngLat, \'`startDragLngLat` prop is required \' +\n      \'for mouse drag behavior to calculate where to position the map.\');\n\n    var transform = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["c" /* cloneTransform */])(this._map.transform);\n    var ref$1 = this.props.startDragLngLat;\n    var lng = ref$1[0];\n    var lat = ref$1[1];\n    transform.setLocationAtPoint({lng: lng, lat: lat}, new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__["Point"], [ null ].concat( pos) )));\n    this._callOnChangeViewport(transform, {isDragging: true});\n  };\n\n  MapGL.prototype._onMouseRotate = function _onMouseRotate (ref) {\n    var pos = ref.pos;\n    var startPos = ref.startPos;\n\n    if (!this.props.onChangeViewport || !this.props.perspectiveEnabled) {\n      return;\n    }\n\n    var ref$1 = this.props;\n    var startBearing = ref$1.startBearing;\n    var startPitch = ref$1.startPitch;\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(typeof startBearing === \'number\',\n      \'`startBearing` prop is required for mouse rotate behavior\');\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(typeof startPitch === \'number\',\n      \'`startPitch` prop is required for mouse rotate behavior\');\n\n    var ref$2 = this._calculateNewPitchAndBearing({\n      pos: pos,\n      startPos: startPos,\n      startBearing: startBearing,\n      startPitch: startPitch\n    });\n    var pitch = ref$2.pitch;\n    var bearing = ref$2.bearing;\n\n    var transform = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["c" /* cloneTransform */])(this._map.transform);\n    transform.bearing = bearing;\n    transform.pitch = pitch;\n\n    this._callOnChangeViewport(transform, {isDragging: true});\n  };\n\n  MapGL.prototype._onMouseMove = function _onMouseMove (ref) {\n    var pos = ref.pos;\n\n    if (!this.props.onHoverFeatures) {\n      return;\n    }\n    var features = this._map.queryRenderedFeatures(new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__["Point"], [ null ].concat( pos) )), this._queryParams);\n    if (!features.length && this.props.ignoreEmptyFeatures) {\n      return;\n    }\n    this.setState({isHovering: features.length > 0});\n    this.props.onHoverFeatures(features);\n  };\n\n  MapGL.prototype._onMouseUp = function _onMouseUp (opt) {\n    this._callOnChangeViewport(this._map.transform, {\n      isDragging: false,\n      startDragLngLat: null,\n      startBearing: null,\n      startPitch: null\n    });\n  };\n\n  MapGL.prototype._onMouseClick = function _onMouseClick (ref) {\n    var pos = ref.pos;\n\n    if (!this.props.onClickFeatures && !this.props.onClick) {\n      return;\n    }\n\n    if (this.props.onClick) {\n      var point = new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__["Point"], [ null ].concat( pos) ));\n      var latLong = this._map.unproject(point);\n      // TODO - Do we really want to expose a mapbox "Point" in our interface?\n      this.props.onClick(latLong, point);\n    }\n\n    if (this.props.onClickFeatures) {\n      // Radius enables point features, like marker symbols, to be clicked.\n      var size = this.props.clickRadius;\n      var bbox = [[pos[0] - size, pos[1] - size], [pos[0] + size, pos[1] + size]];\n      var features = this._map.queryRenderedFeatures(bbox, this._queryParams);\n      if (!features.length && this.props.ignoreEmptyFeatures) {\n        return;\n      }\n      this.props.onClickFeatures(features);\n    }\n  };\n\n  MapGL.prototype._onZoom = function _onZoom (ref) {\n    var pos = ref.pos;\n    var scale = ref.scale;\n\n    var point = new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_3_mapbox_gl__["Point"], [ null ].concat( pos) ));\n    var transform = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["c" /* cloneTransform */])(this._map.transform);\n    var around = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_11__utils_transform__["d" /* unprojectFromTransform */])(transform, point);\n    transform.zoom = transform.scaleZoom(this._map.transform.scale * scale);\n    transform.setLocationAtPoint(around, point);\n    this._callOnChangeViewport(transform, {isDragging: true});\n  };\n\n  MapGL.prototype._onZoomEnd = function _onZoomEnd () {\n    this._callOnChangeViewport(this._map.transform, {isDragging: false});\n  };\n\n  MapGL.prototype.render = function render () {\n    var ref = this.props;\n    var className = ref.className;\n    var width = ref.width;\n    var height = ref.height;\n    var style = ref.style;\n    var mapStyle = Object.assign({}, style, {width: width, height: height, cursor: this._getCursor()});\n\n    var content = [\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { key: "map", ref: "mapboxMap", style: mapStyle, className: className }),\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { key: "overlays", className: "overlays", style: {position: \'absolute\', left: 0, top: 0} },\n        this.props.children\n      )\n    ];\n\n    if (this.state.isSupported && this.props.onChangeViewport) {\n      content = (\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( __WEBPACK_IMPORTED_MODULE_8__map_interactions__["a" /* default */], {\n          onMouseDown: this._onMouseDown, onMouseDrag: this._onMouseDrag, onMouseRotate: this._onMouseRotate, onMouseUp: this._onMouseUp, onMouseMove: this._onMouseMove, onMouseClick: this._onMouseClick, onTouchStart: this._onTouchStart, onTouchDrag: this._onTouchDrag, onTouchRotate: this._onTouchRotate, onTouchEnd: this._onTouchEnd, onTouchTap: this._onTouchTap, onZoom: this._onZoom, onZoomEnd: this._onZoomEnd, width: this.props.width, height: this.props.height },\n\n          content\n\n        )\n      );\n    }\n\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { style: Object.assign({}, this.props.style, {width: width, height: height, position: \'relative\'}) },\n\n        content\n\n      )\n    );\n  };\n\n  return MapGL;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = MapGL;\n\nMapGL.displayName = \'MapGL\';\nMapGL.propTypes = propTypes;\nMapGL.defaultProps = defaultProps;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../~/node-libs-browser/~/process/browser.js */ 38)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2NvbXBvbmVudHMvbWFwLmpzPzc2NDMiXSwic291cmNlc0NvbnRlbnQiOlsiICAvLyBDb3B5cmlnaHQgKGMpIDIwMTUgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzLCBDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzaGFsbG93Q29tcGFyZSBmcm9tICdyZWFjdC1hZGRvbnMtc2hhbGxvdy1jb21wYXJlJztcbmltcG9ydCBhdXRvYmluZCBmcm9tICcuLi91dGlscy9hdXRvYmluZCc7XG5cbmltcG9ydCBtYXBib3hnbCwge1BvaW50fSBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IHtzZWxlY3R9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gJ2ltbXV0YWJsZSc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgd2luZG93IGZyb20gJ2dsb2JhbC93aW5kb3cnO1xuXG5pbXBvcnQgTWFwSW50ZXJhY3Rpb25zIGZyb20gJy4vbWFwLWludGVyYWN0aW9ucyc7XG5pbXBvcnQge2dldEludGVyYWN0aXZlTGF5ZXJJZHN9IGZyb20gJy4uL3V0aWxzL3N0eWxlLXV0aWxzJztcbmltcG9ydCBkaWZmU3R5bGVzIGZyb20gJy4uL3V0aWxzL2RpZmYtc3R5bGVzJztcbmltcG9ydCB7bW9kLCB1bnByb2plY3RGcm9tVHJhbnNmb3JtLCBjbG9uZVRyYW5zZm9ybX0gZnJvbSAnLi4vdXRpbHMvdHJhbnNmb3JtJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8vIE5vdGU6IE1heCBwaXRjaCBpcyBhIGhhcmQgY29kZWQgdmFsdWUgKG5vdCBhIG5hbWVkIGNvbnN0YW50KSBpbiB0cmFuc2Zvcm0uanNcbnZhciBNQVhfUElUQ0ggPSA2MDtcbnZhciBQSVRDSF9NT1VTRV9USFJFU0hPTEQgPSAyMDtcbnZhciBQSVRDSF9BQ0NFTCA9IDEuMjtcblxudmFyIHByb3BUeXBlcyA9IHtcbiAgLyoqXG4gICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgbWFwLlxuICAgICovXG4gIGxhdGl0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBtYXAuXG4gICAgKi9cbiAgbG9uZ2l0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgICogVGhlIHRpbGUgem9vbSBsZXZlbCBvZiB0aGUgbWFwLlxuICAgICovXG4gIHpvb206IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAgKiBUaGUgbWF4aW11bSB0aWxlIHpvb20gbGV2ZWwgb2YgdGhlIG1hcC4gRGVmYXVsdHMgdG8gMjAuXG4gICAgKiBJbmNyZWFzaW5nIHRoaXMgd2lsbCBhbGxvdyB5b3UgdG8gem9vbSBmdXJ0aGVyIGludG8gdGhlIG1hcCBidXQgc2hvdWxkXG4gICAgKiBvbmx5IGJlIHVzZWQgaWYgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nIHBhc3Qgem9vbSAyMC4gVGhlIGRlZmF1bHRcbiAgICAqIG1hcCBzdHlsZXMgd29uJ3QgcmVuZGVyIGFueXRoaW5nIHVzZWZ1bCBwYXN0IDIwLlxuICAgICovXG4gIG1heFpvb206IFByb3BUeXBlcy5udW1iZXIsXG4gIC8qKlxuICAgICogVGhlIE1hcGJveCBzdHlsZSB0aGUgY29tcG9uZW50IHNob3VsZCB1c2UuIENhbiBlaXRoZXIgYmUgYSBzdHJpbmcgdXJsXG4gICAgKiBvciBhIE1hcGJveEdMIHN0eWxlIEltbXV0YWJsZS5NYXAgb2JqZWN0LlxuICAgICovXG4gIG1hcFN0eWxlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIFByb3BUeXBlcy5pbnN0YW5jZU9mKEltbXV0YWJsZS5NYXApXG4gIF0pLFxuICAvKipcbiAgICAqIFRoZSBNYXBib3ggQVBJIGFjY2VzcyB0b2tlbiB0byBwcm92aWRlIHRvIG1hcGJveC1nbC1qcy4gVGhpcyBpcyByZXF1aXJlZFxuICAgICogd2hlbiB1c2luZyBNYXBib3ggcHJvdmlkZWQgdmVjdG9yIHRpbGVzIGFuZCBzdHlsZXMuXG4gICAgKi9cbiAgbWFwYm94QXBpQWNjZXNzVG9rZW46IFByb3BUeXBlcy5zdHJpbmcsXG4gIC8qKlxuICAgICogYG9uQ2hhbmdlVmlld3BvcnRgIGNhbGxiYWNrIGlzIGZpcmVkIHdoZW4gdGhlIHVzZXIgaW50ZXJhY3RlZCB3aXRoIHRoZVxuICAgICogbWFwLiBUaGUgb2JqZWN0IHBhc3NlZCB0byB0aGUgY2FsbGJhY2sgY29udGFpbnMgYGxhdGl0dWRlYCxcbiAgICAqIGBsb25naXR1ZGVgIGFuZCBgem9vbWAgYW5kIGFkZGl0aW9uYWwgc3RhdGUgaW5mb3JtYXRpb24uXG4gICAgKi9cbiAgb25DaGFuZ2VWaWV3cG9ydDogUHJvcFR5cGVzLmZ1bmMsXG4gIC8qKlxuICAgICogVGhlIHdpZHRoIG9mIHRoZSBtYXAuXG4gICAgKi9cbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqXG4gICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBtYXAuXG4gICAgKi9cbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIC8qKlxuICAgICogSXMgdGhlIGNvbXBvbmVudCBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZC4gVGhpcyBpcyB1c2VkIHRvIHNob3cvaGlkZSB0aGVcbiAgICAqIGRyYWcgY3Vyc29yLiBBbHNvIHVzZWQgYXMgYW4gb3B0aW1pemF0aW9uIGluIHNvbWUgb3ZlcmxheXMgYnkgcHJldmVudGluZ1xuICAgICogcmVuZGVyaW5nIHdoaWxlIGRyYWdnaW5nLlxuICAgICovXG4gIGlzRHJhZ2dpbmc6IFByb3BUeXBlcy5ib29sLFxuICAvKipcbiAgICAqIFJlcXVpcmVkIHRvIGNhbGN1bGF0ZSB0aGUgbW91c2UgcHJvamVjdGlvbiBhZnRlciB0aGUgZmlyc3QgY2xpY2sgZXZlbnRcbiAgICAqIGR1cmluZyBkcmFnZ2luZy4gV2hlcmUgdGhlIG1hcCBpcyBkZXBlbmRzIG9uIHdoZXJlIHlvdSBmaXJzdCBjbGlja2VkIG9uXG4gICAgKiB0aGUgbWFwLlxuICAgICovXG4gIHN0YXJ0RHJhZ0xuZ0xhdDogUHJvcFR5cGVzLmFycmF5LFxuICAvKipcbiAgICAqIENhbGxlZCB3aGVuIGEgZmVhdHVyZSBpcyBob3ZlcmVkIG92ZXIuIFVzZXMgTWFwYm94J3NcbiAgICAqIHF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyBBUEkgdG8gZmluZCBmZWF0dXJlcyB1bmRlciB0aGUgcG9pbnRlcjpcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2FwaS8jTWFwI3F1ZXJ5UmVuZGVyZWRGZWF0dXJlc1xuICAgICogVG8gcXVlcnkgb25seSBzb21lIG9mIHRoZSBsYXllcnMsIHNldCB0aGUgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBpbiB0aGVcbiAgICAqIGxheWVyIHN0eWxlIHRvIGB0cnVlYC4gU2VlIE1hcGJveCdzIHN0eWxlIHNwZWNcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLXN0eWxlLXNwZWMvI2xheWVyLWludGVyYWN0aXZlXG4gICAgKiBJZiBubyBpbnRlcmFjdGl2ZSBsYXllcnMgYXJlIGZvdW5kIChlLmcuIHVzaW5nIE1hcGJveCdzIGRlZmF1bHQgc3R5bGVzKSxcbiAgICAqIHdpbGwgZmFsbCBiYWNrIHRvIHF1ZXJ5IGFsbCBsYXllcnMuXG4gICAgKiBAY2FsbGJhY2tcbiAgICAqIEBwYXJhbSB7YXJyYXl9IGZlYXR1cmVzIC0gVGhlIGFycmF5IG9mIGZlYXR1cmVzIHRoZSBtb3VzZSBpcyBvdmVyLlxuICAgICovXG4gIG9uSG92ZXJGZWF0dXJlczogUHJvcFR5cGVzLmZ1bmMsXG4gIC8qKlxuICAgICogRGVmYXVsdHMgdG8gVFJVRVxuICAgICogU2V0IHRvIGZhbHNlIHRvIGVuYWJsZSBvbkhvdmVyRmVhdHVyZXMgdG8gYmUgY2FsbGVkIHJlZ2FyZGxlc3MgaWZcbiAgICAqIHRoZXJlIGlzIGFuIGFjdHVhbCBmZWF0dXJlIGF0IHgsIHkuIFRoaXMgaXMgdXNlZnVsIHRvIGVtdWxhdGVcbiAgICAqIFwibW91c2Utb3V0XCIgYmVoYXZpb3JzIG9uIGZlYXR1cmVzLlxuICAgICovXG4gIGlnbm9yZUVtcHR5RmVhdHVyZXM6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgICogU2hvdyBhdHRyaWJ1dGlvbiBjb250cm9sIG9yIG5vdC5cbiAgICAqL1xuICBhdHRyaWJ1dGlvbkNvbnRyb2w6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgbWFwIGlzIGNsaWNrZWQuIFRoZSBoYW5kbGVyIGlzIGNhbGxlZCB3aXRoIHRoZSBjbGlja2VkXG4gICAqIGNvb3JkaW5hdGVzIChodHRwczovL3d3dy5tYXBib3guY29tL21hcGJveC1nbC1qcy9hcGkvI0xuZ0xhdCkgYW5kIHRoZVxuICAgKiBzY3JlZW4gY29vcmRpbmF0ZXMgKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2FwaS8jUG9pbnRMaWtlKS5cbiAgICovXG4gIG9uQ2xpY2s6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgICogQ2FsbGVkIHdoZW4gYSBmZWF0dXJlIGlzIGNsaWNrZWQgb24uIFVzZXMgTWFwYm94J3NcbiAgICAqIHF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyBBUEkgdG8gZmluZCBmZWF0dXJlcyB1bmRlciB0aGUgcG9pbnRlcjpcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2FwaS8jTWFwI3F1ZXJ5UmVuZGVyZWRGZWF0dXJlc1xuICAgICogVG8gcXVlcnkgb25seSBzb21lIG9mIHRoZSBsYXllcnMsIHNldCB0aGUgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBpbiB0aGVcbiAgICAqIGxheWVyIHN0eWxlIHRvIGB0cnVlYC4gU2VlIE1hcGJveCdzIHN0eWxlIHNwZWNcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLXN0eWxlLXNwZWMvI2xheWVyLWludGVyYWN0aXZlXG4gICAgKiBJZiBubyBpbnRlcmFjdGl2ZSBsYXllcnMgYXJlIGZvdW5kIChlLmcuIHVzaW5nIE1hcGJveCdzIGRlZmF1bHQgc3R5bGVzKSxcbiAgICAqIHdpbGwgZmFsbCBiYWNrIHRvIHF1ZXJ5IGFsbCBsYXllcnMuXG4gICAgKi9cbiAgb25DbGlja0ZlYXR1cmVzOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICAqIFJhZGl1cyB0byBkZXRlY3QgZmVhdHVyZXMgYXJvdW5kIGEgY2xpY2tlZCBwb2ludC4gRGVmYXVsdHMgdG8gMTUuXG4gICAgKi9cbiAgY2xpY2tSYWRpdXM6IFByb3BUeXBlcy5udW1iZXIsXG5cbiAgLyoqXG4gICAgKiBQYXNzZWQgdG8gTWFwYm94IE1hcCBjb25zdHJ1Y3RvciB3aGljaCBwYXNzZXMgaXQgdG8gdGhlIGNhbnZhcyBjb250ZXh0LlxuICAgICogVGhpcyBpcyB1bnNlZnVsIHdoZW4geW91IHdhbnQgdG8gZXhwb3J0IHRoZSBjYW52YXMgYXMgYSBQTkcuXG4gICAgKi9cbiAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICAqIFRoZXJlIGFyZSBzdGlsbCBrbm93biBpc3N1ZXMgd2l0aCBzdHlsZSBkaWZmaW5nLiBBcyBhIHRlbXBvcmFyeSBzdG9wZ2FwLFxuICAgICogYWRkIHRoZSBvcHRpb24gdG8gcHJldmVudCBzdHlsZSBkaWZmaW5nLlxuICAgICovXG4gIHByZXZlbnRTdHlsZURpZmZpbmc6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgICogRW5hYmxlcyBwZXJzcGVjdGl2ZSBjb250cm9sIGV2ZW50IGhhbmRsaW5nXG4gICAgKi9cbiAgcGVyc3BlY3RpdmVFbmFibGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICAqIFNwZWNpZnkgdGhlIGJlYXJpbmcgb2YgdGhlIHZpZXdwb3J0XG4gICAgKi9cbiAgYmVhcmluZzogUHJvcFR5cGVzLm51bWJlcixcblxuICAvKipcbiAgICAqIFNwZWNpZnkgdGhlIHBpdGNoIG9mIHRoZSB2aWV3cG9ydFxuICAgICovXG4gIHBpdGNoOiBQcm9wVHlwZXMubnVtYmVyLFxuXG4gIC8qKlxuICAgICogU3BlY2lmeSB0aGUgYWx0aXR1ZGUgb2YgdGhlIHZpZXdwb3J0IGNhbWVyYVxuICAgICogVW5pdDogbWFwIGhlaWdodHMsIGRlZmF1bHQgMS41XG4gICAgKiBOb24tcHVibGljIEFQSSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy8xMTM3XG4gICAgKi9cbiAgYWx0aXR1ZGU6IFByb3BUeXBlcy5udW1iZXIsXG5cbiAgLyoqXG4gICAgKiBUaGUgbG9hZCBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiBhbGwgZGVwZW5kZW5jaWVzIGhhdmUgYmVlbiBsb2FkZWQgYW5kXG4gICAgKiB0aGUgbWFwIGlzIHJlYWR5LlxuICAgICovXG4gIG9uTG9hZDogUHJvcFR5cGVzLmZ1bmNcblxufTtcblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgbWFwU3R5bGU6ICdtYXBib3g6Ly9zdHlsZXMvbWFwYm94L2xpZ2h0LXY5JyxcbiAgb25DaGFuZ2VWaWV3cG9ydDogbnVsbCxcbiAgbWFwYm94QXBpQWNjZXNzVG9rZW46IGdldEFjY2Vzc1Rva2VuKCksXG4gIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXG4gIGF0dHJpYnV0aW9uQ29udHJvbDogdHJ1ZSxcbiAgaWdub3JlRW1wdHlGZWF0dXJlczogdHJ1ZSxcbiAgYmVhcmluZzogMCxcbiAgcGl0Y2g6IDAsXG4gIGFsdGl0dWRlOiAxLjUsXG4gIGNsaWNrUmFkaXVzOiAxNSxcbiAgbWF4Wm9vbTogMjBcbn07XG5cbi8vIFRyeSB0byBnZXQgYWNjZXNzIHRva2VuIGZyb20gVVJMLCBlbnYsIGxvY2FsIHN0b3JhZ2Ugb3IgY29uZmlnXG5mdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpIHtcbiAgdmFyIGFjY2Vzc1Rva2VuID0gbnVsbDtcblxuICBpZiAod2luZG93LmxvY2F0aW9uKSB7XG4gICAgdmFyIG1hdGNoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5tYXRjaCgvYWNjZXNzX3Rva2VuPShbXiZcXC9dKikvKTtcbiAgICBhY2Nlc3NUb2tlbiA9IG1hdGNoICYmIG1hdGNoWzFdO1xuICB9XG5cbiAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgIC8vIE5vdGU6IFRoaXMgZGVwZW5kcyBvbiB0aGUgYnVuZGxlciAoZS5nLiB3ZWJwYWNrKSBpbm1wb3J0aW5nIGVudmlyb25tZW50IGNvcnJlY3RseVxuICAgIGFjY2Vzc1Rva2VuID1cbiAgICAgIHByb2Nlc3MuZW52Lk1hcGJveEFjY2Vzc1Rva2VuIHx8IHByb2Nlc3MuZW52Lk1BUEJPWF9BQ0NFU1NfVE9LRU47IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfVxuXG4gIC8vIFRyeSB0byBzYXZlIGFuZCByZXN0b3JlIGZyb20gbG9jYWwgc3RvcmFnZVxuICAvLyBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAvLyAgIGlmIChhY2Nlc3NUb2tlbikge1xuICAvLyAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAvLyAgIH0gZWxzZSB7XG4gIC8vICAgICBhY2Nlc3NUb2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuYWNjZXNzVG9rZW47XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgcmV0dXJuIGFjY2Vzc1Rva2VuIHx8IGNvbmZpZy5ERUZBVUxUUy5NQVBCT1hfQVBJX0FDQ0VTU19UT0tFTjtcbn1cblxudmFyIE1hcEdMID0gKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgZnVuY3Rpb24gTWFwR0wocHJvcHMpIHtcbiAgICBDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzU3VwcG9ydGVkOiBtYXBib3hnbC5zdXBwb3J0ZWQoKSxcbiAgICAgIGlzRHJhZ2dpbmc6IGZhbHNlLFxuICAgICAgaXNIb3ZlcmluZzogZmFsc2UsXG4gICAgICBzdGFydERyYWdMbmdMYXQ6IG51bGwsXG4gICAgICBzdGFydEJlYXJpbmc6IG51bGwsXG4gICAgICBzdGFydFBpdGNoOiBudWxsXG4gICAgfTtcbiAgICB0aGlzLl9xdWVyeVBhcmFtcyA9IHt9O1xuICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gcHJvcHMubWFwYm94QXBpQWNjZXNzVG9rZW47XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuaXNTdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50RGlkTW91bnQgPSBub29wO1xuICAgICAgdGhpcy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gbm9vcDtcbiAgICAgIHRoaXMuY29tcG9uZW50RGlkVXBkYXRlID0gbm9vcDtcbiAgICB9XG5cbiAgICBhdXRvYmluZCh0aGlzKTtcbiAgfVxuXG4gIGlmICggQ29tcG9uZW50ICkgTWFwR0wuX19wcm90b19fID0gQ29tcG9uZW50O1xuICBNYXBHTC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDb21wb25lbnQgJiYgQ29tcG9uZW50LnByb3RvdHlwZSApO1xuICBNYXBHTC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBHTDtcblxuICBNYXBHTC5zdXBwb3J0ZWQgPSBmdW5jdGlvbiBzdXBwb3J0ZWQgKCkge1xuICAgIHJldHVybiBtYXBib3hnbC5zdXBwb3J0ZWQoKTtcbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdmFyIG1hcFN0eWxlID0gSW1tdXRhYmxlLk1hcC5pc01hcCh0aGlzLnByb3BzLm1hcFN0eWxlKSA/XG4gICAgICB0aGlzLnByb3BzLm1hcFN0eWxlLnRvSlMoKSA6XG4gICAgICB0aGlzLnByb3BzLm1hcFN0eWxlO1xuXG4gICAgdmFyIG1hcCA9IG5ldyBtYXBib3hnbC5NYXAoe1xuICAgICAgY29udGFpbmVyOiB0aGlzLnJlZnMubWFwYm94TWFwLFxuICAgICAgY2VudGVyOiBbdGhpcy5wcm9wcy5sb25naXR1ZGUsIHRoaXMucHJvcHMubGF0aXR1ZGVdLFxuICAgICAgem9vbTogdGhpcy5wcm9wcy56b29tLFxuICAgICAgbWF4Wm9vbTogdGhpcy5wcm9wcy5tYXhab29tLFxuICAgICAgcGl0Y2g6IHRoaXMucHJvcHMucGl0Y2gsXG4gICAgICBiZWFyaW5nOiB0aGlzLnByb3BzLmJlYXJpbmcsXG4gICAgICBzdHlsZTogbWFwU3R5bGUsXG4gICAgICBpbnRlcmFjdGl2ZTogZmFsc2UsXG4gICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRoaXMucHJvcHMucHJlc2VydmVEcmF3aW5nQnVmZmVyXG4gICAgICAvLyBUT0RPP1xuICAgICAgLy8gYXR0cmlidXRpb25Db250cm9sOiB0aGlzLnByb3BzLmF0dHJpYnV0aW9uQ29udHJvbFxuICAgIH0pO1xuXG4gICAgLy8gVE9ETyAtIGNhbiB3ZSBkcm9wIGQzLXNlbGVjdCBkZXBlbmRlbmN5P1xuICAgIHNlbGVjdChtYXAuZ2V0Q2FudmFzKCkpLnN0eWxlKCdvdXRsaW5lJywgJ25vbmUnKTtcblxuICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICB0aGlzLl91cGRhdGVNYXBWaWV3cG9ydCh7fSwgdGhpcy5wcm9wcyk7XG4gICAgdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQobWFwLnRyYW5zZm9ybSk7XG4gICAgdGhpcy5fdXBkYXRlUXVlcnlQYXJhbXMobWFwU3R5bGUpO1xuICB9O1xuXG4gIC8vIE5ldyBwcm9wcyBhcmUgY29taW4nIHJvdW5kIHRoZSBjb3JuZXIhXG4gIE1hcEdMLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAobmV3UHJvcHMpIHtcbiAgICB0aGlzLl91cGRhdGVTdGF0ZUZyb21Qcm9wcyh0aGlzLnByb3BzLCBuZXdQcm9wcyk7XG4gICAgdGhpcy5fdXBkYXRlTWFwVmlld3BvcnQodGhpcy5wcm9wcywgbmV3UHJvcHMpO1xuICAgIHRoaXMuX3VwZGF0ZU1hcFN0eWxlKHRoaXMucHJvcHMsIG5ld1Byb3BzKTtcbiAgICAvLyBTYXZlIHdpZHRoL2hlaWdodCBzbyB0aGF0IHdlIGNhbiBjaGVjayB0aGVtIGluIGNvbXBvbmVudERpZFVwZGF0ZVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUHVyZSByZW5kZXJcbiAgTWFwR0wucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZSAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICByZXR1cm4gc2hhbGxvd0NvbXBhcmUodGhpcywgbmV4dFByb3BzLCBuZXh0U3RhdGUpO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUgKCkge1xuICAgIC8vIG1hcC5yZXNpemUoKSByZWFkcyBzaXplIGZyb20gRE9NLCB3ZSBuZWVkIHRvIGNhbGwgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5fdXBkYXRlTWFwU2l6ZSh0aGlzLnN0YXRlLCB0aGlzLnByb3BzKTtcbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMuX21hcCkge1xuICAgICAgdGhpcy5fbWFwLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBFeHRlcm5hbCBhcHBzIGNhbiBhY2Nlc3MgbWFwIHRoaXMgd2F5XG4gIE1hcEdMLnByb3RvdHlwZS5fZ2V0TWFwID0gZnVuY3Rpb24gX2dldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hcDtcbiAgfTtcblxuICAvLyBDYWxjdWxhdGUgYSBjdXJzb3Igc3R5bGVcbiAgTWFwR0wucHJvdG90eXBlLl9nZXRDdXJzb3IgPSBmdW5jdGlvbiBfZ2V0Q3Vyc29yICgpIHtcbiAgICB2YXIgaXNJbnRlcmFjdGl2ZSA9XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlVmlld3BvcnQgfHxcbiAgICAgIHRoaXMucHJvcHMub25DbGlja0ZlYXR1cmUgfHxcbiAgICAgIHRoaXMucHJvcHMub25Ib3ZlckZlYXR1cmVzO1xuICAgIGlmIChpc0ludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5pc0RyYWdnaW5nID9cbiAgICAgICAgY29uZmlnLkNVUlNPUi5HUkFCQklORyA6XG4gICAgICAgICh0aGlzLnN0YXRlLmlzSG92ZXJpbmcgPyBjb25maWcuQ1VSU09SLlBPSU5URVIgOiBjb25maWcuQ1VSU09SLkdSQUIpO1xuICAgIH1cbiAgICByZXR1cm4gJ2luaGVyaXQnO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5fdXBkYXRlU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiBfdXBkYXRlU3RhdGVGcm9tUHJvcHMgKG9sZFByb3BzLCBuZXdQcm9wcykge1xuICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gbmV3UHJvcHMubWFwYm94QXBpQWNjZXNzVG9rZW47XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzdGFydERyYWdMbmdMYXQ6IG5ld1Byb3BzLnN0YXJ0RHJhZ0xuZ0xhdFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIEhvdmVyIGFuZCBjbGljayBvbmx5IHF1ZXJ5IGxheWVycyB3aG9zZSBpbnRlcmFjdGl2ZSBwcm9wZXJ0eSBpcyB0cnVlXG4gIC8vIElmIG5vIGludGVyYWN0aXZpdHkgaXMgc3BlY2lmaWVkLCBxdWVyeSBhbGwgbGF5ZXJzXG4gIE1hcEdMLnByb3RvdHlwZS5fdXBkYXRlUXVlcnlQYXJhbXMgPSBmdW5jdGlvbiBfdXBkYXRlUXVlcnlQYXJhbXMgKG1hcFN0eWxlKSB7XG4gICAgdmFyIGludGVyYWN0aXZlTGF5ZXJJZHMgPSBnZXRJbnRlcmFjdGl2ZUxheWVySWRzKG1hcFN0eWxlKTtcbiAgICB0aGlzLl9xdWVyeVBhcmFtcyA9IGludGVyYWN0aXZlTGF5ZXJJZHMubGVuZ3RoID09PSAwID8ge30gOlxuICAgICAge2xheWVyczogaW50ZXJhY3RpdmVMYXllcklkc307XG4gIH07XG5cbiAgLy8gVXBkYXRlIGEgc291cmNlIGluIHRoZSBtYXAgc3R5bGVcbiAgTWFwR0wucHJvdG90eXBlLl91cGRhdGVTb3VyY2UgPSBmdW5jdGlvbiBfdXBkYXRlU291cmNlIChtYXAsIHVwZGF0ZSkge1xuICAgIHZhciBuZXdTb3VyY2UgPSB1cGRhdGUuc291cmNlLnRvSlMoKTtcbiAgICBpZiAobmV3U291cmNlLnR5cGUgPT09ICdnZW9qc29uJykge1xuICAgICAgdmFyIG9sZFNvdXJjZSA9IG1hcC5nZXRTb3VyY2UodXBkYXRlLmlkKTtcbiAgICAgIGlmIChvbGRTb3VyY2UudHlwZSA9PT0gJ2dlb2pzb24nKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhIGlmIG5vIG90aGVyIEdlb0pTT05Tb3VyY2Ugb3B0aW9ucyB3ZXJlIGNoYW5nZWRcbiAgICAgICAgdmFyIG9sZE9wdHMgPSBvbGRTb3VyY2Uud29ya2VyT3B0aW9ucztcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChuZXdTb3VyY2UubWF4em9vbSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBuZXdTb3VyY2UubWF4em9vbSA9PT0gb2xkT3B0cy5nZW9qc29uVnRPcHRpb25zLm1heFpvb20pICYmXG4gICAgICAgICAgKG5ld1NvdXJjZS5idWZmZXIgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgbmV3U291cmNlLmJ1ZmZlciA9PT0gb2xkT3B0cy5nZW9qc29uVnRPcHRpb25zLmJ1ZmZlcikgJiZcbiAgICAgICAgICAobmV3U291cmNlLnRvbGVyYW5jZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBuZXdTb3VyY2UudG9sZXJhbmNlID09PSBvbGRPcHRzLmdlb2pzb25WdE9wdGlvbnMudG9sZXJhbmNlKSAmJlxuICAgICAgICAgIChuZXdTb3VyY2UuY2x1c3RlciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBuZXdTb3VyY2UuY2x1c3RlciA9PT0gb2xkT3B0cy5jbHVzdGVyKSAmJlxuICAgICAgICAgIChuZXdTb3VyY2UuY2x1c3RlclJhZGl1cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBuZXdTb3VyY2UuY2x1c3RlclJhZGl1cyA9PT0gb2xkT3B0cy5zdXBlcmNsdXN0ZXJPcHRpb25zLnJhZGl1cykgJiZcbiAgICAgICAgICAobmV3U291cmNlLmNsdXN0ZXJNYXhab29tID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG5ld1NvdXJjZS5jbHVzdGVyTWF4Wm9vbSA9PT0gb2xkT3B0cy5zdXBlcmNsdXN0ZXJPcHRpb25zLm1heFpvb20pXG4gICAgICAgICkge1xuICAgICAgICAgIG9sZFNvdXJjZS5zZXREYXRhKG5ld1NvdXJjZS5kYXRhKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBtYXAucmVtb3ZlU291cmNlKHVwZGF0ZS5pZCk7XG4gICAgbWFwLmFkZFNvdXJjZSh1cGRhdGUuaWQsIG5ld1NvdXJjZSk7XG4gIH07XG5cbiAgLy8gSW5kaXZpZHVhbGx5IHVwZGF0ZSB0aGUgbWFwcyBzb3VyY2UgYW5kIGxheWVycyB0aGF0IGhhdmUgY2hhbmdlZCBpZiBhbGxcbiAgLy8gb3RoZXIgc3R5bGUgcHJvcHMgaGF2ZW4ndCBjaGFuZ2VkLiBUaGlzIHByZXZlbnRzIGZsaWNraW5nIG9mIHRoZSBtYXAgd2hlblxuICAvLyBzdHlsZXMgb25seSBjaGFuZ2Ugc291cmNlcyBvciBsYXllcnMuXG4gIC8qIGVzbGludC1kaXNhYmxlIG1heC1zdGF0ZW1lbnRzLCBjb21wbGV4aXR5ICovXG4gIE1hcEdMLnByb3RvdHlwZS5fc2V0RGlmZlN0eWxlID0gZnVuY3Rpb24gX3NldERpZmZTdHlsZSAocHJldlN0eWxlLCBuZXh0U3R5bGUpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBwcmV2S2V5c01hcCA9IHByZXZTdHlsZSAmJiBzdHlsZUtleXNNYXAocHJldlN0eWxlKSB8fCB7fTtcbiAgICB2YXIgbmV4dEtleXNNYXAgPSBzdHlsZUtleXNNYXAobmV4dFN0eWxlKTtcbiAgICBmdW5jdGlvbiBzdHlsZUtleXNNYXAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBzdHlsZS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSkuZGVsZXRlKCdsYXllcnMnKS5kZWxldGUoJ3NvdXJjZXMnKS50b0pTKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BzT3RoZXJUaGFuTGF5ZXJzT3JTb3VyY2VzRGlmZmVyKCkge1xuICAgICAgdmFyIHByZXZLZXlzTGlzdCA9IE9iamVjdC5rZXlzKHByZXZLZXlzTWFwKTtcbiAgICAgIHZhciBuZXh0S2V5c0xpc3QgPSBPYmplY3Qua2V5cyhuZXh0S2V5c01hcCk7XG4gICAgICBpZiAocHJldktleXNMaXN0Lmxlbmd0aCAhPT0gbmV4dEtleXNMaXN0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIGBuZXh0U3R5bGVgIGFuZCBgcHJldlN0eWxlYCBzaG91bGQgbm90IGhhdmUgdGhlIHNhbWUgc2V0IG9mIHByb3BzLlxuICAgICAgaWYgKG5leHRLZXlzTGlzdC5zb21lKFxuICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBwcmV2U3R5bGUuZ2V0KGtleSkgIT09IG5leHRTdHlsZS5nZXQoa2V5KTsgfVxuICAgICAgICAvLyBCdXQgdGhlIHZhbHVlIG9mIG9uZSBvZiB0aG9zZSBwcm9wcyBpcyBkaWZmZXJlbnQuXG4gICAgICApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICBpZiAoIXByZXZTdHlsZSB8fCBwcm9wc090aGVyVGhhbkxheWVyc09yU291cmNlc0RpZmZlcigpKSB7XG4gICAgICBtYXAuc2V0U3R5bGUobmV4dFN0eWxlLnRvSlMoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZiA9IGRpZmZTdHlsZXMocHJldlN0eWxlLCBuZXh0U3R5bGUpO1xuICAgIHZhciBzb3VyY2VzRGlmZiA9IHJlZi5zb3VyY2VzRGlmZjtcbiAgICB2YXIgbGF5ZXJzRGlmZiA9IHJlZi5sYXllcnNEaWZmO1xuXG4gICAgLy8gVE9ETzogSXQncyByYXRoZXIgZGlmZmljdWx0IHRvIGRldGVybWluZSBzdHlsZSBkaWZmaW5nIGluIHRoZSBwcmVzZW5jZVxuICAgIC8vIG9mIHJlZnMuIEZvciBub3csIGlmIGFueSBzdHlsZSB1cGRhdGUgaGFzIGEgcmVmLCBmYWxsYmFjayB0byBubyBkaWZmaW5nLlxuICAgIC8vIFdlIGNhbiBjb21lIGJhY2sgdG8gdGhpcyBjYXNlIGlmIHRoZXJlJ3MgYSBzb2xpZCB1c2VjYXNlLlxuICAgIGlmIChsYXllcnNEaWZmLnVwZGF0ZXMuc29tZShmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5sYXllci5nZXQoJ3JlZicpOyB9KSkge1xuICAgICAgbWFwLnNldFN0eWxlKG5leHRTdHlsZS50b0pTKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gc291cmNlc0RpZmYuZW50ZXI7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICB2YXIgZW50ZXIgPSBsaXN0W2ldO1xuXG4gICAgICBtYXAuYWRkU291cmNlKGVudGVyLmlkLCBlbnRlci5zb3VyY2UudG9KUygpKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSQxID0gMCwgbGlzdCQxID0gc291cmNlc0RpZmYudXBkYXRlOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkge1xuICAgICAgdmFyIHVwZGF0ZSA9IGxpc3QkMVtpJDFdO1xuXG4gICAgICB0aGlzJDEuX3VwZGF0ZVNvdXJjZShtYXAsIHVwZGF0ZSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkkMiA9IDAsIGxpc3QkMiA9IHNvdXJjZXNEaWZmLmV4aXQ7IGkkMiA8IGxpc3QkMi5sZW5ndGg7IGkkMiArPSAxKSB7XG4gICAgICB2YXIgZXhpdCA9IGxpc3QkMltpJDJdO1xuXG4gICAgICBtYXAucmVtb3ZlU291cmNlKGV4aXQuaWQpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpJDMgPSAwLCBsaXN0JDMgPSBsYXllcnNEaWZmLmV4aXRpbmc7IGkkMyA8IGxpc3QkMy5sZW5ndGg7IGkkMyArPSAxKSB7XG4gICAgICB2YXIgZXhpdCQxID0gbGlzdCQzW2kkM107XG5cbiAgICAgIGlmIChtYXAuc3R5bGUuZ2V0TGF5ZXIoZXhpdCQxLmlkKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIoZXhpdCQxLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSQ0ID0gMCwgbGlzdCQ0ID0gbGF5ZXJzRGlmZi51cGRhdGVzOyBpJDQgPCBsaXN0JDQubGVuZ3RoOyBpJDQgKz0gMSkge1xuICAgICAgdmFyIHVwZGF0ZSQxID0gbGlzdCQ0W2kkNF07XG5cbiAgICAgIGlmICghdXBkYXRlJDEuZW50ZXIpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhbiBvbGQgbGF5ZXIgdGhhdCBuZWVkcyB0byBiZSB1cGRhdGVkLiBSZW1vdmUgdGhlIG9sZCBsYXllclxuICAgICAgICAvLyB3aXRoIHRoZSBzYW1lIGlkIGFuZCBhZGQgaXQgYmFjayBhZ2Fpbi5cbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKHVwZGF0ZSQxLmlkKTtcbiAgICAgIH1cbiAgICAgIG1hcC5hZGRMYXllcih1cGRhdGUkMS5sYXllci50b0pTKCksIHVwZGF0ZSQxLmJlZm9yZSk7XG4gICAgfVxuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzLCBjb21wbGV4aXR5ICovXG5cbiAgTWFwR0wucHJvdG90eXBlLl91cGRhdGVNYXBTdHlsZSA9IGZ1bmN0aW9uIF91cGRhdGVNYXBTdHlsZSAob2xkUHJvcHMsIG5ld1Byb3BzKSB7XG4gICAgdmFyIG1hcFN0eWxlID0gbmV3UHJvcHMubWFwU3R5bGU7XG4gICAgdmFyIG9sZE1hcFN0eWxlID0gb2xkUHJvcHMubWFwU3R5bGU7XG4gICAgaWYgKG1hcFN0eWxlICE9PSBvbGRNYXBTdHlsZSkge1xuICAgICAgaWYgKEltbXV0YWJsZS5NYXAuaXNNYXAobWFwU3R5bGUpKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByZXZlbnRTdHlsZURpZmZpbmcpIHtcbiAgICAgICAgICB0aGlzLl9tYXAuc2V0U3R5bGUobWFwU3R5bGUudG9KUygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zZXREaWZmU3R5bGUob2xkTWFwU3R5bGUsIG1hcFN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbWFwLnNldFN0eWxlKG1hcFN0eWxlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3VwZGF0ZVF1ZXJ5UGFyYW1zKG1hcFN0eWxlKTtcbiAgICB9XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLl91cGRhdGVNYXBWaWV3cG9ydCA9IGZ1bmN0aW9uIF91cGRhdGVNYXBWaWV3cG9ydCAob2xkUHJvcHMsIG5ld1Byb3BzKSB7XG4gICAgdmFyIHZpZXdwb3J0Q2hhbmdlZCA9XG4gICAgICBuZXdQcm9wcy5sYXRpdHVkZSAhPT0gb2xkUHJvcHMubGF0aXR1ZGUgfHxcbiAgICAgIG5ld1Byb3BzLmxvbmdpdHVkZSAhPT0gb2xkUHJvcHMubG9uZ2l0dWRlIHx8XG4gICAgICBuZXdQcm9wcy56b29tICE9PSBvbGRQcm9wcy56b29tIHx8XG4gICAgICBuZXdQcm9wcy5waXRjaCAhPT0gb2xkUHJvcHMucGl0Y2ggfHxcbiAgICAgIG5ld1Byb3BzLnpvb20gIT09IG9sZFByb3BzLmJlYXJpbmcgfHxcbiAgICAgIG5ld1Byb3BzLmFsdGl0dWRlICE9PSBvbGRQcm9wcy5hbHRpdHVkZTtcblxuICAgIGlmICh2aWV3cG9ydENoYW5nZWQpIHtcbiAgICAgIHRoaXMuX21hcC5qdW1wVG8oe1xuICAgICAgICBjZW50ZXI6IFtuZXdQcm9wcy5sb25naXR1ZGUsIG5ld1Byb3BzLmxhdGl0dWRlXSxcbiAgICAgICAgem9vbTogbmV3UHJvcHMuem9vbSxcbiAgICAgICAgYmVhcmluZzogbmV3UHJvcHMuYmVhcmluZyxcbiAgICAgICAgcGl0Y2g6IG5ld1Byb3BzLnBpdGNoXG4gICAgICB9KTtcblxuICAgICAgLy8gVE9ETyAtIGp1bXBUbyBkb2Vzbid0IGhhbmRsZSBhbHRpdHVkZVxuICAgICAgaWYgKG5ld1Byb3BzLmFsdGl0dWRlICE9PSBvbGRQcm9wcy5hbHRpdHVkZSkge1xuICAgICAgICB0aGlzLl9tYXAudHJhbnNmb3JtLmFsdGl0dWRlID0gbmV3UHJvcHMuYWx0aXR1ZGU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIE5vdGU6IG5lZWRzIHRvIGJlIGNhbGxlZCBhZnRlciByZW5kZXIgKGUuZy4gaW4gY29tcG9uZW50RGlkVXBkYXRlKVxuICBNYXBHTC5wcm90b3R5cGUuX3VwZGF0ZU1hcFNpemUgPSBmdW5jdGlvbiBfdXBkYXRlTWFwU2l6ZSAob2xkUHJvcHMsIG5ld1Byb3BzKSB7XG4gICAgdmFyIHNpemVDaGFuZ2VkID1cbiAgICAgIG9sZFByb3BzLndpZHRoICE9PSBuZXdQcm9wcy53aWR0aCB8fCBvbGRQcm9wcy5oZWlnaHQgIT09IG5ld1Byb3BzLmhlaWdodDtcblxuICAgIGlmIChzaXplQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fbWFwLnJlc2l6ZSgpO1xuICAgICAgdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQodGhpcy5fbWFwLnRyYW5zZm9ybSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhbGN1bGF0ZXMgYSBuZXcgcGl0Y2ggYW5kIGJlYXJpbmcgZnJvbSBhIHBvc2l0aW9uIChjb21pbmcgZnJvbSBhbiBldmVudClcbiAgTWFwR0wucHJvdG90eXBlLl9jYWxjdWxhdGVOZXdQaXRjaEFuZEJlYXJpbmcgPSBmdW5jdGlvbiBfY2FsY3VsYXRlTmV3UGl0Y2hBbmRCZWFyaW5nIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcbiAgICB2YXIgc3RhcnRQb3MgPSByZWYuc3RhcnRQb3M7XG4gICAgdmFyIHN0YXJ0QmVhcmluZyA9IHJlZi5zdGFydEJlYXJpbmc7XG4gICAgdmFyIHN0YXJ0UGl0Y2ggPSByZWYuc3RhcnRQaXRjaDtcblxuICAgIHZhciB4RGVsdGEgPSBwb3NbMF0gLSBzdGFydFBvc1swXTtcbiAgICB2YXIgYmVhcmluZyA9IHN0YXJ0QmVhcmluZyArIDE4MCAqIHhEZWx0YSAvIHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICB2YXIgcGl0Y2ggPSBzdGFydFBpdGNoO1xuICAgIHZhciB5RGVsdGEgPSBwb3NbMV0gLSBzdGFydFBvc1sxXTtcbiAgICBpZiAoeURlbHRhID4gMCkge1xuICAgICAgLy8gRHJhZ2dpbmcgZG93bndhcmRzLCBncmFkdWFsbHkgZGVjcmVhc2UgcGl0Y2hcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnByb3BzLmhlaWdodCAtIHN0YXJ0UG9zWzFdKSA+IFBJVENIX01PVVNFX1RIUkVTSE9MRCkge1xuICAgICAgICB2YXIgc2NhbGUgPSB5RGVsdGEgLyAodGhpcy5wcm9wcy5oZWlnaHQgLSBzdGFydFBvc1sxXSk7XG4gICAgICAgIHBpdGNoID0gKDEgLSBzY2FsZSkgKiBQSVRDSF9BQ0NFTCAqIHN0YXJ0UGl0Y2g7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh5RGVsdGEgPCAwKSB7XG4gICAgICAvLyBEcmFnZ2luZyB1cHdhcmRzLCBncmFkdWFsbHkgaW5jcmVhc2UgcGl0Y2hcbiAgICAgIGlmIChzdGFydFBvcy55ID4gUElUQ0hfTU9VU0VfVEhSRVNIT0xEKSB7XG4gICAgICAgIC8vIE1vdmUgZnJvbSAwIHRvIDEgYXMgd2UgZHJhZyB1cHdhcmRzXG4gICAgICAgIHZhciB5U2NhbGUgPSAxIC0gcG9zWzFdIC8gc3RhcnRQb3NbMV07XG4gICAgICAgIC8vIEdyYWR1YWxseSBhZGQgdW50aWwgd2UgaGl0IG1heCBwaXRjaFxuICAgICAgICBwaXRjaCA9IHN0YXJ0UGl0Y2ggKyB5U2NhbGUgKiAoTUFYX1BJVENIIC0gc3RhcnRQaXRjaCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5kZWJ1ZyhzdGFydFBpdGNoLCBwaXRjaCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBpdGNoOiBNYXRoLm1heChNYXRoLm1pbihwaXRjaCwgTUFYX1BJVENIKSwgMCksXG4gICAgICBiZWFyaW5nOiBiZWFyaW5nXG4gICAgfTtcbiAgfTtcblxuICAgLy8gSGVscGVyIHRvIGNhbGwgcHJvcHMub25DaGFuZ2VWaWV3cG9ydFxuICBNYXBHTC5wcm90b3R5cGUuX2NhbGxPbkNoYW5nZVZpZXdwb3J0ID0gZnVuY3Rpb24gX2NhbGxPbkNoYW5nZVZpZXdwb3J0ICh0cmFuc2Zvcm0sIG9wdHMpIHtcbiAgICBpZiAoIG9wdHMgPT09IHZvaWQgMCApIG9wdHMgPSB7fTtcblxuICAgIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlVmlld3BvcnQpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2VWaWV3cG9ydChPYmplY3QuYXNzaWduKHt9LCB7bGF0aXR1ZGU6IHRyYW5zZm9ybS5jZW50ZXIubGF0LFxuICAgICAgICBsb25naXR1ZGU6IG1vZCh0cmFuc2Zvcm0uY2VudGVyLmxuZyArIDE4MCwgMzYwKSAtIDE4MCxcbiAgICAgICAgem9vbTogdHJhbnNmb3JtLnpvb20sXG4gICAgICAgIHBpdGNoOiB0cmFuc2Zvcm0ucGl0Y2gsXG4gICAgICAgIGJlYXJpbmc6IG1vZCh0cmFuc2Zvcm0uYmVhcmluZyArIDE4MCwgMzYwKSAtIDE4MCxcblxuICAgICAgICBpc0RyYWdnaW5nOiB0aGlzLnByb3BzLmlzRHJhZ2dpbmcsXG4gICAgICAgIHN0YXJ0RHJhZ0xuZ0xhdDogdGhpcy5wcm9wcy5zdGFydERyYWdMbmdMYXQsXG4gICAgICAgIHN0YXJ0QmVhcmluZzogdGhpcy5wcm9wcy5zdGFydEJlYXJpbmcsXG4gICAgICAgIHN0YXJ0UGl0Y2g6IHRoaXMucHJvcHMuc3RhcnRQaXRjaH0sXG5cbiAgICAgICAgb3B0cykpO1xuICAgIH1cbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuX29uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIF9vblRvdWNoU3RhcnQgKG9wdHMpIHtcbiAgICB0aGlzLl9vbk1vdXNlRG93bihvcHRzKTtcbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuX29uVG91Y2hEcmFnID0gZnVuY3Rpb24gX29uVG91Y2hEcmFnIChvcHRzKSB7XG4gICAgdGhpcy5fb25Nb3VzZURyYWcob3B0cyk7XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLl9vblRvdWNoUm90YXRlID0gZnVuY3Rpb24gX29uVG91Y2hSb3RhdGUgKG9wdHMpIHtcbiAgICB0aGlzLl9vbk1vdXNlUm90YXRlKG9wdHMpO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5fb25Ub3VjaEVuZCA9IGZ1bmN0aW9uIF9vblRvdWNoRW5kIChvcHRzKSB7XG4gICAgdGhpcy5fb25Nb3VzZVVwKG9wdHMpO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5fb25Ub3VjaFRhcCA9IGZ1bmN0aW9uIF9vblRvdWNoVGFwIChvcHRzKSB7XG4gICAgdGhpcy5fb25Nb3VzZUNsaWNrKG9wdHMpO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5fb25Nb3VzZURvd24gPSBmdW5jdGlvbiBfb25Nb3VzZURvd24gKHJlZikge1xuICAgIHZhciBwb3MgPSByZWYucG9zO1xuXG4gICAgdmFyIHJlZiQxID0gdGhpcy5fbWFwO1xuICAgIHZhciB0cmFuc2Zvcm0gPSByZWYkMS50cmFuc2Zvcm07XG4gICAgdmFyIHJlZiQyID0gdW5wcm9qZWN0RnJvbVRyYW5zZm9ybSh0cmFuc2Zvcm0sIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoIFBvaW50LCBbIG51bGwgXS5jb25jYXQoIHBvcykgKSkpO1xuICAgIHZhciBsbmcgPSByZWYkMi5sbmc7XG4gICAgdmFyIGxhdCA9IHJlZiQyLmxhdDtcbiAgICB0aGlzLl9jYWxsT25DaGFuZ2VWaWV3cG9ydCh0cmFuc2Zvcm0sIHtcbiAgICAgIGlzRHJhZ2dpbmc6IHRydWUsXG4gICAgICBzdGFydERyYWdMbmdMYXQ6IFtsbmcsIGxhdF0sXG4gICAgICBzdGFydEJlYXJpbmc6IHRyYW5zZm9ybS5iZWFyaW5nLFxuICAgICAgc3RhcnRQaXRjaDogdHJhbnNmb3JtLnBpdGNoXG4gICAgfSk7XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLl9vbk1vdXNlRHJhZyA9IGZ1bmN0aW9uIF9vbk1vdXNlRHJhZyAocmVmKSB7XG4gICAgdmFyIHBvcyA9IHJlZi5wb3M7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMub25DaGFuZ2VWaWV3cG9ydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRha2UgdGhlIHN0YXJ0IGxuZ2xhdCBhbmQgcHV0IGl0IHdoZXJlIHRoZSBtb3VzZSBpcyBkb3duLlxuICAgIGFzc2VydCh0aGlzLnByb3BzLnN0YXJ0RHJhZ0xuZ0xhdCwgJ2BzdGFydERyYWdMbmdMYXRgIHByb3AgaXMgcmVxdWlyZWQgJyArXG4gICAgICAnZm9yIG1vdXNlIGRyYWcgYmVoYXZpb3IgdG8gY2FsY3VsYXRlIHdoZXJlIHRvIHBvc2l0aW9uIHRoZSBtYXAuJyk7XG5cbiAgICB2YXIgdHJhbnNmb3JtID0gY2xvbmVUcmFuc2Zvcm0odGhpcy5fbWFwLnRyYW5zZm9ybSk7XG4gICAgdmFyIHJlZiQxID0gdGhpcy5wcm9wcy5zdGFydERyYWdMbmdMYXQ7XG4gICAgdmFyIGxuZyA9IHJlZiQxWzBdO1xuICAgIHZhciBsYXQgPSByZWYkMVsxXTtcbiAgICB0cmFuc2Zvcm0uc2V0TG9jYXRpb25BdFBvaW50KHtsbmc6IGxuZywgbGF0OiBsYXR9LCBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KCBQb2ludCwgWyBudWxsIF0uY29uY2F0KCBwb3MpICkpKTtcbiAgICB0aGlzLl9jYWxsT25DaGFuZ2VWaWV3cG9ydCh0cmFuc2Zvcm0sIHtpc0RyYWdnaW5nOiB0cnVlfSk7XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLl9vbk1vdXNlUm90YXRlID0gZnVuY3Rpb24gX29uTW91c2VSb3RhdGUgKHJlZikge1xuICAgIHZhciBwb3MgPSByZWYucG9zO1xuICAgIHZhciBzdGFydFBvcyA9IHJlZi5zdGFydFBvcztcblxuICAgIGlmICghdGhpcy5wcm9wcy5vbkNoYW5nZVZpZXdwb3J0IHx8ICF0aGlzLnByb3BzLnBlcnNwZWN0aXZlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZWYkMSA9IHRoaXMucHJvcHM7XG4gICAgdmFyIHN0YXJ0QmVhcmluZyA9IHJlZiQxLnN0YXJ0QmVhcmluZztcbiAgICB2YXIgc3RhcnRQaXRjaCA9IHJlZiQxLnN0YXJ0UGl0Y2g7XG4gICAgYXNzZXJ0KHR5cGVvZiBzdGFydEJlYXJpbmcgPT09ICdudW1iZXInLFxuICAgICAgJ2BzdGFydEJlYXJpbmdgIHByb3AgaXMgcmVxdWlyZWQgZm9yIG1vdXNlIHJvdGF0ZSBiZWhhdmlvcicpO1xuICAgIGFzc2VydCh0eXBlb2Ygc3RhcnRQaXRjaCA9PT0gJ251bWJlcicsXG4gICAgICAnYHN0YXJ0UGl0Y2hgIHByb3AgaXMgcmVxdWlyZWQgZm9yIG1vdXNlIHJvdGF0ZSBiZWhhdmlvcicpO1xuXG4gICAgdmFyIHJlZiQyID0gdGhpcy5fY2FsY3VsYXRlTmV3UGl0Y2hBbmRCZWFyaW5nKHtcbiAgICAgIHBvczogcG9zLFxuICAgICAgc3RhcnRQb3M6IHN0YXJ0UG9zLFxuICAgICAgc3RhcnRCZWFyaW5nOiBzdGFydEJlYXJpbmcsXG4gICAgICBzdGFydFBpdGNoOiBzdGFydFBpdGNoXG4gICAgfSk7XG4gICAgdmFyIHBpdGNoID0gcmVmJDIucGl0Y2g7XG4gICAgdmFyIGJlYXJpbmcgPSByZWYkMi5iZWFyaW5nO1xuXG4gICAgdmFyIHRyYW5zZm9ybSA9IGNsb25lVHJhbnNmb3JtKHRoaXMuX21hcC50cmFuc2Zvcm0pO1xuICAgIHRyYW5zZm9ybS5iZWFyaW5nID0gYmVhcmluZztcbiAgICB0cmFuc2Zvcm0ucGl0Y2ggPSBwaXRjaDtcblxuICAgIHRoaXMuX2NhbGxPbkNoYW5nZVZpZXdwb3J0KHRyYW5zZm9ybSwge2lzRHJhZ2dpbmc6IHRydWV9KTtcbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuX29uTW91c2VNb3ZlID0gZnVuY3Rpb24gX29uTW91c2VNb3ZlIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcblxuICAgIGlmICghdGhpcy5wcm9wcy5vbkhvdmVyRmVhdHVyZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGZlYXR1cmVzID0gdGhpcy5fbWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KCBQb2ludCwgWyBudWxsIF0uY29uY2F0KCBwb3MpICkpLCB0aGlzLl9xdWVyeVBhcmFtcyk7XG4gICAgaWYgKCFmZWF0dXJlcy5sZW5ndGggJiYgdGhpcy5wcm9wcy5pZ25vcmVFbXB0eUZlYXR1cmVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe2lzSG92ZXJpbmc6IGZlYXR1cmVzLmxlbmd0aCA+IDB9KTtcbiAgICB0aGlzLnByb3BzLm9uSG92ZXJGZWF0dXJlcyhmZWF0dXJlcyk7XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLl9vbk1vdXNlVXAgPSBmdW5jdGlvbiBfb25Nb3VzZVVwIChvcHQpIHtcbiAgICB0aGlzLl9jYWxsT25DaGFuZ2VWaWV3cG9ydCh0aGlzLl9tYXAudHJhbnNmb3JtLCB7XG4gICAgICBpc0RyYWdnaW5nOiBmYWxzZSxcbiAgICAgIHN0YXJ0RHJhZ0xuZ0xhdDogbnVsbCxcbiAgICAgIHN0YXJ0QmVhcmluZzogbnVsbCxcbiAgICAgIHN0YXJ0UGl0Y2g6IG51bGxcbiAgICB9KTtcbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuX29uTW91c2VDbGljayA9IGZ1bmN0aW9uIF9vbk1vdXNlQ2xpY2sgKHJlZikge1xuICAgIHZhciBwb3MgPSByZWYucG9zO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm9uQ2xpY2tGZWF0dXJlcyAmJiAhdGhpcy5wcm9wcy5vbkNsaWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMub25DbGljaykge1xuICAgICAgdmFyIHBvaW50ID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseSggUG9pbnQsIFsgbnVsbCBdLmNvbmNhdCggcG9zKSApKTtcbiAgICAgIHZhciBsYXRMb25nID0gdGhpcy5fbWFwLnVucHJvamVjdChwb2ludCk7XG4gICAgICAvLyBUT0RPIC0gRG8gd2UgcmVhbGx5IHdhbnQgdG8gZXhwb3NlIGEgbWFwYm94IFwiUG9pbnRcIiBpbiBvdXIgaW50ZXJmYWNlP1xuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGxhdExvbmcsIHBvaW50KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNsaWNrRmVhdHVyZXMpIHtcbiAgICAgIC8vIFJhZGl1cyBlbmFibGVzIHBvaW50IGZlYXR1cmVzLCBsaWtlIG1hcmtlciBzeW1ib2xzLCB0byBiZSBjbGlja2VkLlxuICAgICAgdmFyIHNpemUgPSB0aGlzLnByb3BzLmNsaWNrUmFkaXVzO1xuICAgICAgdmFyIGJib3ggPSBbW3Bvc1swXSAtIHNpemUsIHBvc1sxXSAtIHNpemVdLCBbcG9zWzBdICsgc2l6ZSwgcG9zWzFdICsgc2l6ZV1dO1xuICAgICAgdmFyIGZlYXR1cmVzID0gdGhpcy5fbWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhiYm94LCB0aGlzLl9xdWVyeVBhcmFtcyk7XG4gICAgICBpZiAoIWZlYXR1cmVzLmxlbmd0aCAmJiB0aGlzLnByb3BzLmlnbm9yZUVtcHR5RmVhdHVyZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrRmVhdHVyZXMoZmVhdHVyZXMpO1xuICAgIH1cbiAgfTtcblxuICBNYXBHTC5wcm90b3R5cGUuX29uWm9vbSA9IGZ1bmN0aW9uIF9vblpvb20gKHJlZikge1xuICAgIHZhciBwb3MgPSByZWYucG9zO1xuICAgIHZhciBzY2FsZSA9IHJlZi5zY2FsZTtcblxuICAgIHZhciBwb2ludCA9IG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoIFBvaW50LCBbIG51bGwgXS5jb25jYXQoIHBvcykgKSk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IGNsb25lVHJhbnNmb3JtKHRoaXMuX21hcC50cmFuc2Zvcm0pO1xuICAgIHZhciBhcm91bmQgPSB1bnByb2plY3RGcm9tVHJhbnNmb3JtKHRyYW5zZm9ybSwgcG9pbnQpO1xuICAgIHRyYW5zZm9ybS56b29tID0gdHJhbnNmb3JtLnNjYWxlWm9vbSh0aGlzLl9tYXAudHJhbnNmb3JtLnNjYWxlICogc2NhbGUpO1xuICAgIHRyYW5zZm9ybS5zZXRMb2NhdGlvbkF0UG9pbnQoYXJvdW5kLCBwb2ludCk7XG4gICAgdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQodHJhbnNmb3JtLCB7aXNEcmFnZ2luZzogdHJ1ZX0pO1xuICB9O1xuXG4gIE1hcEdMLnByb3RvdHlwZS5fb25ab29tRW5kID0gZnVuY3Rpb24gX29uWm9vbUVuZCAoKSB7XG4gICAgdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQodGhpcy5fbWFwLnRyYW5zZm9ybSwge2lzRHJhZ2dpbmc6IGZhbHNlfSk7XG4gIH07XG5cbiAgTWFwR0wucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHJlZi5jbGFzc05hbWU7XG4gICAgdmFyIHdpZHRoID0gcmVmLndpZHRoO1xuICAgIHZhciBoZWlnaHQgPSByZWYuaGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IHJlZi5zdHlsZTtcbiAgICB2YXIgbWFwU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZSwge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsIGN1cnNvcjogdGhpcy5fZ2V0Q3Vyc29yKCl9KTtcblxuICAgIHZhciBjb250ZW50ID0gW1xuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCggJ2RpdicsIHsga2V5OiBcIm1hcFwiLCByZWY6IFwibWFwYm94TWFwXCIsIHN0eWxlOiBtYXBTdHlsZSwgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSksXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnZGl2JywgeyBrZXk6IFwib3ZlcmxheXNcIiwgY2xhc3NOYW1lOiBcIm92ZXJsYXlzXCIsIHN0eWxlOiB7cG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogMH0gfSxcbiAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgKVxuICAgIF07XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5pc1N1cHBvcnRlZCAmJiB0aGlzLnByb3BzLm9uQ2hhbmdlVmlld3BvcnQpIHtcbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoIE1hcEludGVyYWN0aW9ucywge1xuICAgICAgICAgIG9uTW91c2VEb3duOiB0aGlzLl9vbk1vdXNlRG93biwgb25Nb3VzZURyYWc6IHRoaXMuX29uTW91c2VEcmFnLCBvbk1vdXNlUm90YXRlOiB0aGlzLl9vbk1vdXNlUm90YXRlLCBvbk1vdXNlVXA6IHRoaXMuX29uTW91c2VVcCwgb25Nb3VzZU1vdmU6IHRoaXMuX29uTW91c2VNb3ZlLCBvbk1vdXNlQ2xpY2s6IHRoaXMuX29uTW91c2VDbGljaywgb25Ub3VjaFN0YXJ0OiB0aGlzLl9vblRvdWNoU3RhcnQsIG9uVG91Y2hEcmFnOiB0aGlzLl9vblRvdWNoRHJhZywgb25Ub3VjaFJvdGF0ZTogdGhpcy5fb25Ub3VjaFJvdGF0ZSwgb25Ub3VjaEVuZDogdGhpcy5fb25Ub3VjaEVuZCwgb25Ub3VjaFRhcDogdGhpcy5fb25Ub3VjaFRhcCwgb25ab29tOiB0aGlzLl9vblpvb20sIG9uWm9vbUVuZDogdGhpcy5fb25ab29tRW5kLCB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCwgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodCB9LFxuXG4gICAgICAgICAgY29udGVudFxuXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7IHN0eWxlOiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzLnN0eWxlLCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgcG9zaXRpb246ICdyZWxhdGl2ZSd9KSB9LFxuXG4gICAgICAgIGNvbnRlbnRcblxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIE1hcEdMO1xufShDb21wb25lbnQpKTtcblxuZXhwb3J0IGRlZmF1bHQgTWFwR0w7XG5cbk1hcEdMLmRpc3BsYXlOYW1lID0gJ01hcEdMJztcbk1hcEdMLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbk1hcEdMLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9jb21wb25lbnRzL21hcC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){eval("/* WEBPACK VAR INJECTION */(function(global) {var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = __webpack_require__(/*! min-document */ 46);\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../webpack/buildin/global.js */ 20)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2dsb2JhbC9kb2N1bWVudC5qcz9jYzk2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB0b3BMZXZlbCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHt9XG52YXIgbWluRG9jID0gcmVxdWlyZSgnbWluLWRvY3VtZW50Jyk7XG5cbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBkb2N1bWVudDtcbn0gZWxzZSB7XG4gICAgdmFyIGRvY2N5ID0gdG9wTGV2ZWxbJ19fR0xPQkFMX0RPQ1VNRU5UX0NBQ0hFQDQnXTtcblxuICAgIGlmICghZG9jY3kpIHtcbiAgICAgICAgZG9jY3kgPSB0b3BMZXZlbFsnX19HTE9CQUxfRE9DVU1FTlRfQ0FDSEVANCddID0gbWluRG9jO1xuICAgIH1cblxuICAgIG1vZHVsZS5leHBvcnRzID0gZG9jY3k7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZ2xvYmFsL2RvY3VtZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){"use strict";eval("\n//      \n\n/**\n * A coordinate is a column, row, zoom combination, often used\n * as the data component of a tile.\n *\n * @param {number} column\n * @param {number} row\n * @param {number} zoom\n * @private\n */\nclass Coordinate {\n                   \n                \n                 \n    constructor(column        , row        , zoom        ) {\n        this.column = column;\n        this.row = row;\n        this.zoom = zoom;\n    }\n\n    /**\n     * Create a clone of this coordinate that can be mutated without\n     * changing the original coordinate\n     *\n     * @returns {Coordinate} clone\n     * @private\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.clone();\n     * // since coord is cloned, modifying a property of c2 does\n     * // not modify it.\n     * c2.zoom = 2;\n     */\n    clone() {\n        return new Coordinate(this.column, this.row, this.zoom);\n    }\n\n    /**\n     * Zoom this coordinate to a given zoom level. This returns a new\n     * coordinate object, not mutating the old one.\n     *\n     * @param {number} zoom\n     * @returns {Coordinate} zoomed coordinate\n     * @private\n     * @example\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.zoomTo(1);\n     * c2 // equals new Coordinate(0, 0, 1);\n     */\n    zoomTo(zoom        ) { return this.clone()._zoomTo(zoom); }\n\n    /**\n     * Subtract the column and row values of this coordinate from those\n     * of another coordinate. The other coordinat will be zoomed to the\n     * same level as `this` before the subtraction occurs\n     *\n     * @param {Coordinate} c other coordinate\n     * @returns {Coordinate} result\n     * @private\n     */\n    sub(c            ) { return this.clone()._sub(c); }\n\n    _zoomTo(zoom        ) {\n        const scale = Math.pow(2, zoom - this.zoom);\n        this.column *= scale;\n        this.row *= scale;\n        this.zoom = zoom;\n        return this;\n    }\n\n    _sub(c            ) {\n        c = c.zoomTo(this.zoom);\n        this.column -= c.column;\n        this.row -= c.row;\n        return this;\n    }\n}\n\nmodule.exports = Coordinate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy9nZW8vY29vcmRpbmF0ZS5qcz9iMjQyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8vICAgICAgXG5cbi8qKlxuICogQSBjb29yZGluYXRlIGlzIGEgY29sdW1uLCByb3csIHpvb20gY29tYmluYXRpb24sIG9mdGVuIHVzZWRcbiAqIGFzIHRoZSBkYXRhIGNvbXBvbmVudCBvZiBhIHRpbGUuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICogQHBhcmFtIHtudW1iZXJ9IHpvb21cbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIENvb3JkaW5hdGUge1xuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICBcbiAgICBjb25zdHJ1Y3Rvcihjb2x1bW4gICAgICAgICwgcm93ICAgICAgICAsIHpvb20gICAgICAgICkge1xuICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgICAgICAgdGhpcy5yb3cgPSByb3c7XG4gICAgICAgIHRoaXMuem9vbSA9IHpvb207XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2xvbmUgb2YgdGhpcyBjb29yZGluYXRlIHRoYXQgY2FuIGJlIG11dGF0ZWQgd2l0aG91dFxuICAgICAqIGNoYW5naW5nIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Q29vcmRpbmF0ZX0gY2xvbmVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIHZhciBjb29yZCA9IG5ldyBDb29yZGluYXRlKDAsIDAsIDApO1xuICAgICAqIHZhciBjMiA9IGNvb3JkLmNsb25lKCk7XG4gICAgICogLy8gc2luY2UgY29vcmQgaXMgY2xvbmVkLCBtb2RpZnlpbmcgYSBwcm9wZXJ0eSBvZiBjMiBkb2VzXG4gICAgICogLy8gbm90IG1vZGlmeSBpdC5cbiAgICAgKiBjMi56b29tID0gMjtcbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKHRoaXMuY29sdW1uLCB0aGlzLnJvdywgdGhpcy56b29tKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBab29tIHRoaXMgY29vcmRpbmF0ZSB0byBhIGdpdmVuIHpvb20gbGV2ZWwuIFRoaXMgcmV0dXJucyBhIG5ld1xuICAgICAqIGNvb3JkaW5hdGUgb2JqZWN0LCBub3QgbXV0YXRpbmcgdGhlIG9sZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbVxuICAgICAqIEByZXR1cm5zIHtDb29yZGluYXRlfSB6b29tZWQgY29vcmRpbmF0ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiB2YXIgY29vcmQgPSBuZXcgQ29vcmRpbmF0ZSgwLCAwLCAwKTtcbiAgICAgKiB2YXIgYzIgPSBjb29yZC56b29tVG8oMSk7XG4gICAgICogYzIgLy8gZXF1YWxzIG5ldyBDb29yZGluYXRlKDAsIDAsIDEpO1xuICAgICAqL1xuICAgIHpvb21Ubyh6b29tICAgICAgICApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fem9vbVRvKHpvb20pOyB9XG5cbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCB0aGUgY29sdW1uIGFuZCByb3cgdmFsdWVzIG9mIHRoaXMgY29vcmRpbmF0ZSBmcm9tIHRob3NlXG4gICAgICogb2YgYW5vdGhlciBjb29yZGluYXRlLiBUaGUgb3RoZXIgY29vcmRpbmF0IHdpbGwgYmUgem9vbWVkIHRvIHRoZVxuICAgICAqIHNhbWUgbGV2ZWwgYXMgYHRoaXNgIGJlZm9yZSB0aGUgc3VidHJhY3Rpb24gb2NjdXJzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGMgb3RoZXIgY29vcmRpbmF0ZVxuICAgICAqIEByZXR1cm5zIHtDb29yZGluYXRlfSByZXN1bHRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN1YihjICAgICAgICAgICAgKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3N1YihjKTsgfVxuXG4gICAgX3pvb21Ubyh6b29tICAgICAgICApIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLnBvdygyLCB6b29tIC0gdGhpcy56b29tKTtcbiAgICAgICAgdGhpcy5jb2x1bW4gKj0gc2NhbGU7XG4gICAgICAgIHRoaXMucm93ICo9IHNjYWxlO1xuICAgICAgICB0aGlzLnpvb20gPSB6b29tO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBfc3ViKGMgICAgICAgICAgICApIHtcbiAgICAgICAgYyA9IGMuem9vbVRvKHRoaXMuem9vbSk7XG4gICAgICAgIHRoaXMuY29sdW1uIC09IGMuY29sdW1uO1xuICAgICAgICB0aGlzLnJvdyAtPSBjLnJvdztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvb3JkaW5hdGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFwYm94LWdsL2pzL2dlby9jb29yZGluYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_13__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJhc3NlcnRcIj8xZTQxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8xM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYXNzZXJ0XCJcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},,function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__ = __webpack_require__(/*! react-addons-shallow-compare */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_event_manager__ = __webpack_require__(/*! ../utils/event-manager */ 17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__(/*! ../config */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_transform__ = __webpack_require__(/*! ../utils/transform */ 9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_assert__ = __webpack_require__(/*! assert */ 13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_assert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_assert__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_viewport_mercator_project__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\n\n\n\n\n\n// import {WebMercatorViewport} from \'viewport-mercator-project\';\n\n// MAPBOX LIMITS\nvar MAX_PITCH = 60;\nvar MAX_ZOOM = 40;\n\n// EVENT HANDLING PARAMETERS\nvar PITCH_MOUSE_THRESHOLD = 20;\nvar PITCH_ACCEL = 1.2;\n\nvar propTypes = {\n  /** The width of the map */\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The height of the map */\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The latitude of the center of the map. */\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The longitude of the center of the map. */\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The tile zoom level of the map. */\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** Specify the bearing of the viewport */\n  bearing: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n  /** Specify the pitch of the viewport */\n  pitch: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n  /**\n    * Specify the altitude of the viewport camera\n    * Unit: map heights, default 1.5\n    * Non-public API, see https://github.com/mapbox/mapbox-gl-js/issues/1137\n    */\n  altitude: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n\n  /** Enables perspective control event handling */\n  perspectiveEnabled: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  /**\n    * `onChangeViewport` callback is fired when the user interacted with the\n    * map. The object passed to the callback contains `latitude`,\n    * `longitude` and `zoom` and additional state information.\n    */\n  onChangeViewport: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n  /**\n    * Is the component currently being dragged. This is used to show/hide the\n    * drag cursor. Also used as an optimization in some overlays by preventing\n    * rendering while dragging.\n    */\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  /**\n    * Required to calculate the mouse projection after the first click event\n    * during dragging. Where the map is depends on where you first clicked on\n    * the map.\n    */\n  startDragLngLat: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].arrayOf(__WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number),\n  /** Bearing when current perspective drag operation started */\n  startBearing: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n  /** Pitch when current perspective drag operation started */\n  startPitch: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n\n  /* Hooks to get mapbox help with calculations. TODO - replace with Viewport */\n  unproject: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  getLngLatAtPoint: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired\n};\n\nvar defaultProps = {\n  bearing: 0,\n  pitch: 0,\n  altitude: 1.5,\n  clickRadius: 15,\n  onChangeViewport: null,\n  maxZoom: MAX_ZOOM,\n  minZoom: 0,\n  maxPitch: MAX_PITCH,\n  minPitch: 0\n};\n\nvar MapControls = (function (Component) {\n  function MapControls(props) {\n    Component.call(this, props);\n    this.state = {\n      isDragging: false,\n      isHovering: false,\n      startDragLngLat: null,\n      startBearing: null,\n      startPitch: null\n    };\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_autobind__["a" /* default */])(this);\n  }\n\n  if ( Component ) MapControls.__proto__ = Component;\n  MapControls.prototype = Object.create( Component && Component.prototype );\n  MapControls.prototype.constructor = MapControls;\n\n  MapControls.prototype.componentDidMount = function componentDidMount () {\n    // Register event handlers on the canvas using the EventManager helper class\n    //\n    // Note that mouse move and click are handled directly by static-map\n    // onMouseMove={this._onMouseMove}\n    // onMouseClick={this._onMouseClick}\n\n    this._eventManager = new __WEBPACK_IMPORTED_MODULE_3__utils_event_manager__["a" /* default */](this.ref.canvas, {\n      onMouseDown: this._onMouseDown,\n      onMouseDrag: this._onMouseDrag,\n      onMouseRotate: this._onMouseRotate,\n      onMouseUp: this._onMouseUp,\n      onTouchStart: this._onTouchStart,\n      onTouchDrag: this._onTouchDrag,\n      onTouchRotate: this._onTouchRotate,\n      onTouchEnd: this._onTouchEnd,\n      onTouchTap: this._onTouchTap,\n      onZoom: this._onZoom,\n      onZoomEnd: this._onZoomEnd\n    });\n  };\n\n  // New props are comin\' round the corner!\n  MapControls.prototype.componentWillReceiveProps = function componentWillReceiveProps (newProps) {\n    var startDragLngLat = newProps.startDragLngLat;\n    this.setState({\n      startDragLngLat: startDragLngLat && startDragLngLat.slice()\n    });\n  };\n\n  // Pure render\n  MapControls.prototype.shouldComponentUpdate = function shouldComponentUpdate (nextProps, nextState) {\n    return __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default()(this, nextProps, nextState);\n  };\n\n  // Calculate a cursor style to show that we are in "dragging state"\n  MapControls.prototype._getCursor = function _getCursor () {\n    var isInteractive =\n      this.props.onChangeViewport ||\n      this.props.onClickFeature ||\n      this.props.onHoverFeatures;\n    if (isInteractive) {\n      return this.props.isDragging ?\n        __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].CURSOR.GRABBING :\n        (this.state.isHovering ? __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].CURSOR.POINTER : __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].CURSOR.GRAB);\n    }\n    return \'inherit\';\n  };\n\n  MapControls.prototype._updateViewport = function _updateViewport (opts) {\n    var viewport = Object.assign({}, {latitude: this.props.latitude,\n      longitude: this.props.longitude,\n      zoom: this.props.zoom,\n      bearing: this.props.bearing,\n      pitch: this.props.pitch,\n      altitude: this.props.altitude,\n      isDragging: this.props.isDragging,\n      startDragLngLat: this.props.startDragLngLat,\n      startBearing: this.props.startBearing,\n      startPitch: this.props.startPitch},\n      opts);\n\n    viewport = this._applyConstraints(viewport);\n\n    if (viewport.startDragLngLat) {\n      var dragViewport = __WEBPACK_IMPORTED_MODULE_7_viewport_mercator_project___default()(Object.assign({}, this.props,\n        {longitude: viewport.startDragLngLat[0],\n        latitude: viewport.startDragLngLat[1]}));\n      this.setState({dragViewport: dragViewport});\n    }\n\n    return this.props.onChangeViewport(viewport);\n  };\n\n  // Apply any constraints (mathematical or defined by props) to viewport params\n  MapControls.prototype._applyConstraints = function _applyConstraints (viewport) {\n    // Normalize degrees\n    viewport.longitude = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__utils_transform__["b" /* mod */])(viewport.longitude + 180, 360) - 180;\n    viewport.bearing = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__utils_transform__["b" /* mod */])(viewport.bearing + 180, 360) - 180;\n\n    // Ensure zoom is within specified range\n    var ref = this.props;\n    var maxZoom = ref.maxZoom;\n    var minZoom = ref.minZoom;\n    viewport.zoom = viewport.zoom > maxZoom ? maxZoom : viewport.zoom;\n    viewport.zoom = viewport.zoom < minZoom ? minZoom : viewport.zoom;\n\n    // Ensure pitch is within specified range\n    var ref$1 = this.props;\n    var maxPitch = ref$1.maxPitch;\n    var minPitch = ref$1.minPitch;\n    viewport.pitch = viewport.pitch > maxPitch ? maxPitch : viewport.pitch;\n    viewport.pitch = viewport.pitch < minPitch ? minPitch : viewport.pitch;\n\n    return viewport;\n  };\n\n  // Calculate a new lnglat based on pixel dragging position\n  // TODO - We should have a mapbox-independent implementation of panning\n  // Panning calculation is currently done using an undocumented mapbox function\n  MapControls.prototype._calculateNewLngLat = function _calculateNewLngLat (ref) {\n    var startDragLngLat = ref.startDragLngLat;\n    var pos = ref.pos;\n    var startPos = ref.startPos;\n\n    return this.props.getLngLatAtPoint({lngLat: startDragLngLat, pos: pos});\n    // return this.state.dragViewport.unproject(pos);\n  };\n\n  // Calculates new zoom\n  MapControls.prototype._calculateNewZoom = function _calculateNewZoom (ref) {\n    var relativeScale = ref.relativeScale;\n\n    return this.props.zoom + Math.log2(relativeScale);\n  };\n\n  // Calculates a new pitch and bearing from a position (coming from an event)\n  MapControls.prototype._calculateNewPitchAndBearing = function _calculateNewPitchAndBearing (ref) {\n    var pos = ref.pos;\n    var startPos = ref.startPos;\n    var startBearing = ref.startBearing;\n    var startPitch = ref.startPitch;\n\n    var xDelta = pos[0] - startPos[0];\n    var yDelta = pos[1] - startPos[1];\n\n    var bearing = startBearing + 180 * xDelta / this.props.width;\n\n    var pitch = startPitch;\n    if (yDelta > 0) {\n      // Dragging downwards, gradually decrease pitch\n      if (Math.abs(this.props.height - startPos[1]) > PITCH_MOUSE_THRESHOLD) {\n        var scale = yDelta / (this.props.height - startPos[1]);\n        pitch = (1 - scale) * PITCH_ACCEL * startPitch;\n      }\n    } else if (yDelta < 0) {\n      // Dragging upwards, gradually increase pitch\n      if (startPos.y > PITCH_MOUSE_THRESHOLD) {\n        // Move from 0 to 1 as we drag upwards\n        var yScale = 1 - pos[1] / startPos[1];\n        // Gradually add until we hit max pitch\n        pitch = startPitch + yScale * (MAX_PITCH - startPitch);\n      }\n    }\n\n    // console.debug(startPitch, pitch);\n    return {\n      pitch: Math.max(Math.min(pitch, MAX_PITCH), 0),\n      bearing: bearing\n    };\n  };\n\n  MapControls.prototype._onTouchStart = function _onTouchStart (opts) {\n    this._onMouseDown(opts);\n  };\n\n  MapControls.prototype._onTouchDrag = function _onTouchDrag (opts) {\n    this._onMouseDrag(opts);\n  };\n\n  MapControls.prototype._onTouchRotate = function _onTouchRotate (opts) {\n    this._onMouseRotate(opts);\n  };\n\n  MapControls.prototype._onTouchEnd = function _onTouchEnd (opts) {\n    this._onMouseUp(opts);\n  };\n\n  MapControls.prototype._onTouchTap = function _onTouchTap (opts) {\n    this._onMouseClick(opts);\n  };\n\n  MapControls.prototype._onMouseDown = function _onMouseDown (ref) {\n    var pos = ref.pos;\n\n    this._updateViewport({\n      isDragging: true,\n      startDragLngLat: this.props.unproject(pos),\n      startBearing: this.props.bearing,\n      startPitch: this.props.pitch\n    });\n  };\n\n  MapControls.prototype._onMouseDrag = function _onMouseDrag (ref) {\n    var pos = ref.pos;\n\n    if (!this.props.onChangeViewport) {\n      return;\n    }\n\n    var ref$1 = this.state;\n    var startDragLngLat = ref$1.startDragLngLat;\n\n    // take the start lnglat and put it where the mouse is down.\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(startDragLngLat, \'`startDragLngLat` prop is required \' +\n      \'for mouse drag behavior to calculate where to position the map.\');\n\n    var ref$2 = this._calculateNewLngLat({\n      startDragLngLat: startDragLngLat,\n      pos: pos\n    });\n    var longitude = ref$2[0];\n    var latitude = ref$2[1];\n\n    this._updateViewport({\n      longitude: longitude,\n      latitude: latitude,\n      isDragging: true\n    });\n  };\n\n  MapControls.prototype._onMouseRotate = function _onMouseRotate (ref) {\n    var pos = ref.pos;\n    var startPos = ref.startPos;\n\n    if (!this.props.onChangeViewport || !this.props.perspectiveEnabled) {\n      return;\n    }\n\n    var ref$1 = this.props;\n    var startBearing = ref$1.startBearing;\n    var startPitch = ref$1.startPitch;\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(typeof startBearing === \'number\',\n      \'`startBearing` prop is required for mouse rotate behavior\');\n    __WEBPACK_IMPORTED_MODULE_6_assert___default()(typeof startPitch === \'number\',\n      \'`startPitch` prop is required for mouse rotate behavior\');\n\n    var ref$2 = this._calculateNewPitchAndBearing({\n      pos: pos,\n      startPos: startPos,\n      startBearing: startBearing,\n      startPitch: startPitch\n    });\n    var pitch = ref$2.pitch;\n    var bearing = ref$2.bearing;\n\n    this._updateViewport({\n      bearing: bearing,\n      pitch: pitch,\n      isDragging: true\n    });\n  };\n\n  MapControls.prototype._onMouseUp = function _onMouseUp (opt) {\n    this._updateViewport({\n      isDragging: false,\n      startDragLngLat: null,\n      startBearing: null,\n      startPitch: null\n    });\n  };\n\n  MapControls.prototype._onZoom = function _onZoom (ref) {\n    var pos = ref.pos;\n    var scale = ref.scale;\n\n    this._updateViewport({\n      zoom: this._calculateNewZoom({relativeScale: scale}),\n      isDragging: true\n    });\n  };\n\n  MapControls.prototype._onZoomEnd = function _onZoomEnd () {\n    this._updateViewport({isDragging: false});\n  };\n\n  MapControls.prototype.render = function render () {\n    var ref = this.props;\n    var className = ref.className;\n    var width = ref.width;\n    var height = ref.height;\n    var style = ref.style;\n    var mapEventLayerStyle = Object.assign({}, style,\n      {width: width,\n      height: height,\n      position: \'relative\',\n      cursor: this._getCursor()});\n\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { ref: "canvas", className: className, style: mapEventLayerStyle })\n    );\n  };\n\n  return MapControls;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = MapControls;\n\nMapControls.propTypes = propTypes;\nMapControls.propTypes = propTypes;\nMapControls.defaultProps = defaultProps;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2NvbXBvbmVudHMvbWFwLWNvbnRyb2xzLmpzP2NmNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cbmltcG9ydCBSZWFjdCwge1Byb3BUeXBlcywgQ29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2hhbGxvd0NvbXBhcmUgZnJvbSAncmVhY3QtYWRkb25zLXNoYWxsb3ctY29tcGFyZSc7XG5pbXBvcnQgYXV0b2JpbmQgZnJvbSAnLi4vdXRpbHMvYXV0b2JpbmQnO1xuaW1wb3J0IEV2ZW50TWFuYWdlciBmcm9tICcuLi91dGlscy9ldmVudC1tYW5hZ2VyJztcblxuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHttb2R9IGZyb20gJy4uL3V0aWxzL3RyYW5zZm9ybSc7XG5pbXBvcnQgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5cbmltcG9ydCBWaWV3cG9ydE1lcmNhdG9yUHJvamVjdCBmcm9tICd2aWV3cG9ydC1tZXJjYXRvci1wcm9qZWN0Jztcbi8vIGltcG9ydCB7V2ViTWVyY2F0b3JWaWV3cG9ydH0gZnJvbSAndmlld3BvcnQtbWVyY2F0b3ItcHJvamVjdCc7XG5cbi8vIE1BUEJPWCBMSU1JVFNcbnZhciBNQVhfUElUQ0ggPSA2MDtcbnZhciBNQVhfWk9PTSA9IDQwO1xuXG4vLyBFVkVOVCBIQU5ETElORyBQQVJBTUVURVJTXG52YXIgUElUQ0hfTU9VU0VfVEhSRVNIT0xEID0gMjA7XG52YXIgUElUQ0hfQUNDRUwgPSAxLjI7XG5cbnZhciBwcm9wVHlwZXMgPSB7XG4gIC8qKiBUaGUgd2lkdGggb2YgdGhlIG1hcCAqL1xuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAvKiogVGhlIGhlaWdodCBvZiB0aGUgbWFwICovXG4gIGhlaWdodDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAvKiogVGhlIGxhdGl0dWRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIG1hcC4gKi9cbiAgbGF0aXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqIFRoZSBsb25naXR1ZGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgbWFwLiAqL1xuICBsb25naXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqIFRoZSB0aWxlIHpvb20gbGV2ZWwgb2YgdGhlIG1hcC4gKi9cbiAgem9vbTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAvKiogU3BlY2lmeSB0aGUgYmVhcmluZyBvZiB0aGUgdmlld3BvcnQgKi9cbiAgYmVhcmluZzogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgLyoqIFNwZWNpZnkgdGhlIHBpdGNoIG9mIHRoZSB2aWV3cG9ydCAqL1xuICBwaXRjaDogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgLyoqXG4gICAgKiBTcGVjaWZ5IHRoZSBhbHRpdHVkZSBvZiB0aGUgdmlld3BvcnQgY2FtZXJhXG4gICAgKiBVbml0OiBtYXAgaGVpZ2h0cywgZGVmYXVsdCAxLjVcbiAgICAqIE5vbi1wdWJsaWMgQVBJLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvaXNzdWVzLzExMzdcbiAgICAqL1xuICBhbHRpdHVkZTogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcblxuICAvKiogRW5hYmxlcyBwZXJzcGVjdGl2ZSBjb250cm9sIGV2ZW50IGhhbmRsaW5nICovXG4gIHBlcnNwZWN0aXZlRW5hYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gIC8qKlxuICAgICogYG9uQ2hhbmdlVmlld3BvcnRgIGNhbGxiYWNrIGlzIGZpcmVkIHdoZW4gdGhlIHVzZXIgaW50ZXJhY3RlZCB3aXRoIHRoZVxuICAgICogbWFwLiBUaGUgb2JqZWN0IHBhc3NlZCB0byB0aGUgY2FsbGJhY2sgY29udGFpbnMgYGxhdGl0dWRlYCxcbiAgICAqIGBsb25naXR1ZGVgIGFuZCBgem9vbWAgYW5kIGFkZGl0aW9uYWwgc3RhdGUgaW5mb3JtYXRpb24uXG4gICAgKi9cbiAgb25DaGFuZ2VWaWV3cG9ydDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAgKiBJcyB0aGUgY29tcG9uZW50IGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBUaGlzIGlzIHVzZWQgdG8gc2hvdy9oaWRlIHRoZVxuICAgICogZHJhZyBjdXJzb3IuIEFsc28gdXNlZCBhcyBhbiBvcHRpbWl6YXRpb24gaW4gc29tZSBvdmVybGF5cyBieSBwcmV2ZW50aW5nXG4gICAgKiByZW5kZXJpbmcgd2hpbGUgZHJhZ2dpbmcuXG4gICAgKi9cbiAgaXNEcmFnZ2luZzogUHJvcFR5cGVzLmJvb2wsXG4gIC8qKlxuICAgICogUmVxdWlyZWQgdG8gY2FsY3VsYXRlIHRoZSBtb3VzZSBwcm9qZWN0aW9uIGFmdGVyIHRoZSBmaXJzdCBjbGljayBldmVudFxuICAgICogZHVyaW5nIGRyYWdnaW5nLiBXaGVyZSB0aGUgbWFwIGlzIGRlcGVuZHMgb24gd2hlcmUgeW91IGZpcnN0IGNsaWNrZWQgb25cbiAgICAqIHRoZSBtYXAuXG4gICAgKi9cbiAgc3RhcnREcmFnTG5nTGF0OiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbiAgLyoqIEJlYXJpbmcgd2hlbiBjdXJyZW50IHBlcnNwZWN0aXZlIGRyYWcgb3BlcmF0aW9uIHN0YXJ0ZWQgKi9cbiAgc3RhcnRCZWFyaW5nOiBQcm9wVHlwZXMubnVtYmVyLFxuICAvKiogUGl0Y2ggd2hlbiBjdXJyZW50IHBlcnNwZWN0aXZlIGRyYWcgb3BlcmF0aW9uIHN0YXJ0ZWQgKi9cbiAgc3RhcnRQaXRjaDogUHJvcFR5cGVzLm51bWJlcixcblxuICAvKiBIb29rcyB0byBnZXQgbWFwYm94IGhlbHAgd2l0aCBjYWxjdWxhdGlvbnMuIFRPRE8gLSByZXBsYWNlIHdpdGggVmlld3BvcnQgKi9cbiAgdW5wcm9qZWN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBnZXRMbmdMYXRBdFBvaW50OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG59O1xuXG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBiZWFyaW5nOiAwLFxuICBwaXRjaDogMCxcbiAgYWx0aXR1ZGU6IDEuNSxcbiAgY2xpY2tSYWRpdXM6IDE1LFxuICBvbkNoYW5nZVZpZXdwb3J0OiBudWxsLFxuICBtYXhab29tOiBNQVhfWk9PTSxcbiAgbWluWm9vbTogMCxcbiAgbWF4UGl0Y2g6IE1BWF9QSVRDSCxcbiAgbWluUGl0Y2g6IDBcbn07XG5cbnZhciBNYXBDb250cm9scyA9IChmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIE1hcENvbnRyb2xzKHByb3BzKSB7XG4gICAgQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc0RyYWdnaW5nOiBmYWxzZSxcbiAgICAgIGlzSG92ZXJpbmc6IGZhbHNlLFxuICAgICAgc3RhcnREcmFnTG5nTGF0OiBudWxsLFxuICAgICAgc3RhcnRCZWFyaW5nOiBudWxsLFxuICAgICAgc3RhcnRQaXRjaDogbnVsbFxuICAgIH07XG4gICAgYXV0b2JpbmQodGhpcyk7XG4gIH1cblxuICBpZiAoIENvbXBvbmVudCApIE1hcENvbnRyb2xzLl9fcHJvdG9fXyA9IENvbXBvbmVudDtcbiAgTWFwQ29udHJvbHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29tcG9uZW50ICYmIENvbXBvbmVudC5wcm90b3R5cGUgKTtcbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWFwQ29udHJvbHM7XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIG9uIHRoZSBjYW52YXMgdXNpbmcgdGhlIEV2ZW50TWFuYWdlciBoZWxwZXIgY2xhc3NcbiAgICAvL1xuICAgIC8vIE5vdGUgdGhhdCBtb3VzZSBtb3ZlIGFuZCBjbGljayBhcmUgaGFuZGxlZCBkaXJlY3RseSBieSBzdGF0aWMtbWFwXG4gICAgLy8gb25Nb3VzZU1vdmU9e3RoaXMuX29uTW91c2VNb3ZlfVxuICAgIC8vIG9uTW91c2VDbGljaz17dGhpcy5fb25Nb3VzZUNsaWNrfVxuXG4gICAgdGhpcy5fZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcih0aGlzLnJlZi5jYW52YXMsIHtcbiAgICAgIG9uTW91c2VEb3duOiB0aGlzLl9vbk1vdXNlRG93bixcbiAgICAgIG9uTW91c2VEcmFnOiB0aGlzLl9vbk1vdXNlRHJhZyxcbiAgICAgIG9uTW91c2VSb3RhdGU6IHRoaXMuX29uTW91c2VSb3RhdGUsXG4gICAgICBvbk1vdXNlVXA6IHRoaXMuX29uTW91c2VVcCxcbiAgICAgIG9uVG91Y2hTdGFydDogdGhpcy5fb25Ub3VjaFN0YXJ0LFxuICAgICAgb25Ub3VjaERyYWc6IHRoaXMuX29uVG91Y2hEcmFnLFxuICAgICAgb25Ub3VjaFJvdGF0ZTogdGhpcy5fb25Ub3VjaFJvdGF0ZSxcbiAgICAgIG9uVG91Y2hFbmQ6IHRoaXMuX29uVG91Y2hFbmQsXG4gICAgICBvblRvdWNoVGFwOiB0aGlzLl9vblRvdWNoVGFwLFxuICAgICAgb25ab29tOiB0aGlzLl9vblpvb20sXG4gICAgICBvblpvb21FbmQ6IHRoaXMuX29uWm9vbUVuZFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIE5ldyBwcm9wcyBhcmUgY29taW4nIHJvdW5kIHRoZSBjb3JuZXIhXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAobmV3UHJvcHMpIHtcbiAgICB2YXIgc3RhcnREcmFnTG5nTGF0ID0gbmV3UHJvcHMuc3RhcnREcmFnTG5nTGF0O1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc3RhcnREcmFnTG5nTGF0OiBzdGFydERyYWdMbmdMYXQgJiYgc3RhcnREcmFnTG5nTGF0LnNsaWNlKClcbiAgICB9KTtcbiAgfTtcblxuICAvLyBQdXJlIHJlbmRlclxuICBNYXBDb250cm9scy5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiBzaGFsbG93Q29tcGFyZSh0aGlzLCBuZXh0UHJvcHMsIG5leHRTdGF0ZSk7XG4gIH07XG5cbiAgLy8gQ2FsY3VsYXRlIGEgY3Vyc29yIHN0eWxlIHRvIHNob3cgdGhhdCB3ZSBhcmUgaW4gXCJkcmFnZ2luZyBzdGF0ZVwiXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fZ2V0Q3Vyc29yID0gZnVuY3Rpb24gX2dldEN1cnNvciAoKSB7XG4gICAgdmFyIGlzSW50ZXJhY3RpdmUgPVxuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZVZpZXdwb3J0IHx8XG4gICAgICB0aGlzLnByb3BzLm9uQ2xpY2tGZWF0dXJlIHx8XG4gICAgICB0aGlzLnByb3BzLm9uSG92ZXJGZWF0dXJlcztcbiAgICBpZiAoaXNJbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuaXNEcmFnZ2luZyA/XG4gICAgICAgIGNvbmZpZy5DVVJTT1IuR1JBQkJJTkcgOlxuICAgICAgICAodGhpcy5zdGF0ZS5pc0hvdmVyaW5nID8gY29uZmlnLkNVUlNPUi5QT0lOVEVSIDogY29uZmlnLkNVUlNPUi5HUkFCKTtcbiAgICB9XG4gICAgcmV0dXJuICdpbmhlcml0JztcbiAgfTtcblxuICBNYXBDb250cm9scy5wcm90b3R5cGUuX3VwZGF0ZVZpZXdwb3J0ID0gZnVuY3Rpb24gX3VwZGF0ZVZpZXdwb3J0IChvcHRzKSB7XG4gICAgdmFyIHZpZXdwb3J0ID0gT2JqZWN0LmFzc2lnbih7fSwge2xhdGl0dWRlOiB0aGlzLnByb3BzLmxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiB0aGlzLnByb3BzLmxvbmdpdHVkZSxcbiAgICAgIHpvb206IHRoaXMucHJvcHMuem9vbSxcbiAgICAgIGJlYXJpbmc6IHRoaXMucHJvcHMuYmVhcmluZyxcbiAgICAgIHBpdGNoOiB0aGlzLnByb3BzLnBpdGNoLFxuICAgICAgYWx0aXR1ZGU6IHRoaXMucHJvcHMuYWx0aXR1ZGUsXG4gICAgICBpc0RyYWdnaW5nOiB0aGlzLnByb3BzLmlzRHJhZ2dpbmcsXG4gICAgICBzdGFydERyYWdMbmdMYXQ6IHRoaXMucHJvcHMuc3RhcnREcmFnTG5nTGF0LFxuICAgICAgc3RhcnRCZWFyaW5nOiB0aGlzLnByb3BzLnN0YXJ0QmVhcmluZyxcbiAgICAgIHN0YXJ0UGl0Y2g6IHRoaXMucHJvcHMuc3RhcnRQaXRjaH0sXG4gICAgICBvcHRzKTtcblxuICAgIHZpZXdwb3J0ID0gdGhpcy5fYXBwbHlDb25zdHJhaW50cyh2aWV3cG9ydCk7XG5cbiAgICBpZiAodmlld3BvcnQuc3RhcnREcmFnTG5nTGF0KSB7XG4gICAgICB2YXIgZHJhZ1ZpZXdwb3J0ID0gVmlld3BvcnRNZXJjYXRvclByb2plY3QoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9wcyxcbiAgICAgICAge2xvbmdpdHVkZTogdmlld3BvcnQuc3RhcnREcmFnTG5nTGF0WzBdLFxuICAgICAgICBsYXRpdHVkZTogdmlld3BvcnQuc3RhcnREcmFnTG5nTGF0WzFdfSkpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7ZHJhZ1ZpZXdwb3J0OiBkcmFnVmlld3BvcnR9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5vbkNoYW5nZVZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgfTtcblxuICAvLyBBcHBseSBhbnkgY29uc3RyYWludHMgKG1hdGhlbWF0aWNhbCBvciBkZWZpbmVkIGJ5IHByb3BzKSB0byB2aWV3cG9ydCBwYXJhbXNcbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9hcHBseUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gX2FwcGx5Q29uc3RyYWludHMgKHZpZXdwb3J0KSB7XG4gICAgLy8gTm9ybWFsaXplIGRlZ3JlZXNcbiAgICB2aWV3cG9ydC5sb25naXR1ZGUgPSBtb2Qodmlld3BvcnQubG9uZ2l0dWRlICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIHZpZXdwb3J0LmJlYXJpbmcgPSBtb2Qodmlld3BvcnQuYmVhcmluZyArIDE4MCwgMzYwKSAtIDE4MDtcblxuICAgIC8vIEVuc3VyZSB6b29tIGlzIHdpdGhpbiBzcGVjaWZpZWQgcmFuZ2VcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgbWF4Wm9vbSA9IHJlZi5tYXhab29tO1xuICAgIHZhciBtaW5ab29tID0gcmVmLm1pblpvb207XG4gICAgdmlld3BvcnQuem9vbSA9IHZpZXdwb3J0Lnpvb20gPiBtYXhab29tID8gbWF4Wm9vbSA6IHZpZXdwb3J0Lnpvb207XG4gICAgdmlld3BvcnQuem9vbSA9IHZpZXdwb3J0Lnpvb20gPCBtaW5ab29tID8gbWluWm9vbSA6IHZpZXdwb3J0Lnpvb207XG5cbiAgICAvLyBFbnN1cmUgcGl0Y2ggaXMgd2l0aGluIHNwZWNpZmllZCByYW5nZVxuICAgIHZhciByZWYkMSA9IHRoaXMucHJvcHM7XG4gICAgdmFyIG1heFBpdGNoID0gcmVmJDEubWF4UGl0Y2g7XG4gICAgdmFyIG1pblBpdGNoID0gcmVmJDEubWluUGl0Y2g7XG4gICAgdmlld3BvcnQucGl0Y2ggPSB2aWV3cG9ydC5waXRjaCA+IG1heFBpdGNoID8gbWF4UGl0Y2ggOiB2aWV3cG9ydC5waXRjaDtcbiAgICB2aWV3cG9ydC5waXRjaCA9IHZpZXdwb3J0LnBpdGNoIDwgbWluUGl0Y2ggPyBtaW5QaXRjaCA6IHZpZXdwb3J0LnBpdGNoO1xuXG4gICAgcmV0dXJuIHZpZXdwb3J0O1xuICB9O1xuXG4gIC8vIENhbGN1bGF0ZSBhIG5ldyBsbmdsYXQgYmFzZWQgb24gcGl4ZWwgZHJhZ2dpbmcgcG9zaXRpb25cbiAgLy8gVE9ETyAtIFdlIHNob3VsZCBoYXZlIGEgbWFwYm94LWluZGVwZW5kZW50IGltcGxlbWVudGF0aW9uIG9mIHBhbm5pbmdcbiAgLy8gUGFubmluZyBjYWxjdWxhdGlvbiBpcyBjdXJyZW50bHkgZG9uZSB1c2luZyBhbiB1bmRvY3VtZW50ZWQgbWFwYm94IGZ1bmN0aW9uXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fY2FsY3VsYXRlTmV3TG5nTGF0ID0gZnVuY3Rpb24gX2NhbGN1bGF0ZU5ld0xuZ0xhdCAocmVmKSB7XG4gICAgdmFyIHN0YXJ0RHJhZ0xuZ0xhdCA9IHJlZi5zdGFydERyYWdMbmdMYXQ7XG4gICAgdmFyIHBvcyA9IHJlZi5wb3M7XG4gICAgdmFyIHN0YXJ0UG9zID0gcmVmLnN0YXJ0UG9zO1xuXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZ2V0TG5nTGF0QXRQb2ludCh7bG5nTGF0OiBzdGFydERyYWdMbmdMYXQsIHBvczogcG9zfSk7XG4gICAgLy8gcmV0dXJuIHRoaXMuc3RhdGUuZHJhZ1ZpZXdwb3J0LnVucHJvamVjdChwb3MpO1xuICB9O1xuXG4gIC8vIENhbGN1bGF0ZXMgbmV3IHpvb21cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9jYWxjdWxhdGVOZXdab29tID0gZnVuY3Rpb24gX2NhbGN1bGF0ZU5ld1pvb20gKHJlZikge1xuICAgIHZhciByZWxhdGl2ZVNjYWxlID0gcmVmLnJlbGF0aXZlU2NhbGU7XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy56b29tICsgTWF0aC5sb2cyKHJlbGF0aXZlU2NhbGUpO1xuICB9O1xuXG4gIC8vIENhbGN1bGF0ZXMgYSBuZXcgcGl0Y2ggYW5kIGJlYXJpbmcgZnJvbSBhIHBvc2l0aW9uIChjb21pbmcgZnJvbSBhbiBldmVudClcbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9jYWxjdWxhdGVOZXdQaXRjaEFuZEJlYXJpbmcgPSBmdW5jdGlvbiBfY2FsY3VsYXRlTmV3UGl0Y2hBbmRCZWFyaW5nIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcbiAgICB2YXIgc3RhcnRQb3MgPSByZWYuc3RhcnRQb3M7XG4gICAgdmFyIHN0YXJ0QmVhcmluZyA9IHJlZi5zdGFydEJlYXJpbmc7XG4gICAgdmFyIHN0YXJ0UGl0Y2ggPSByZWYuc3RhcnRQaXRjaDtcblxuICAgIHZhciB4RGVsdGEgPSBwb3NbMF0gLSBzdGFydFBvc1swXTtcbiAgICB2YXIgeURlbHRhID0gcG9zWzFdIC0gc3RhcnRQb3NbMV07XG5cbiAgICB2YXIgYmVhcmluZyA9IHN0YXJ0QmVhcmluZyArIDE4MCAqIHhEZWx0YSAvIHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICB2YXIgcGl0Y2ggPSBzdGFydFBpdGNoO1xuICAgIGlmICh5RGVsdGEgPiAwKSB7XG4gICAgICAvLyBEcmFnZ2luZyBkb3dud2FyZHMsIGdyYWR1YWxseSBkZWNyZWFzZSBwaXRjaFxuICAgICAgaWYgKE1hdGguYWJzKHRoaXMucHJvcHMuaGVpZ2h0IC0gc3RhcnRQb3NbMV0pID4gUElUQ0hfTU9VU0VfVEhSRVNIT0xEKSB7XG4gICAgICAgIHZhciBzY2FsZSA9IHlEZWx0YSAvICh0aGlzLnByb3BzLmhlaWdodCAtIHN0YXJ0UG9zWzFdKTtcbiAgICAgICAgcGl0Y2ggPSAoMSAtIHNjYWxlKSAqIFBJVENIX0FDQ0VMICogc3RhcnRQaXRjaDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHlEZWx0YSA8IDApIHtcbiAgICAgIC8vIERyYWdnaW5nIHVwd2FyZHMsIGdyYWR1YWxseSBpbmNyZWFzZSBwaXRjaFxuICAgICAgaWYgKHN0YXJ0UG9zLnkgPiBQSVRDSF9NT1VTRV9USFJFU0hPTEQpIHtcbiAgICAgICAgLy8gTW92ZSBmcm9tIDAgdG8gMSBhcyB3ZSBkcmFnIHVwd2FyZHNcbiAgICAgICAgdmFyIHlTY2FsZSA9IDEgLSBwb3NbMV0gLyBzdGFydFBvc1sxXTtcbiAgICAgICAgLy8gR3JhZHVhbGx5IGFkZCB1bnRpbCB3ZSBoaXQgbWF4IHBpdGNoXG4gICAgICAgIHBpdGNoID0gc3RhcnRQaXRjaCArIHlTY2FsZSAqIChNQVhfUElUQ0ggLSBzdGFydFBpdGNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmRlYnVnKHN0YXJ0UGl0Y2gsIHBpdGNoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcGl0Y2g6IE1hdGgubWF4KE1hdGgubWluKHBpdGNoLCBNQVhfUElUQ0gpLCAwKSxcbiAgICAgIGJlYXJpbmc6IGJlYXJpbmdcbiAgICB9O1xuICB9O1xuXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24gX29uVG91Y2hTdGFydCAob3B0cykge1xuICAgIHRoaXMuX29uTW91c2VEb3duKG9wdHMpO1xuICB9O1xuXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fb25Ub3VjaERyYWcgPSBmdW5jdGlvbiBfb25Ub3VjaERyYWcgKG9wdHMpIHtcbiAgICB0aGlzLl9vbk1vdXNlRHJhZyhvcHRzKTtcbiAgfTtcblxuICBNYXBDb250cm9scy5wcm90b3R5cGUuX29uVG91Y2hSb3RhdGUgPSBmdW5jdGlvbiBfb25Ub3VjaFJvdGF0ZSAob3B0cykge1xuICAgIHRoaXMuX29uTW91c2VSb3RhdGUob3B0cyk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9vblRvdWNoRW5kID0gZnVuY3Rpb24gX29uVG91Y2hFbmQgKG9wdHMpIHtcbiAgICB0aGlzLl9vbk1vdXNlVXAob3B0cyk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9vblRvdWNoVGFwID0gZnVuY3Rpb24gX29uVG91Y2hUYXAgKG9wdHMpIHtcbiAgICB0aGlzLl9vbk1vdXNlQ2xpY2sob3B0cyk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9vbk1vdXNlRG93biA9IGZ1bmN0aW9uIF9vbk1vdXNlRG93biAocmVmKSB7XG4gICAgdmFyIHBvcyA9IHJlZi5wb3M7XG5cbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydCh7XG4gICAgICBpc0RyYWdnaW5nOiB0cnVlLFxuICAgICAgc3RhcnREcmFnTG5nTGF0OiB0aGlzLnByb3BzLnVucHJvamVjdChwb3MpLFxuICAgICAgc3RhcnRCZWFyaW5nOiB0aGlzLnByb3BzLmJlYXJpbmcsXG4gICAgICBzdGFydFBpdGNoOiB0aGlzLnByb3BzLnBpdGNoXG4gICAgfSk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9vbk1vdXNlRHJhZyA9IGZ1bmN0aW9uIF9vbk1vdXNlRHJhZyAocmVmKSB7XG4gICAgdmFyIHBvcyA9IHJlZi5wb3M7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMub25DaGFuZ2VWaWV3cG9ydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByZWYkMSA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIHN0YXJ0RHJhZ0xuZ0xhdCA9IHJlZiQxLnN0YXJ0RHJhZ0xuZ0xhdDtcblxuICAgIC8vIHRha2UgdGhlIHN0YXJ0IGxuZ2xhdCBhbmQgcHV0IGl0IHdoZXJlIHRoZSBtb3VzZSBpcyBkb3duLlxuICAgIGFzc2VydChzdGFydERyYWdMbmdMYXQsICdgc3RhcnREcmFnTG5nTGF0YCBwcm9wIGlzIHJlcXVpcmVkICcgK1xuICAgICAgJ2ZvciBtb3VzZSBkcmFnIGJlaGF2aW9yIHRvIGNhbGN1bGF0ZSB3aGVyZSB0byBwb3NpdGlvbiB0aGUgbWFwLicpO1xuXG4gICAgdmFyIHJlZiQyID0gdGhpcy5fY2FsY3VsYXRlTmV3TG5nTGF0KHtcbiAgICAgIHN0YXJ0RHJhZ0xuZ0xhdDogc3RhcnREcmFnTG5nTGF0LFxuICAgICAgcG9zOiBwb3NcbiAgICB9KTtcbiAgICB2YXIgbG9uZ2l0dWRlID0gcmVmJDJbMF07XG4gICAgdmFyIGxhdGl0dWRlID0gcmVmJDJbMV07XG5cbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydCh7XG4gICAgICBsb25naXR1ZGU6IGxvbmdpdHVkZSxcbiAgICAgIGxhdGl0dWRlOiBsYXRpdHVkZSxcbiAgICAgIGlzRHJhZ2dpbmc6IHRydWVcbiAgICB9KTtcbiAgfTtcblxuICBNYXBDb250cm9scy5wcm90b3R5cGUuX29uTW91c2VSb3RhdGUgPSBmdW5jdGlvbiBfb25Nb3VzZVJvdGF0ZSAocmVmKSB7XG4gICAgdmFyIHBvcyA9IHJlZi5wb3M7XG4gICAgdmFyIHN0YXJ0UG9zID0gcmVmLnN0YXJ0UG9zO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm9uQ2hhbmdlVmlld3BvcnQgfHwgIXRoaXMucHJvcHMucGVyc3BlY3RpdmVFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZiQxID0gdGhpcy5wcm9wcztcbiAgICB2YXIgc3RhcnRCZWFyaW5nID0gcmVmJDEuc3RhcnRCZWFyaW5nO1xuICAgIHZhciBzdGFydFBpdGNoID0gcmVmJDEuc3RhcnRQaXRjaDtcbiAgICBhc3NlcnQodHlwZW9mIHN0YXJ0QmVhcmluZyA9PT0gJ251bWJlcicsXG4gICAgICAnYHN0YXJ0QmVhcmluZ2AgcHJvcCBpcyByZXF1aXJlZCBmb3IgbW91c2Ugcm90YXRlIGJlaGF2aW9yJyk7XG4gICAgYXNzZXJ0KHR5cGVvZiBzdGFydFBpdGNoID09PSAnbnVtYmVyJyxcbiAgICAgICdgc3RhcnRQaXRjaGAgcHJvcCBpcyByZXF1aXJlZCBmb3IgbW91c2Ugcm90YXRlIGJlaGF2aW9yJyk7XG5cbiAgICB2YXIgcmVmJDIgPSB0aGlzLl9jYWxjdWxhdGVOZXdQaXRjaEFuZEJlYXJpbmcoe1xuICAgICAgcG9zOiBwb3MsXG4gICAgICBzdGFydFBvczogc3RhcnRQb3MsXG4gICAgICBzdGFydEJlYXJpbmc6IHN0YXJ0QmVhcmluZyxcbiAgICAgIHN0YXJ0UGl0Y2g6IHN0YXJ0UGl0Y2hcbiAgICB9KTtcbiAgICB2YXIgcGl0Y2ggPSByZWYkMi5waXRjaDtcbiAgICB2YXIgYmVhcmluZyA9IHJlZiQyLmJlYXJpbmc7XG5cbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydCh7XG4gICAgICBiZWFyaW5nOiBiZWFyaW5nLFxuICAgICAgcGl0Y2g6IHBpdGNoLFxuICAgICAgaXNEcmFnZ2luZzogdHJ1ZVxuICAgIH0pO1xuICB9O1xuXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fb25Nb3VzZVVwID0gZnVuY3Rpb24gX29uTW91c2VVcCAob3B0KSB7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnQoe1xuICAgICAgaXNEcmFnZ2luZzogZmFsc2UsXG4gICAgICBzdGFydERyYWdMbmdMYXQ6IG51bGwsXG4gICAgICBzdGFydEJlYXJpbmc6IG51bGwsXG4gICAgICBzdGFydFBpdGNoOiBudWxsXG4gICAgfSk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLl9vblpvb20gPSBmdW5jdGlvbiBfb25ab29tIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcbiAgICB2YXIgc2NhbGUgPSByZWYuc2NhbGU7XG5cbiAgICB0aGlzLl91cGRhdGVWaWV3cG9ydCh7XG4gICAgICB6b29tOiB0aGlzLl9jYWxjdWxhdGVOZXdab29tKHtyZWxhdGl2ZVNjYWxlOiBzY2FsZX0pLFxuICAgICAgaXNEcmFnZ2luZzogdHJ1ZVxuICAgIH0pO1xuICB9O1xuXG4gIE1hcENvbnRyb2xzLnByb3RvdHlwZS5fb25ab29tRW5kID0gZnVuY3Rpb24gX29uWm9vbUVuZCAoKSB7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnQoe2lzRHJhZ2dpbmc6IGZhbHNlfSk7XG4gIH07XG5cbiAgTWFwQ29udHJvbHMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHJlZi5jbGFzc05hbWU7XG4gICAgdmFyIHdpZHRoID0gcmVmLndpZHRoO1xuICAgIHZhciBoZWlnaHQgPSByZWYuaGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IHJlZi5zdHlsZTtcbiAgICB2YXIgbWFwRXZlbnRMYXllclN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGUsXG4gICAgICB7d2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIGN1cnNvcjogdGhpcy5fZ2V0Q3Vyc29yKCl9KTtcblxuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnZGl2JywgeyByZWY6IFwiY2FudmFzXCIsIGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogbWFwRXZlbnRMYXllclN0eWxlIH0pXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gTWFwQ29udHJvbHM7XG59KENvbXBvbmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBNYXBDb250cm9scztcblxuTWFwQ29udHJvbHMucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuTWFwQ29udHJvbHMucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuTWFwQ29udHJvbHMuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kaXN0L2NvbXBvbmVudHMvbWFwLWNvbnRyb2xzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__ = __webpack_require__(/*! react-addons-shallow-compare */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_style_utils__ = __webpack_require__(/*! ../utils/style-utils */ 8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_diff_styles__ = __webpack_require__(/*! ../utils/diff-styles */ 18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__config__ = __webpack_require__(/*! ../config */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mapbox_gl__ = __webpack_require__(/*! mapbox-gl */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_mapbox_gl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d3_selection__ = __webpack_require__(/*! d3-selection */ 21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d3_selection___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_d3_selection__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_immutable__ = __webpack_require__(/*! immutable */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_immutable__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\n\n\n\n\n\n\n\nfunction noop() {}\n\nvar propTypes = {\n  /** Mapbox API access token for mapbox-gl-js. Required when using Mapbox vector tiles/styles. */\n  mapboxApiAccessToken: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string,\n  /** Mapbox WebGL context creation option. Useful when you want to export the canvas as a PNG. */\n  preserveDrawingBuffer: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  /** Show attribution control or not. */\n  attributionControl: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /** The Mapbox style. A string url or a MapboxGL style Immutable.Map object. */\n  mapStyle: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].oneOfType([\n    __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string,\n    __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].instanceOf(__WEBPACK_IMPORTED_MODULE_8_immutable___default.a.Map)\n  ]),\n  /** There are known issues with style diffing. As stopgap, add option to prevent style diffing. */\n  preventStyleDiffing: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n\n  /** The latitude of the center of the map. */\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The longitude of the center of the map. */\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The tile zoom level of the map. */\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** Specify the bearing of the viewport */\n  bearing: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n  /** Specify the pitch of the viewport */\n  pitch: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n  /** Altitude of the viewport camera. Default 1.5 "screen heights" */\n  // Note: Non-public API, see https://github.com/mapbox/mapbox-gl-js/issues/1137\n  altitude: __WEBPACK_IMPORTED_MODULE_0_react___default.a.PropTypes.number,\n  /** The width of the map. */\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  /** The height of the map. */\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n\n  /**\n   * `onChangeViewport` callback is fired when the user interacted with the\n   * map. The object passed to the callback contains `latitude`,\n   * `longitude` and `zoom` and additional state information.\n   */\n  onChangeViewport: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n /**\n    * Called when a feature is hovered over. Uses Mapbox\'s\n    * queryRenderedFeatures API to find features under the pointer:\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`. See Mapbox\'s style spec\n    * https://www.mapbox.com/mapbox-gl-style-spec/#layer-interactive\n    * If no interactive layers are found (e.g. using Mapbox\'s default styles),\n    * will fall back to query all layers.\n    * @callback\n    * @param {array} features - The array of features the mouse is over.\n    */\n  onHoverFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n  /**\n    * Set to false to enable onHoverFeatures to be called regardless if\n    * there is an actual feature at x, y. This is useful to emulate\n    * "mouse-out" behaviors on features.\n    * Defaults to TRUE\n    */\n  ignoreEmptyFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  /**\n    * Called when a feature is clicked on. Uses Mapbox\'s\n    * queryRenderedFeatures API to find features under the pointer:\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`. See Mapbox\'s style spec\n    * https://www.mapbox.com/mapbox-gl-style-spec/#layer-interactive\n    * If no interactive layers are found (e.g. using Mapbox\'s default styles),\n    * will fall back to query all layers.\n    */\n  onClickFeatures: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n  /**\n   * Called when the map is clicked. The handler is called with the clicked\n   * coordinates (https://www.mapbox.com/mapbox-gl-js/api/#LngLat) and the\n   * screen coordinates (https://www.mapbox.com/mapbox-gl-js/api/#PointLike).\n   */\n  onClick: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n\n  /** Radius to detect features around a clicked point. Defaults to 15. */\n  clickRadius: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number\n};\n\nvar defaultProps = {\n  mapStyle: \'mapbox://styles/mapbox/light-v8\',\n  onChangeViewport: null,\n  mapboxApiAccessToken: __WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].DEFAULTS.MAPBOX_API_ACCESS_TOKEN,\n  preserveDrawingBuffer: false,\n  attributionControl: true,\n  ignoreEmptyFeatures: true,\n  bearing: 0,\n  pitch: 0,\n  altitude: 1.5,\n  clickRadius: 15\n};\n\nvar StaticMap = (function (Component) {\n  function StaticMap(props) {\n    Component.call(this, props);\n    this.state = {\n      isSupported: __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.supported(),\n      isDragging: false,\n      isHovering: false,\n      startDragLngLat: null,\n      startBearing: null,\n      startPitch: null\n    };\n    this._queryParams = {};\n    __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.accessToken = props.mapboxApiAccessToken;\n\n    if (!this.state.isSupported) {\n      this.componentDidMount = noop;\n      this.componentWillReceiveProps = noop;\n      this.componentDidUpdate = noop;\n    }\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_autobind__["a" /* default */])(this);\n  }\n\n  if ( Component ) StaticMap.__proto__ = Component;\n  StaticMap.prototype = Object.create( Component && Component.prototype );\n  StaticMap.prototype.constructor = StaticMap;\n\n  StaticMap.supported = function supported () {\n    return __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.supported();\n  };\n\n  StaticMap.prototype.componentDidMount = function componentDidMount () {\n    var mapStyle = __WEBPACK_IMPORTED_MODULE_8_immutable___default.a.Map.isMap(this.props.mapStyle) ?\n      this.props.mapStyle.toJS() :\n      this.props.mapStyle;\n    var map = new __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.Map({\n      container: this.refs.mapboxMap,\n      center: [this.props.longitude, this.props.latitude],\n      zoom: this.props.zoom,\n      pitch: this.props.pitch,\n      bearing: this.props.bearing,\n      style: mapStyle,\n      interactive: false,\n      preserveDrawingBuffer: this.props.preserveDrawingBuffer\n      // TODO?\n      // attributionControl: this.props.attributionControl\n    });\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7_d3_selection__["select"])(map.getCanvas()).style(\'outline\', \'none\');\n\n    this._map = map;\n    this._updateMapViewport({}, this.props);\n    // this._callOnChangeViewport(map.transform);\n    this._updateQueryParams(mapStyle);\n  };\n\n  // New props are comin\' round the corner!\n  StaticMap.prototype.componentWillReceiveProps = function componentWillReceiveProps (newProps) {\n    this._updateStateFromProps(this.props, newProps);\n    this._updateMapViewport(this.props, newProps);\n    this._updateMapStyle(this.props, newProps);\n    // Save width/height so that we can check them in componentDidUpdate\n    this.setState({\n      width: this.props.width,\n      height: this.props.height\n    });\n  };\n\n  // Pure render\n  StaticMap.prototype.shouldComponentUpdate = function shouldComponentUpdate (nextProps, nextState) {\n    return __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default()(this, nextProps, nextState);\n  };\n\n  StaticMap.prototype.componentDidUpdate = function componentDidUpdate () {\n    // map.resize() reads size from DOM, we need to call after render\n    this._updateMapSize(this.state, this.props);\n  };\n\n  StaticMap.prototype.componentWillUnmount = function componentWillUnmount () {\n    if (this._map) {\n      this._map.remove();\n    }\n  };\n\n  // External apps can access map this way\n  StaticMap.prototype._getMap = function _getMap () {\n    return this._map;\n  };\n\n  StaticMap.prototype._updateStateFromProps = function _updateStateFromProps (oldProps, newProps) {\n    __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.accessToken = newProps.mapboxApiAccessToken;\n    var startDragLngLat = newProps.startDragLngLat;\n    this.setState({\n      startDragLngLat: startDragLngLat && startDragLngLat.slice()\n    });\n  };\n\n  // Hover and click only query layers whose interactive property is true\n  // If no interactivity is specified, query all layers\n  StaticMap.prototype._updateQueryParams = function _updateQueryParams (mapStyle) {\n    var interactiveLayerIds = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__utils_style_utils__["a" /* getInteractiveLayerIds */])(mapStyle);\n    this._queryParams = interactiveLayerIds.length === 0 ? {} :\n      {layers: interactiveLayerIds};\n  };\n\n  // Update a source in the map style\n  StaticMap.prototype._updateSource = function _updateSource (map, update) {\n    var newSource = update.source.toJS();\n    if (newSource.type === \'geojson\') {\n      var oldSource = map.getSource(update.id);\n      if (oldSource.type === \'geojson\') {\n        // update data if no other GeoJSONSource options were changed\n        var oldOpts = oldSource.workerOptions;\n        if (\n          (newSource.maxzoom === undefined ||\n            newSource.maxzoom === oldOpts.geojsonVtOptions.maxZoom) &&\n          (newSource.buffer === undefined ||\n            newSource.buffer === oldOpts.geojsonVtOptions.buffer) &&\n          (newSource.tolerance === undefined ||\n            newSource.tolerance === oldOpts.geojsonVtOptions.tolerance) &&\n          (newSource.cluster === undefined ||\n            newSource.cluster === oldOpts.cluster) &&\n          (newSource.clusterRadius === undefined ||\n            newSource.clusterRadius === oldOpts.superclusterOptions.radius) &&\n          (newSource.clusterMaxZoom === undefined ||\n            newSource.clusterMaxZoom === oldOpts.superclusterOptions.maxZoom)\n        ) {\n          oldSource.setData(newSource.data);\n          return;\n        }\n      }\n    }\n\n    map.removeSource(update.id);\n    map.addSource(update.id, newSource);\n  };\n\n  // Individually update the maps source and layers that have changed if all\n  // other style props haven\'t changed. This prevents flicking of the map when\n  // styles only change sources or layers.\n  /* eslint-disable max-statements, complexity */\n  StaticMap.prototype._setDiffStyle = function _setDiffStyle (prevStyle, nextStyle) {\n    var this$1 = this;\n\n    var prevKeysMap = prevStyle && styleKeysMap(prevStyle) || {};\n    var nextKeysMap = styleKeysMap(nextStyle);\n    function styleKeysMap(style) {\n      return style.map(function () { return true; }).delete(\'layers\').delete(\'sources\').toJS();\n    }\n    function propsOtherThanLayersOrSourcesDiffer() {\n      var prevKeysList = Object.keys(prevKeysMap);\n      var nextKeysList = Object.keys(nextKeysMap);\n      if (prevKeysList.length !== nextKeysList.length) {\n        return true;\n      }\n      // `nextStyle` and `prevStyle` should not have the same set of props.\n      if (nextKeysList.some(\n        function (key) { return prevStyle.get(key) !== nextStyle.get(key); }\n        // But the value of one of those props is different.\n      )) {\n        return true;\n      }\n      return false;\n    }\n\n    var map = this._map;\n\n    if (!prevStyle || propsOtherThanLayersOrSourcesDiffer()) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    var ref = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__utils_diff_styles__["a" /* default */])(prevStyle, nextStyle);\n    var sourcesDiff = ref.sourcesDiff;\n    var layersDiff = ref.layersDiff;\n\n    // TODO: It\'s rather difficult to determine style diffing in the presence\n    // of refs. For now, if any style update has a ref, fallback to no diffing.\n    // We can come back to this case if there\'s a solid usecase.\n    if (layersDiff.updates.some(function (node) { return node.layer.get(\'ref\'); })) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    for (var i = 0, list = sourcesDiff.enter; i < list.length; i += 1) {\n      var enter = list[i];\n\n      map.addSource(enter.id, enter.source.toJS());\n    }\n    for (var i$1 = 0, list$1 = sourcesDiff.update; i$1 < list$1.length; i$1 += 1) {\n      var update = list$1[i$1];\n\n      this$1._updateSource(map, update);\n    }\n    for (var i$2 = 0, list$2 = sourcesDiff.exit; i$2 < list$2.length; i$2 += 1) {\n      var exit = list$2[i$2];\n\n      map.removeSource(exit.id);\n    }\n    for (var i$3 = 0, list$3 = layersDiff.exiting; i$3 < list$3.length; i$3 += 1) {\n      var exit$1 = list$3[i$3];\n\n      if (map.style.getLayer(exit$1.id)) {\n        map.removeLayer(exit$1.id);\n      }\n    }\n    for (var i$4 = 0, list$4 = layersDiff.updates; i$4 < list$4.length; i$4 += 1) {\n      var update$1 = list$4[i$4];\n\n      if (!update$1.enter) {\n        // This is an old layer that needs to be updated. Remove the old layer\n        // with the same id and add it back again.\n        map.removeLayer(update$1.id);\n      }\n      map.addLayer(update$1.layer.toJS(), update$1.before);\n    }\n  };\n  /* eslint-enable max-statements, complexity */\n\n  StaticMap.prototype._updateMapStyle = function _updateMapStyle (oldProps, newProps) {\n    var mapStyle = newProps.mapStyle;\n    var oldMapStyle = oldProps.mapStyle;\n    if (mapStyle !== oldMapStyle) {\n      if (__WEBPACK_IMPORTED_MODULE_8_immutable___default.a.Map.isMap(mapStyle)) {\n        if (this.props.preventStyleDiffing) {\n          this._map.setStyle(mapStyle.toJS());\n        } else {\n          this._setDiffStyle(oldMapStyle, mapStyle);\n        }\n      } else {\n        this._map.setStyle(mapStyle);\n      }\n      this._updateQueryParams(mapStyle);\n    }\n  };\n\n  StaticMap.prototype._updateMapViewport = function _updateMapViewport (oldProps, newProps) {\n    var viewportChanged =\n      newProps.latitude !== oldProps.latitude ||\n      newProps.longitude !== oldProps.longitude ||\n      newProps.zoom !== oldProps.zoom ||\n      newProps.pitch !== oldProps.pitch ||\n      newProps.zoom !== oldProps.bearing ||\n      newProps.altitude !== oldProps.altitude;\n\n    if (viewportChanged) {\n      this._map.jumpTo({\n        center: [newProps.longitude, newProps.latitude],\n        zoom: newProps.zoom,\n        bearing: newProps.bearing,\n        pitch: newProps.pitch\n      });\n\n      // TODO - jumpTo doesn\'t handle altitude\n      if (newProps.altitude !== oldProps.altitude) {\n        this._map.transform.altitude = newProps.altitude;\n      }\n    }\n  };\n\n  // Note: needs to be called after render (e.g. in componentDidUpdate)\n  StaticMap.prototype._updateMapSize = function _updateMapSize (oldProps, newProps) {\n    var sizeChanged =\n      oldProps.width !== newProps.width || oldProps.height !== newProps.height;\n\n    if (sizeChanged) {\n      this._map.resize();\n      // this._callOnChangeViewport(this._map.transform);\n    }\n  };\n\n  StaticMap.prototype._getFeatures = function _getFeatures (ref) {\n    var pos = ref.pos;\n    var radius = ref.radius;\n\n    var features;\n    if (radius) {\n      // Radius enables point features, like marker symbols, to be clicked.\n      var size = radius;\n      var bbox = [[pos[0] - size, pos[1] - size], [pos[0] + size, pos[1] + size]];\n      features = this._map.queryRenderedFeatures(bbox, this._queryParams);\n    } else {\n      var point = new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_6_mapbox_gl__["Point"], [ null ].concat( pos) ));\n      features = this._map.queryRenderedFeatures(point, this._queryParams);\n    }\n    return features;\n  };\n\n  // HOVER AND CLICK\n\n  StaticMap.prototype._onMouseMove = function _onMouseMove (ref) {\n    var pos = ref.pos;\n\n    if (this.props.onHover) {\n      var latLong = this.props.unproject(pos);\n      this.props.onHover(latLong, pos);\n    }\n    if (this.props.onHoverFeatures) {\n      var features = this._getFeatures({pos: pos});\n      if (!features.length && this.props.ignoreEmptyFeatures) {\n        return;\n      }\n      this.setState({isHovering: features.length > 0});\n      this.props.onHoverFeatures(features);\n    }\n  };\n\n  StaticMap.prototype._onMouseClick = function _onMouseClick (ref) {\n    var pos = ref.pos;\n\n    if (this.props.onClick) {\n      var latLong = this.props.unproject(pos);\n      // TODO - Do we really want to expose a mapbox "Point" in our interface?\n      // const point = new Point(...pos);\n      this.props.onClick(latLong, pos);\n    }\n\n    if (this.props.onClickFeatures) {\n      var features = this._getFeatures({pos: pos, radius: this.props.clickRadius});\n      if (!features.length && this.props.ignoreEmptyFeatures) {\n        return;\n      }\n      this.props.onClickFeatures(features);\n    }\n  };\n\n  StaticMap.prototype.render = function render () {\n    var ref = this.props;\n    var className = ref.className;\n    var width = ref.width;\n    var height = ref.height;\n    var style = ref.style;\n\n    var mapContainerStyle = Object.assign({}, style, {width: width, height: height, position: \'relative\'});\n    var mapStyle = Object.assign({}, style, {width: width, height: height});\n    var overlayContainerStyle = {position: \'absolute\', left: 0, top: 0};\n\n    // Note: a static map still handles clicks and hover events\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { style: mapContainerStyle, onMouseMove: this._onMouseMove, onMouseClick: this._onMouseClick },\n\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { key: "map", ref: "mapboxMap", style: mapStyle, className: className }),\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { key: "overlays", className: "overlays", style: overlayContainerStyle },\n          this.props.children\n        )\n\n      )\n    );\n  };\n\n  return StaticMap;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = StaticMap;\n\nStaticMap.displayName = \'StaticMap\';\nStaticMap.propTypes = propTypes;\nStaticMap.defaultProps = defaultProps;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2NvbXBvbmVudHMvc3RhdGljLW1hcC5qcz81ZmMxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNSBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5pbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXMsIENvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNoYWxsb3dDb21wYXJlIGZyb20gJ3JlYWN0LWFkZG9ucy1zaGFsbG93LWNvbXBhcmUnO1xuaW1wb3J0IGF1dG9iaW5kIGZyb20gJy4uL3V0aWxzL2F1dG9iaW5kJztcblxuaW1wb3J0IHtnZXRJbnRlcmFjdGl2ZUxheWVySWRzfSBmcm9tICcuLi91dGlscy9zdHlsZS11dGlscyc7XG5pbXBvcnQgZGlmZlN0eWxlcyBmcm9tICcuLi91dGlscy9kaWZmLXN0eWxlcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5cbmltcG9ydCBtYXBib3hnbCwge1BvaW50fSBmcm9tICdtYXBib3gtZ2wnO1xuaW1wb3J0IHtzZWxlY3R9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQgSW1tdXRhYmxlIGZyb20gJ2ltbXV0YWJsZSc7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICAvKiogTWFwYm94IEFQSSBhY2Nlc3MgdG9rZW4gZm9yIG1hcGJveC1nbC1qcy4gUmVxdWlyZWQgd2hlbiB1c2luZyBNYXBib3ggdmVjdG9yIHRpbGVzL3N0eWxlcy4gKi9cbiAgbWFwYm94QXBpQWNjZXNzVG9rZW46IFByb3BUeXBlcy5zdHJpbmcsXG4gIC8qKiBNYXBib3ggV2ViR0wgY29udGV4dCBjcmVhdGlvbiBvcHRpb24uIFVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGV4cG9ydCB0aGUgY2FudmFzIGFzIGEgUE5HLiAqL1xuICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IFByb3BUeXBlcy5ib29sLFxuICAvKiogU2hvdyBhdHRyaWJ1dGlvbiBjb250cm9sIG9yIG5vdC4gKi9cbiAgYXR0cmlidXRpb25Db250cm9sOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKiogVGhlIE1hcGJveCBzdHlsZS4gQSBzdHJpbmcgdXJsIG9yIGEgTWFwYm94R0wgc3R5bGUgSW1tdXRhYmxlLk1hcCBvYmplY3QuICovXG4gIG1hcFN0eWxlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIFByb3BUeXBlcy5pbnN0YW5jZU9mKEltbXV0YWJsZS5NYXApXG4gIF0pLFxuICAvKiogVGhlcmUgYXJlIGtub3duIGlzc3VlcyB3aXRoIHN0eWxlIGRpZmZpbmcuIEFzIHN0b3BnYXAsIGFkZCBvcHRpb24gdG8gcHJldmVudCBzdHlsZSBkaWZmaW5nLiAqL1xuICBwcmV2ZW50U3R5bGVEaWZmaW5nOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKiogVGhlIGxhdGl0dWRlIG9mIHRoZSBjZW50ZXIgb2YgdGhlIG1hcC4gKi9cbiAgbGF0aXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqIFRoZSBsb25naXR1ZGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgbWFwLiAqL1xuICBsb25naXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgLyoqIFRoZSB0aWxlIHpvb20gbGV2ZWwgb2YgdGhlIG1hcC4gKi9cbiAgem9vbTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAvKiogU3BlY2lmeSB0aGUgYmVhcmluZyBvZiB0aGUgdmlld3BvcnQgKi9cbiAgYmVhcmluZzogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgLyoqIFNwZWNpZnkgdGhlIHBpdGNoIG9mIHRoZSB2aWV3cG9ydCAqL1xuICBwaXRjaDogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgLyoqIEFsdGl0dWRlIG9mIHRoZSB2aWV3cG9ydCBjYW1lcmEuIERlZmF1bHQgMS41IFwic2NyZWVuIGhlaWdodHNcIiAqL1xuICAvLyBOb3RlOiBOb24tcHVibGljIEFQSSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy8xMTM3XG4gIGFsdGl0dWRlOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAvKiogVGhlIHdpZHRoIG9mIHRoZSBtYXAuICovXG4gIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBtYXAuICovXG4gIGhlaWdodDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuXG4gIC8qKlxuICAgKiBgb25DaGFuZ2VWaWV3cG9ydGAgY2FsbGJhY2sgaXMgZmlyZWQgd2hlbiB0aGUgdXNlciBpbnRlcmFjdGVkIHdpdGggdGhlXG4gICAqIG1hcC4gVGhlIG9iamVjdCBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrIGNvbnRhaW5zIGBsYXRpdHVkZWAsXG4gICAqIGBsb25naXR1ZGVgIGFuZCBgem9vbWAgYW5kIGFkZGl0aW9uYWwgc3RhdGUgaW5mb3JtYXRpb24uXG4gICAqL1xuICBvbkNoYW5nZVZpZXdwb3J0OiBQcm9wVHlwZXMuZnVuYyxcblxuIC8qKlxuICAgICogQ2FsbGVkIHdoZW4gYSBmZWF0dXJlIGlzIGhvdmVyZWQgb3Zlci4gVXNlcyBNYXBib3gnc1xuICAgICogcXVlcnlSZW5kZXJlZEZlYXR1cmVzIEFQSSB0byBmaW5kIGZlYXR1cmVzIHVuZGVyIHRoZSBwb2ludGVyOlxuICAgICogaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLyNNYXAjcXVlcnlSZW5kZXJlZEZlYXR1cmVzXG4gICAgKiBUbyBxdWVyeSBvbmx5IHNvbWUgb2YgdGhlIGxheWVycywgc2V0IHRoZSBgaW50ZXJhY3RpdmVgIHByb3BlcnR5IGluIHRoZVxuICAgICogbGF5ZXIgc3R5bGUgdG8gYHRydWVgLiBTZWUgTWFwYm94J3Mgc3R5bGUgc3BlY1xuICAgICogaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtc3R5bGUtc3BlYy8jbGF5ZXItaW50ZXJhY3RpdmVcbiAgICAqIElmIG5vIGludGVyYWN0aXZlIGxheWVycyBhcmUgZm91bmQgKGUuZy4gdXNpbmcgTWFwYm94J3MgZGVmYXVsdCBzdHlsZXMpLFxuICAgICogd2lsbCBmYWxsIGJhY2sgdG8gcXVlcnkgYWxsIGxheWVycy5cbiAgICAqIEBjYWxsYmFja1xuICAgICogQHBhcmFtIHthcnJheX0gZmVhdHVyZXMgLSBUaGUgYXJyYXkgb2YgZmVhdHVyZXMgdGhlIG1vdXNlIGlzIG92ZXIuXG4gICAgKi9cbiAgb25Ib3ZlckZlYXR1cmVzOiBQcm9wVHlwZXMuZnVuYyxcbiAgLyoqXG4gICAgKiBTZXQgdG8gZmFsc2UgdG8gZW5hYmxlIG9uSG92ZXJGZWF0dXJlcyB0byBiZSBjYWxsZWQgcmVnYXJkbGVzcyBpZlxuICAgICogdGhlcmUgaXMgYW4gYWN0dWFsIGZlYXR1cmUgYXQgeCwgeS4gVGhpcyBpcyB1c2VmdWwgdG8gZW11bGF0ZVxuICAgICogXCJtb3VzZS1vdXRcIiBiZWhhdmlvcnMgb24gZmVhdHVyZXMuXG4gICAgKiBEZWZhdWx0cyB0byBUUlVFXG4gICAgKi9cbiAgaWdub3JlRW1wdHlGZWF0dXJlczogUHJvcFR5cGVzLmJvb2wsXG4gIC8qKlxuICAgICogQ2FsbGVkIHdoZW4gYSBmZWF0dXJlIGlzIGNsaWNrZWQgb24uIFVzZXMgTWFwYm94J3NcbiAgICAqIHF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyBBUEkgdG8gZmluZCBmZWF0dXJlcyB1bmRlciB0aGUgcG9pbnRlcjpcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2FwaS8jTWFwI3F1ZXJ5UmVuZGVyZWRGZWF0dXJlc1xuICAgICogVG8gcXVlcnkgb25seSBzb21lIG9mIHRoZSBsYXllcnMsIHNldCB0aGUgYGludGVyYWN0aXZlYCBwcm9wZXJ0eSBpbiB0aGVcbiAgICAqIGxheWVyIHN0eWxlIHRvIGB0cnVlYC4gU2VlIE1hcGJveCdzIHN0eWxlIHNwZWNcbiAgICAqIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLXN0eWxlLXNwZWMvI2xheWVyLWludGVyYWN0aXZlXG4gICAgKiBJZiBubyBpbnRlcmFjdGl2ZSBsYXllcnMgYXJlIGZvdW5kIChlLmcuIHVzaW5nIE1hcGJveCdzIGRlZmF1bHQgc3R5bGVzKSxcbiAgICAqIHdpbGwgZmFsbCBiYWNrIHRvIHF1ZXJ5IGFsbCBsYXllcnMuXG4gICAgKi9cbiAgb25DbGlja0ZlYXR1cmVzOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIG1hcCBpcyBjbGlja2VkLiBUaGUgaGFuZGxlciBpcyBjYWxsZWQgd2l0aCB0aGUgY2xpY2tlZFxuICAgKiBjb29yZGluYXRlcyAoaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLyNMbmdMYXQpIGFuZCB0aGVcbiAgICogc2NyZWVuIGNvb3JkaW5hdGVzIChodHRwczovL3d3dy5tYXBib3guY29tL21hcGJveC1nbC1qcy9hcGkvI1BvaW50TGlrZSkuXG4gICAqL1xuICBvbkNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKiogUmFkaXVzIHRvIGRldGVjdCBmZWF0dXJlcyBhcm91bmQgYSBjbGlja2VkIHBvaW50LiBEZWZhdWx0cyB0byAxNS4gKi9cbiAgY2xpY2tSYWRpdXM6IFByb3BUeXBlcy5udW1iZXJcbn07XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIG1hcFN0eWxlOiAnbWFwYm94Oi8vc3R5bGVzL21hcGJveC9saWdodC12OCcsXG4gIG9uQ2hhbmdlVmlld3BvcnQ6IG51bGwsXG4gIG1hcGJveEFwaUFjY2Vzc1Rva2VuOiBjb25maWcuREVGQVVMVFMuTUFQQk9YX0FQSV9BQ0NFU1NfVE9LRU4sXG4gIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXG4gIGF0dHJpYnV0aW9uQ29udHJvbDogdHJ1ZSxcbiAgaWdub3JlRW1wdHlGZWF0dXJlczogdHJ1ZSxcbiAgYmVhcmluZzogMCxcbiAgcGl0Y2g6IDAsXG4gIGFsdGl0dWRlOiAxLjUsXG4gIGNsaWNrUmFkaXVzOiAxNVxufTtcblxudmFyIFN0YXRpY01hcCA9IChmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIFN0YXRpY01hcChwcm9wcykge1xuICAgIENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNTdXBwb3J0ZWQ6IG1hcGJveGdsLnN1cHBvcnRlZCgpLFxuICAgICAgaXNEcmFnZ2luZzogZmFsc2UsXG4gICAgICBpc0hvdmVyaW5nOiBmYWxzZSxcbiAgICAgIHN0YXJ0RHJhZ0xuZ0xhdDogbnVsbCxcbiAgICAgIHN0YXJ0QmVhcmluZzogbnVsbCxcbiAgICAgIHN0YXJ0UGl0Y2g6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuX3F1ZXJ5UGFyYW1zID0ge307XG4gICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBwcm9wcy5tYXBib3hBcGlBY2Nlc3NUb2tlbjtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5pc1N1cHBvcnRlZCkge1xuICAgICAgdGhpcy5jb21wb25lbnREaWRNb3VudCA9IG5vb3A7XG4gICAgICB0aGlzLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBub29wO1xuICAgICAgdGhpcy5jb21wb25lbnREaWRVcGRhdGUgPSBub29wO1xuICAgIH1cbiAgICBhdXRvYmluZCh0aGlzKTtcbiAgfVxuXG4gIGlmICggQ29tcG9uZW50ICkgU3RhdGljTWFwLl9fcHJvdG9fXyA9IENvbXBvbmVudDtcbiAgU3RhdGljTWFwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbXBvbmVudCAmJiBDb21wb25lbnQucHJvdG90eXBlICk7XG4gIFN0YXRpY01hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdGF0aWNNYXA7XG5cbiAgU3RhdGljTWFwLnN1cHBvcnRlZCA9IGZ1bmN0aW9uIHN1cHBvcnRlZCAoKSB7XG4gICAgcmV0dXJuIG1hcGJveGdsLnN1cHBvcnRlZCgpO1xuICB9O1xuXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdmFyIG1hcFN0eWxlID0gSW1tdXRhYmxlLk1hcC5pc01hcCh0aGlzLnByb3BzLm1hcFN0eWxlKSA/XG4gICAgICB0aGlzLnByb3BzLm1hcFN0eWxlLnRvSlMoKSA6XG4gICAgICB0aGlzLnByb3BzLm1hcFN0eWxlO1xuICAgIHZhciBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcbiAgICAgIGNvbnRhaW5lcjogdGhpcy5yZWZzLm1hcGJveE1hcCxcbiAgICAgIGNlbnRlcjogW3RoaXMucHJvcHMubG9uZ2l0dWRlLCB0aGlzLnByb3BzLmxhdGl0dWRlXSxcbiAgICAgIHpvb206IHRoaXMucHJvcHMuem9vbSxcbiAgICAgIHBpdGNoOiB0aGlzLnByb3BzLnBpdGNoLFxuICAgICAgYmVhcmluZzogdGhpcy5wcm9wcy5iZWFyaW5nLFxuICAgICAgc3R5bGU6IG1hcFN0eWxlLFxuICAgICAgaW50ZXJhY3RpdmU6IGZhbHNlLFxuICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0aGlzLnByb3BzLnByZXNlcnZlRHJhd2luZ0J1ZmZlclxuICAgICAgLy8gVE9ETz9cbiAgICAgIC8vIGF0dHJpYnV0aW9uQ29udHJvbDogdGhpcy5wcm9wcy5hdHRyaWJ1dGlvbkNvbnRyb2xcbiAgICB9KTtcblxuICAgIHNlbGVjdChtYXAuZ2V0Q2FudmFzKCkpLnN0eWxlKCdvdXRsaW5lJywgJ25vbmUnKTtcblxuICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICB0aGlzLl91cGRhdGVNYXBWaWV3cG9ydCh7fSwgdGhpcy5wcm9wcyk7XG4gICAgLy8gdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQobWFwLnRyYW5zZm9ybSk7XG4gICAgdGhpcy5fdXBkYXRlUXVlcnlQYXJhbXMobWFwU3R5bGUpO1xuICB9O1xuXG4gIC8vIE5ldyBwcm9wcyBhcmUgY29taW4nIHJvdW5kIHRoZSBjb3JuZXIhXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5ld1Byb3BzKSB7XG4gICAgdGhpcy5fdXBkYXRlU3RhdGVGcm9tUHJvcHModGhpcy5wcm9wcywgbmV3UHJvcHMpO1xuICAgIHRoaXMuX3VwZGF0ZU1hcFZpZXdwb3J0KHRoaXMucHJvcHMsIG5ld1Byb3BzKTtcbiAgICB0aGlzLl91cGRhdGVNYXBTdHlsZSh0aGlzLnByb3BzLCBuZXdQcm9wcyk7XG4gICAgLy8gU2F2ZSB3aWR0aC9oZWlnaHQgc28gdGhhdCB3ZSBjYW4gY2hlY2sgdGhlbSBpbiBjb21wb25lbnREaWRVcGRhdGVcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFB1cmUgcmVuZGVyXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiBzaGFsbG93Q29tcGFyZSh0aGlzLCBuZXh0UHJvcHMsIG5leHRTdGF0ZSk7XG4gIH07XG5cbiAgU3RhdGljTWFwLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUgKCkge1xuICAgIC8vIG1hcC5yZXNpemUoKSByZWFkcyBzaXplIGZyb20gRE9NLCB3ZSBuZWVkIHRvIGNhbGwgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5fdXBkYXRlTWFwU2l6ZSh0aGlzLnN0YXRlLCB0aGlzLnByb3BzKTtcbiAgfTtcblxuICBTdGF0aWNNYXAucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIGlmICh0aGlzLl9tYXApIHtcbiAgICAgIHRoaXMuX21hcC5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRXh0ZXJuYWwgYXBwcyBjYW4gYWNjZXNzIG1hcCB0aGlzIHdheVxuICBTdGF0aWNNYXAucHJvdG90eXBlLl9nZXRNYXAgPSBmdW5jdGlvbiBfZ2V0TWFwICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFwO1xuICB9O1xuXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX3VwZGF0ZVN0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gX3VwZGF0ZVN0YXRlRnJvbVByb3BzIChvbGRQcm9wcywgbmV3UHJvcHMpIHtcbiAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IG5ld1Byb3BzLm1hcGJveEFwaUFjY2Vzc1Rva2VuO1xuICAgIHZhciBzdGFydERyYWdMbmdMYXQgPSBuZXdQcm9wcy5zdGFydERyYWdMbmdMYXQ7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzdGFydERyYWdMbmdMYXQ6IHN0YXJ0RHJhZ0xuZ0xhdCAmJiBzdGFydERyYWdMbmdMYXQuc2xpY2UoKVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIEhvdmVyIGFuZCBjbGljayBvbmx5IHF1ZXJ5IGxheWVycyB3aG9zZSBpbnRlcmFjdGl2ZSBwcm9wZXJ0eSBpcyB0cnVlXG4gIC8vIElmIG5vIGludGVyYWN0aXZpdHkgaXMgc3BlY2lmaWVkLCBxdWVyeSBhbGwgbGF5ZXJzXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX3VwZGF0ZVF1ZXJ5UGFyYW1zID0gZnVuY3Rpb24gX3VwZGF0ZVF1ZXJ5UGFyYW1zIChtYXBTdHlsZSkge1xuICAgIHZhciBpbnRlcmFjdGl2ZUxheWVySWRzID0gZ2V0SW50ZXJhY3RpdmVMYXllcklkcyhtYXBTdHlsZSk7XG4gICAgdGhpcy5fcXVlcnlQYXJhbXMgPSBpbnRlcmFjdGl2ZUxheWVySWRzLmxlbmd0aCA9PT0gMCA/IHt9IDpcbiAgICAgIHtsYXllcnM6IGludGVyYWN0aXZlTGF5ZXJJZHN9O1xuICB9O1xuXG4gIC8vIFVwZGF0ZSBhIHNvdXJjZSBpbiB0aGUgbWFwIHN0eWxlXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX3VwZGF0ZVNvdXJjZSA9IGZ1bmN0aW9uIF91cGRhdGVTb3VyY2UgKG1hcCwgdXBkYXRlKSB7XG4gICAgdmFyIG5ld1NvdXJjZSA9IHVwZGF0ZS5zb3VyY2UudG9KUygpO1xuICAgIGlmIChuZXdTb3VyY2UudHlwZSA9PT0gJ2dlb2pzb24nKSB7XG4gICAgICB2YXIgb2xkU291cmNlID0gbWFwLmdldFNvdXJjZSh1cGRhdGUuaWQpO1xuICAgICAgaWYgKG9sZFNvdXJjZS50eXBlID09PSAnZ2VvanNvbicpIHtcbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgaWYgbm8gb3RoZXIgR2VvSlNPTlNvdXJjZSBvcHRpb25zIHdlcmUgY2hhbmdlZFxuICAgICAgICB2YXIgb2xkT3B0cyA9IG9sZFNvdXJjZS53b3JrZXJPcHRpb25zO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKG5ld1NvdXJjZS5tYXh6b29tID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG5ld1NvdXJjZS5tYXh6b29tID09PSBvbGRPcHRzLmdlb2pzb25WdE9wdGlvbnMubWF4Wm9vbSkgJiZcbiAgICAgICAgICAobmV3U291cmNlLmJ1ZmZlciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBuZXdTb3VyY2UuYnVmZmVyID09PSBvbGRPcHRzLmdlb2pzb25WdE9wdGlvbnMuYnVmZmVyKSAmJlxuICAgICAgICAgIChuZXdTb3VyY2UudG9sZXJhbmNlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG5ld1NvdXJjZS50b2xlcmFuY2UgPT09IG9sZE9wdHMuZ2VvanNvblZ0T3B0aW9ucy50b2xlcmFuY2UpICYmXG4gICAgICAgICAgKG5ld1NvdXJjZS5jbHVzdGVyID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG5ld1NvdXJjZS5jbHVzdGVyID09PSBvbGRPcHRzLmNsdXN0ZXIpICYmXG4gICAgICAgICAgKG5ld1NvdXJjZS5jbHVzdGVyUmFkaXVzID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG5ld1NvdXJjZS5jbHVzdGVyUmFkaXVzID09PSBvbGRPcHRzLnN1cGVyY2x1c3Rlck9wdGlvbnMucmFkaXVzKSAmJlxuICAgICAgICAgIChuZXdTb3VyY2UuY2x1c3Rlck1heFpvb20gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgbmV3U291cmNlLmNsdXN0ZXJNYXhab29tID09PSBvbGRPcHRzLnN1cGVyY2x1c3Rlck9wdGlvbnMubWF4Wm9vbSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgb2xkU291cmNlLnNldERhdGEobmV3U291cmNlLmRhdGEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIG1hcC5yZW1vdmVTb3VyY2UodXBkYXRlLmlkKTtcbiAgICBtYXAuYWRkU291cmNlKHVwZGF0ZS5pZCwgbmV3U291cmNlKTtcbiAgfTtcblxuICAvLyBJbmRpdmlkdWFsbHkgdXBkYXRlIHRoZSBtYXBzIHNvdXJjZSBhbmQgbGF5ZXJzIHRoYXQgaGF2ZSBjaGFuZ2VkIGlmIGFsbFxuICAvLyBvdGhlciBzdHlsZSBwcm9wcyBoYXZlbid0IGNoYW5nZWQuIFRoaXMgcHJldmVudHMgZmxpY2tpbmcgb2YgdGhlIG1hcCB3aGVuXG4gIC8vIHN0eWxlcyBvbmx5IGNoYW5nZSBzb3VyY2VzIG9yIGxheWVycy5cbiAgLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMsIGNvbXBsZXhpdHkgKi9cbiAgU3RhdGljTWFwLnByb3RvdHlwZS5fc2V0RGlmZlN0eWxlID0gZnVuY3Rpb24gX3NldERpZmZTdHlsZSAocHJldlN0eWxlLCBuZXh0U3R5bGUpIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBwcmV2S2V5c01hcCA9IHByZXZTdHlsZSAmJiBzdHlsZUtleXNNYXAocHJldlN0eWxlKSB8fCB7fTtcbiAgICB2YXIgbmV4dEtleXNNYXAgPSBzdHlsZUtleXNNYXAobmV4dFN0eWxlKTtcbiAgICBmdW5jdGlvbiBzdHlsZUtleXNNYXAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBzdHlsZS5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSkuZGVsZXRlKCdsYXllcnMnKS5kZWxldGUoJ3NvdXJjZXMnKS50b0pTKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByb3BzT3RoZXJUaGFuTGF5ZXJzT3JTb3VyY2VzRGlmZmVyKCkge1xuICAgICAgdmFyIHByZXZLZXlzTGlzdCA9IE9iamVjdC5rZXlzKHByZXZLZXlzTWFwKTtcbiAgICAgIHZhciBuZXh0S2V5c0xpc3QgPSBPYmplY3Qua2V5cyhuZXh0S2V5c01hcCk7XG4gICAgICBpZiAocHJldktleXNMaXN0Lmxlbmd0aCAhPT0gbmV4dEtleXNMaXN0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIGBuZXh0U3R5bGVgIGFuZCBgcHJldlN0eWxlYCBzaG91bGQgbm90IGhhdmUgdGhlIHNhbWUgc2V0IG9mIHByb3BzLlxuICAgICAgaWYgKG5leHRLZXlzTGlzdC5zb21lKFxuICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBwcmV2U3R5bGUuZ2V0KGtleSkgIT09IG5leHRTdHlsZS5nZXQoa2V5KTsgfVxuICAgICAgICAvLyBCdXQgdGhlIHZhbHVlIG9mIG9uZSBvZiB0aG9zZSBwcm9wcyBpcyBkaWZmZXJlbnQuXG4gICAgICApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSB0aGlzLl9tYXA7XG5cbiAgICBpZiAoIXByZXZTdHlsZSB8fCBwcm9wc090aGVyVGhhbkxheWVyc09yU291cmNlc0RpZmZlcigpKSB7XG4gICAgICBtYXAuc2V0U3R5bGUobmV4dFN0eWxlLnRvSlMoKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZiA9IGRpZmZTdHlsZXMocHJldlN0eWxlLCBuZXh0U3R5bGUpO1xuICAgIHZhciBzb3VyY2VzRGlmZiA9IHJlZi5zb3VyY2VzRGlmZjtcbiAgICB2YXIgbGF5ZXJzRGlmZiA9IHJlZi5sYXllcnNEaWZmO1xuXG4gICAgLy8gVE9ETzogSXQncyByYXRoZXIgZGlmZmljdWx0IHRvIGRldGVybWluZSBzdHlsZSBkaWZmaW5nIGluIHRoZSBwcmVzZW5jZVxuICAgIC8vIG9mIHJlZnMuIEZvciBub3csIGlmIGFueSBzdHlsZSB1cGRhdGUgaGFzIGEgcmVmLCBmYWxsYmFjayB0byBubyBkaWZmaW5nLlxuICAgIC8vIFdlIGNhbiBjb21lIGJhY2sgdG8gdGhpcyBjYXNlIGlmIHRoZXJlJ3MgYSBzb2xpZCB1c2VjYXNlLlxuICAgIGlmIChsYXllcnNEaWZmLnVwZGF0ZXMuc29tZShmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5sYXllci5nZXQoJ3JlZicpOyB9KSkge1xuICAgICAgbWFwLnNldFN0eWxlKG5leHRTdHlsZS50b0pTKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gc291cmNlc0RpZmYuZW50ZXI7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICB2YXIgZW50ZXIgPSBsaXN0W2ldO1xuXG4gICAgICBtYXAuYWRkU291cmNlKGVudGVyLmlkLCBlbnRlci5zb3VyY2UudG9KUygpKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSQxID0gMCwgbGlzdCQxID0gc291cmNlc0RpZmYudXBkYXRlOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkge1xuICAgICAgdmFyIHVwZGF0ZSA9IGxpc3QkMVtpJDFdO1xuXG4gICAgICB0aGlzJDEuX3VwZGF0ZVNvdXJjZShtYXAsIHVwZGF0ZSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkkMiA9IDAsIGxpc3QkMiA9IHNvdXJjZXNEaWZmLmV4aXQ7IGkkMiA8IGxpc3QkMi5sZW5ndGg7IGkkMiArPSAxKSB7XG4gICAgICB2YXIgZXhpdCA9IGxpc3QkMltpJDJdO1xuXG4gICAgICBtYXAucmVtb3ZlU291cmNlKGV4aXQuaWQpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpJDMgPSAwLCBsaXN0JDMgPSBsYXllcnNEaWZmLmV4aXRpbmc7IGkkMyA8IGxpc3QkMy5sZW5ndGg7IGkkMyArPSAxKSB7XG4gICAgICB2YXIgZXhpdCQxID0gbGlzdCQzW2kkM107XG5cbiAgICAgIGlmIChtYXAuc3R5bGUuZ2V0TGF5ZXIoZXhpdCQxLmlkKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIoZXhpdCQxLmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSQ0ID0gMCwgbGlzdCQ0ID0gbGF5ZXJzRGlmZi51cGRhdGVzOyBpJDQgPCBsaXN0JDQubGVuZ3RoOyBpJDQgKz0gMSkge1xuICAgICAgdmFyIHVwZGF0ZSQxID0gbGlzdCQ0W2kkNF07XG5cbiAgICAgIGlmICghdXBkYXRlJDEuZW50ZXIpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhbiBvbGQgbGF5ZXIgdGhhdCBuZWVkcyB0byBiZSB1cGRhdGVkLiBSZW1vdmUgdGhlIG9sZCBsYXllclxuICAgICAgICAvLyB3aXRoIHRoZSBzYW1lIGlkIGFuZCBhZGQgaXQgYmFjayBhZ2Fpbi5cbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKHVwZGF0ZSQxLmlkKTtcbiAgICAgIH1cbiAgICAgIG1hcC5hZGRMYXllcih1cGRhdGUkMS5sYXllci50b0pTKCksIHVwZGF0ZSQxLmJlZm9yZSk7XG4gICAgfVxuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzLCBjb21wbGV4aXR5ICovXG5cbiAgU3RhdGljTWFwLnByb3RvdHlwZS5fdXBkYXRlTWFwU3R5bGUgPSBmdW5jdGlvbiBfdXBkYXRlTWFwU3R5bGUgKG9sZFByb3BzLCBuZXdQcm9wcykge1xuICAgIHZhciBtYXBTdHlsZSA9IG5ld1Byb3BzLm1hcFN0eWxlO1xuICAgIHZhciBvbGRNYXBTdHlsZSA9IG9sZFByb3BzLm1hcFN0eWxlO1xuICAgIGlmIChtYXBTdHlsZSAhPT0gb2xkTWFwU3R5bGUpIHtcbiAgICAgIGlmIChJbW11dGFibGUuTWFwLmlzTWFwKG1hcFN0eWxlKSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5wcmV2ZW50U3R5bGVEaWZmaW5nKSB7XG4gICAgICAgICAgdGhpcy5fbWFwLnNldFN0eWxlKG1hcFN0eWxlLnRvSlMoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fc2V0RGlmZlN0eWxlKG9sZE1hcFN0eWxlLCBtYXBTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21hcC5zZXRTdHlsZShtYXBTdHlsZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl91cGRhdGVRdWVyeVBhcmFtcyhtYXBTdHlsZSk7XG4gICAgfVxuICB9O1xuXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX3VwZGF0ZU1hcFZpZXdwb3J0ID0gZnVuY3Rpb24gX3VwZGF0ZU1hcFZpZXdwb3J0IChvbGRQcm9wcywgbmV3UHJvcHMpIHtcbiAgICB2YXIgdmlld3BvcnRDaGFuZ2VkID1cbiAgICAgIG5ld1Byb3BzLmxhdGl0dWRlICE9PSBvbGRQcm9wcy5sYXRpdHVkZSB8fFxuICAgICAgbmV3UHJvcHMubG9uZ2l0dWRlICE9PSBvbGRQcm9wcy5sb25naXR1ZGUgfHxcbiAgICAgIG5ld1Byb3BzLnpvb20gIT09IG9sZFByb3BzLnpvb20gfHxcbiAgICAgIG5ld1Byb3BzLnBpdGNoICE9PSBvbGRQcm9wcy5waXRjaCB8fFxuICAgICAgbmV3UHJvcHMuem9vbSAhPT0gb2xkUHJvcHMuYmVhcmluZyB8fFxuICAgICAgbmV3UHJvcHMuYWx0aXR1ZGUgIT09IG9sZFByb3BzLmFsdGl0dWRlO1xuXG4gICAgaWYgKHZpZXdwb3J0Q2hhbmdlZCkge1xuICAgICAgdGhpcy5fbWFwLmp1bXBUbyh7XG4gICAgICAgIGNlbnRlcjogW25ld1Byb3BzLmxvbmdpdHVkZSwgbmV3UHJvcHMubGF0aXR1ZGVdLFxuICAgICAgICB6b29tOiBuZXdQcm9wcy56b29tLFxuICAgICAgICBiZWFyaW5nOiBuZXdQcm9wcy5iZWFyaW5nLFxuICAgICAgICBwaXRjaDogbmV3UHJvcHMucGl0Y2hcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUT0RPIC0ganVtcFRvIGRvZXNuJ3QgaGFuZGxlIGFsdGl0dWRlXG4gICAgICBpZiAobmV3UHJvcHMuYWx0aXR1ZGUgIT09IG9sZFByb3BzLmFsdGl0dWRlKSB7XG4gICAgICAgIHRoaXMuX21hcC50cmFuc2Zvcm0uYWx0aXR1ZGUgPSBuZXdQcm9wcy5hbHRpdHVkZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gTm90ZTogbmVlZHMgdG8gYmUgY2FsbGVkIGFmdGVyIHJlbmRlciAoZS5nLiBpbiBjb21wb25lbnREaWRVcGRhdGUpXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX3VwZGF0ZU1hcFNpemUgPSBmdW5jdGlvbiBfdXBkYXRlTWFwU2l6ZSAob2xkUHJvcHMsIG5ld1Byb3BzKSB7XG4gICAgdmFyIHNpemVDaGFuZ2VkID1cbiAgICAgIG9sZFByb3BzLndpZHRoICE9PSBuZXdQcm9wcy53aWR0aCB8fCBvbGRQcm9wcy5oZWlnaHQgIT09IG5ld1Byb3BzLmhlaWdodDtcblxuICAgIGlmIChzaXplQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fbWFwLnJlc2l6ZSgpO1xuICAgICAgLy8gdGhpcy5fY2FsbE9uQ2hhbmdlVmlld3BvcnQodGhpcy5fbWFwLnRyYW5zZm9ybSk7XG4gICAgfVxuICB9O1xuXG4gIFN0YXRpY01hcC5wcm90b3R5cGUuX2dldEZlYXR1cmVzID0gZnVuY3Rpb24gX2dldEZlYXR1cmVzIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcbiAgICB2YXIgcmFkaXVzID0gcmVmLnJhZGl1cztcblxuICAgIHZhciBmZWF0dXJlcztcbiAgICBpZiAocmFkaXVzKSB7XG4gICAgICAvLyBSYWRpdXMgZW5hYmxlcyBwb2ludCBmZWF0dXJlcywgbGlrZSBtYXJrZXIgc3ltYm9scywgdG8gYmUgY2xpY2tlZC5cbiAgICAgIHZhciBzaXplID0gcmFkaXVzO1xuICAgICAgdmFyIGJib3ggPSBbW3Bvc1swXSAtIHNpemUsIHBvc1sxXSAtIHNpemVdLCBbcG9zWzBdICsgc2l6ZSwgcG9zWzFdICsgc2l6ZV1dO1xuICAgICAgZmVhdHVyZXMgPSB0aGlzLl9tYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGJib3gsIHRoaXMuX3F1ZXJ5UGFyYW1zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBvaW50ID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseSggUG9pbnQsIFsgbnVsbCBdLmNvbmNhdCggcG9zKSApKTtcbiAgICAgIGZlYXR1cmVzID0gdGhpcy5fbWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhwb2ludCwgdGhpcy5fcXVlcnlQYXJhbXMpO1xuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH07XG5cbiAgLy8gSE9WRVIgQU5EIENMSUNLXG5cbiAgU3RhdGljTWFwLnByb3RvdHlwZS5fb25Nb3VzZU1vdmUgPSBmdW5jdGlvbiBfb25Nb3VzZU1vdmUgKHJlZikge1xuICAgIHZhciBwb3MgPSByZWYucG9zO1xuXG4gICAgaWYgKHRoaXMucHJvcHMub25Ib3Zlcikge1xuICAgICAgdmFyIGxhdExvbmcgPSB0aGlzLnByb3BzLnVucHJvamVjdChwb3MpO1xuICAgICAgdGhpcy5wcm9wcy5vbkhvdmVyKGxhdExvbmcsIHBvcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uSG92ZXJGZWF0dXJlcykge1xuICAgICAgdmFyIGZlYXR1cmVzID0gdGhpcy5fZ2V0RmVhdHVyZXMoe3BvczogcG9zfSk7XG4gICAgICBpZiAoIWZlYXR1cmVzLmxlbmd0aCAmJiB0aGlzLnByb3BzLmlnbm9yZUVtcHR5RmVhdHVyZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNIb3ZlcmluZzogZmVhdHVyZXMubGVuZ3RoID4gMH0pO1xuICAgICAgdGhpcy5wcm9wcy5vbkhvdmVyRmVhdHVyZXMoZmVhdHVyZXMpO1xuICAgIH1cbiAgfTtcblxuICBTdGF0aWNNYXAucHJvdG90eXBlLl9vbk1vdXNlQ2xpY2sgPSBmdW5jdGlvbiBfb25Nb3VzZUNsaWNrIChyZWYpIHtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcblxuICAgIGlmICh0aGlzLnByb3BzLm9uQ2xpY2spIHtcbiAgICAgIHZhciBsYXRMb25nID0gdGhpcy5wcm9wcy51bnByb2plY3QocG9zKTtcbiAgICAgIC8vIFRPRE8gLSBEbyB3ZSByZWFsbHkgd2FudCB0byBleHBvc2UgYSBtYXBib3ggXCJQb2ludFwiIGluIG91ciBpbnRlcmZhY2U/XG4gICAgICAvLyBjb25zdCBwb2ludCA9IG5ldyBQb2ludCguLi5wb3MpO1xuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGxhdExvbmcsIHBvcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMub25DbGlja0ZlYXR1cmVzKSB7XG4gICAgICB2YXIgZmVhdHVyZXMgPSB0aGlzLl9nZXRGZWF0dXJlcyh7cG9zOiBwb3MsIHJhZGl1czogdGhpcy5wcm9wcy5jbGlja1JhZGl1c30pO1xuICAgICAgaWYgKCFmZWF0dXJlcy5sZW5ndGggJiYgdGhpcy5wcm9wcy5pZ25vcmVFbXB0eUZlYXR1cmVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJvcHMub25DbGlja0ZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICB9XG4gIH07XG5cbiAgU3RhdGljTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciBjbGFzc05hbWUgPSByZWYuY2xhc3NOYW1lO1xuICAgIHZhciB3aWR0aCA9IHJlZi53aWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gcmVmLmhlaWdodDtcbiAgICB2YXIgc3R5bGUgPSByZWYuc3R5bGU7XG5cbiAgICB2YXIgbWFwQ29udGFpbmVyU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdHlsZSwge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsIHBvc2l0aW9uOiAncmVsYXRpdmUnfSk7XG4gICAgdmFyIG1hcFN0eWxlID0gT2JqZWN0LmFzc2lnbih7fSwgc3R5bGUsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSk7XG4gICAgdmFyIG92ZXJsYXlDb250YWluZXJTdHlsZSA9IHtwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogMCwgdG9wOiAwfTtcblxuICAgIC8vIE5vdGU6IGEgc3RhdGljIG1hcCBzdGlsbCBoYW5kbGVzIGNsaWNrcyBhbmQgaG92ZXIgZXZlbnRzXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7IHN0eWxlOiBtYXBDb250YWluZXJTdHlsZSwgb25Nb3VzZU1vdmU6IHRoaXMuX29uTW91c2VNb3ZlLCBvbk1vdXNlQ2xpY2s6IHRoaXMuX29uTW91c2VDbGljayB9LFxuXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7IGtleTogXCJtYXBcIiwgcmVmOiBcIm1hcGJveE1hcFwiLCBzdHlsZTogbWFwU3R5bGUsIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0pLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnZGl2JywgeyBrZXk6IFwib3ZlcmxheXNcIiwgY2xhc3NOYW1lOiBcIm92ZXJsYXlzXCIsIHN0eWxlOiBvdmVybGF5Q29udGFpbmVyU3R5bGUgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgICAgIClcblxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFN0YXRpY01hcDtcbn0oQ29tcG9uZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRpY01hcDtcblxuU3RhdGljTWFwLmRpc3BsYXlOYW1lID0gJ1N0YXRpY01hcCc7XG5TdGF0aWNNYXAucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuU3RhdGljTWFwLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9jb21wb25lbnRzL3N0YXRpYy1tYXAuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){"use strict";eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_global_window__ = __webpack_require__(/*! global/window */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_global_window___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_global_window__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_global_document__ = __webpack_require__(/*! global/document */ 11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_global_document___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_global_document__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// Portions of the code below originally from:\n// https://github.com/mapbox/mapbox-gl-js/blob/master/js/ui/handler/scroll_zoom.js\n\n\n\n\nfunction noop() {}\n\nvar ua = typeof __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.navigator !== 'undefined' ?\n  __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.navigator.userAgent.toLowerCase() : '';\nvar firefox = ua.indexOf('firefox') !== -1;\n\n// Extract a position from a mouse event\nfunction getMousePosition(el, event) {\n  var rect = el.getBoundingClientRect();\n  event = event.touches ? event.touches[0] : event;\n  return [\n    event.clientX - rect.left - el.clientLeft,\n    event.clientY - rect.top - el.clientTop\n  ];\n}\n\n// Extract an array of touch positions from a touch event\nfunction getTouchPositions(el, event) {\n  var points = [];\n  var rect = el.getBoundingClientRect();\n  for (var i = 0; i < event.touches.length; i++) {\n    points.push([\n      event.touches[i].clientX - rect.left - el.clientLeft,\n      event.touches[i].clientY - rect.top - el.clientTop\n    ]);\n  }\n  return points;\n}\n\n// Return the centroid of an array of points\nfunction centroid(positions) {\n  var sum = positions.reduce(\n    function (acc, elt) { return [acc[0] + elt[0], acc[1] + elt[1]]; },\n    [0, 0]\n  );\n  return [sum[0] / positions.length, sum[1] / positions.length];\n}\n\nvar EventManager = function EventManager(canvas, ref) {\n  if ( ref === void 0 ) ref = {};\n  var onMouseDown = ref.onMouseDown; if ( onMouseDown === void 0 ) onMouseDown = noop;\n  var onMouseClick = ref.onMouseClick; if ( onMouseClick === void 0 ) onMouseClick = noop;\n  var onMouseRotate = ref.onMouseRotate; if ( onMouseRotate === void 0 ) onMouseRotate = noop;\n  var onMouseDrag = ref.onMouseDrag; if ( onMouseDrag === void 0 ) onMouseDrag = noop;\n  var onTouchStart = ref.onTouchStart; if ( onTouchStart === void 0 ) onTouchStart = noop;\n  var onTouchRotate = ref.onTouchRotate; if ( onTouchRotate === void 0 ) onTouchRotate = noop;\n  var onTouchDrag = ref.onTouchDrag; if ( onTouchDrag === void 0 ) onTouchDrag = noop;\n  var onTouchEnd = ref.onTouchEnd; if ( onTouchEnd === void 0 ) onTouchEnd = noop;\n  var onTouchTap = ref.onTouchTap; if ( onTouchTap === void 0 ) onTouchTap = noop;\n  var onZoom = ref.onZoom; if ( onZoom === void 0 ) onZoom = noop;\n  var onZoomEnd = ref.onZoomEnd; if ( onZoomEnd === void 0 ) onZoomEnd = noop;\n\n  canvas.addEventListener('mousemove', this._onMouseMove);\n  canvas.addEventListener('mousedown', this._onMouseDown);\n  canvas.addEventListener('touchstart', this._onTouchStart);\n  canvas.addEventListener('contextmenu', this._onMouseDown);\n  canvas.addEventListener('mousewheel', this._onWheel);\n\n  this.state = {\n    didDrag: false,\n    isFunctionKeyPressed: false,\n    startPos: null,\n    pos: null,\n    mouseWheelPos: null\n  };\n\n  this.callbacks = {\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    onMouseRotate: onMouseRotate,\n    onMouseDrag: onMouseDrag,\n    onTouchRotate: onTouchRotate,\n    onTouchDrag: onTouchDrag,\n    onTouchEnd: onTouchEnd,\n    onTouchTap: onTouchTap,\n    onZoom: onZoom,\n    onZoomEnd: onZoomEnd\n  };\n};\n\nEventManager.prototype.setState = function setState (settings) {\n  Object.assign(this.state, settings);\n};\n\nEventManager.prototype._getMousePos = function _getMousePos (event) {\n  var el = this.refs.container;\n  return getMousePosition(el, event);\n};\n\nEventManager.prototype._getTouchPos = function _getTouchPos (event) {\n  var el = this.refs.container;\n  var positions = getTouchPositions(el, event);\n  return centroid(positions);\n};\n\nEventManager.prototype._isFunctionKeyPressed = function _isFunctionKeyPressed (event) {\n  return Boolean(event.metaKey || event.altKey ||\n    event.ctrlKey || event.shiftKey);\n};\n\nEventManager.prototype._onMouseDown = function _onMouseDown (event) {\n  var pos = this._getMousePos(event);\n  this.setState({\n    didDrag: false,\n    startPos: pos,\n    pos: pos,\n    isFunctionKeyPressed: this._isFunctionKeyPressed(event)\n  });\n  this.callbacks.onMouseDown({pos: pos});\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.addEventListener('mousemove', this._onMouseDrag, false);\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.addEventListener('mouseup', this._onMouseUp, false);\n};\nEventManager.prototype._onTouchStart = function _onTouchStart (event) {\n  var pos = this._getTouchPos(event);\n  this.setState({\n    didDrag: false,\n    startPos: pos,\n    pos: pos,\n    isFunctionKeyPressed: this._isFunctionKeyPressed(event)\n  });\n  this.callbacks.onTouchStart({pos: pos});\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.addEventListener('touchmove', this._onTouchDrag, false);\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.addEventListener('touchend', this._onTouchEnd, false);\n};\n\nEventManager.prototype._onMouseDrag = function _onMouseDrag (event) {\n  var pos = this._getMousePos(event);\n  this.setState({pos: pos, didDrag: true});\n  var ref = this.state;\n    var startPos = ref.startPos;\n  if (this.state.isFunctionKeyPressed) {\n    this.callbacks.onMouseRotate({pos: pos, startPos: startPos});\n  } else {\n    this.callbacks.onMouseDrag({pos: pos, startPos: startPos});\n  }\n};\n\nEventManager.prototype._onTouchDrag = function _onTouchDrag (event) {\n  var pos = this._getTouchPos(event);\n  this.setState({pos: pos, didDrag: true});\n  if (this.state.isFunctionKeyPressed) {\n    var ref = this.state;\n      var startPos = ref.startPos;\n    this.callbacks.onTouchRotate({pos: pos, startPos: startPos});\n  } else {\n    this.callbacks.onTouchDrag({pos: pos});\n  }\n  event.preventDefault();\n};\n\nEventManager.prototype._onMouseUp = function _onMouseUp (event) {\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.removeEventListener('mousemove', this._onMouseDrag, false);\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.removeEventListener('mouseup', this._onMouseUp, false);\n  var pos = this._getMousePos(event);\n  this.setState({pos: pos});\n  this.callbacks.onMouseUp({pos: pos});\n  if (!this.state.didDrag) {\n    this.callbacks.onMouseClick({pos: pos});\n  }\n};\n\nEventManager.prototype._onTouchEnd = function _onTouchEnd (event) {\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.removeEventListener('touchmove', this._onTouchDrag, false);\n  __WEBPACK_IMPORTED_MODULE_1_global_document___default.a.removeEventListener('touchend', this._onTouchEnd, false);\n  var pos = this._getTouchPos(event);\n  this.setState({pos: pos});\n  this.callbacks.onTouchEnd({pos: pos});\n  if (!this.state.didDrag) {\n    this.callbacks.onTouchTap({pos: pos});\n  }\n};\n\nEventManager.prototype._onMouseMove = function _onMouseMove (event) {\n  var pos = this._getMousePos(event);\n  this.callbacks.onMouseMove({pos: pos});\n};\n\n/* eslint-disable complexity, max-statements */\nEventManager.prototype._onWheel = function _onWheel (event) {\n  event.preventDefault();\n  var value = event.deltaY;\n  // Firefox doubles the values on retina screens...\n  if (firefox && event.deltaMode === __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.WheelEvent.DOM_DELTA_PIXEL) {\n    value /= __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.devicePixelRatio;\n  }\n  if (event.deltaMode === __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.WheelEvent.DOM_DELTA_LINE) {\n    value *= 40;\n  }\n\n  var type = this.state.mouseWheelType;\n  var timeout = this.state.mouseWheelTimeout;\n  var lastValue = this.state.mouseWheelLastValue;\n  var time = this.state.mouseWheelTime;\n\n  var now = (__WEBPACK_IMPORTED_MODULE_0_global_window___default.a.performance || Date).now();\n  var timeDelta = now - (time || 0);\n\n  var pos = this._getMousePos(event);\n  time = now;\n\n  if (value !== 0 && value % 4.000244140625 === 0) {\n    // This one is definitely a mouse wheel event.\n    type = 'wheel';\n    // Normalize this value to match trackpad.\n    value = Math.floor(value / 4);\n  } else if (value !== 0 && Math.abs(value) < 4) {\n    // This one is definitely a trackpad event because it is so small.\n    type = 'trackpad';\n  } else if (timeDelta > 400) {\n    // This is likely a new scroll action.\n    type = null;\n    lastValue = value;\n    // Start a timeout in case this was a singular event, and delay it by up\n    // to 40ms.\n    timeout = __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.setTimeout(function setTimeout() {\n      var _type = 'wheel';\n      this._zoom(-this.state.mouseWheelLastValue, this.state.mouseWheelPos);\n      this.setState({mouseWheelType: _type});\n    }.bind(this), 40);\n  } else if (!this._type) {\n    // This is a repeating event, but we don't know the type of event just\n    // yet.\n    // If the delta per time is small, we assume it's a fast trackpad;\n    // otherwise we switch into wheel mode.\n    type = Math.abs(timeDelta * value) < 200 ? 'trackpad' : 'wheel';\n\n    // Make sure our delayed event isn't fired again, because we accumulate\n    // the previous event (which was less than 40ms ago) into this event.\n    if (timeout) {\n      __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.clearTimeout(timeout);\n      timeout = null;\n      value += lastValue;\n    }\n  }\n\n  // Slow down zoom if shift key is held for more precise zooming\n  if (event.shiftKey && value) {\n    value = value / 4;\n  }\n\n  // Only fire the callback if we actually know what type of scrolling device\n  // the user uses.\n  if (type) {\n    this._zoom(-value, pos);\n  }\n\n  this.setState({\n    mouseWheelTime: time,\n    mouseWheelPos: pos,\n    mouseWheelType: type,\n    mouseWheelTimeout: timeout,\n    mouseWheelLastValue: lastValue\n  });\n};\n/* eslint-enable complexity, max-statements */\n\nEventManager.prototype._zoom = function _zoom (delta, pos) {\n  // Scale by sigmoid of scroll wheel delta.\n  var scale = 2 / (1 + Math.exp(-Math.abs(delta / 100)));\n  if (delta < 0 && scale !== 0) {\n    scale = 1 / scale;\n  }\n  this.callbacks.onZoom({pos: pos, delta: delta, scale: scale});\n  __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.clearTimeout(this._zoomEndTimeout);\n  this._zoomEndTimeout = __WEBPACK_IMPORTED_MODULE_0_global_window___default.a.setTimeout(function _setTimeout() {\n    this.callbacks.onZoomEnd();\n  }.bind(this), 200);\n};\n\n/* harmony default export */ exports[\"a\"] = EventManager;\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L3V0aWxzL2V2ZW50LW1hbmFnZXIuanM/MmE0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG4vLyBQb3J0aW9ucyBvZiB0aGUgY29kZSBiZWxvdyBvcmlnaW5hbGx5IGZyb206XG4vLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iL21hc3Rlci9qcy91aS9oYW5kbGVyL3Njcm9sbF96b29tLmpzXG5cbmltcG9ydCB3aW5kb3cgZnJvbSAnZ2xvYmFsL3dpbmRvdyc7XG5pbXBvcnQgZG9jdW1lbnQgZnJvbSAnZ2xvYmFsL2RvY3VtZW50JztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciB1YSA9IHR5cGVvZiB3aW5kb3cubmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/XG4gIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgOiAnJztcbnZhciBmaXJlZm94ID0gdWEuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMTtcblxuLy8gRXh0cmFjdCBhIHBvc2l0aW9uIGZyb20gYSBtb3VzZSBldmVudFxuZnVuY3Rpb24gZ2V0TW91c2VQb3NpdGlvbihlbCwgZXZlbnQpIHtcbiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgZXZlbnQgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXSA6IGV2ZW50O1xuICByZXR1cm4gW1xuICAgIGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQgLSBlbC5jbGllbnRMZWZ0LFxuICAgIGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcCAtIGVsLmNsaWVudFRvcFxuICBdO1xufVxuXG4vLyBFeHRyYWN0IGFuIGFycmF5IG9mIHRvdWNoIHBvc2l0aW9ucyBmcm9tIGEgdG91Y2ggZXZlbnRcbmZ1bmN0aW9uIGdldFRvdWNoUG9zaXRpb25zKGVsLCBldmVudCkge1xuICB2YXIgcG9pbnRzID0gW107XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQudG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIHBvaW50cy5wdXNoKFtcbiAgICAgIGV2ZW50LnRvdWNoZXNbaV0uY2xpZW50WCAtIHJlY3QubGVmdCAtIGVsLmNsaWVudExlZnQsXG4gICAgICBldmVudC50b3VjaGVzW2ldLmNsaWVudFkgLSByZWN0LnRvcCAtIGVsLmNsaWVudFRvcFxuICAgIF0pO1xuICB9XG4gIHJldHVybiBwb2ludHM7XG59XG5cbi8vIFJldHVybiB0aGUgY2VudHJvaWQgb2YgYW4gYXJyYXkgb2YgcG9pbnRzXG5mdW5jdGlvbiBjZW50cm9pZChwb3NpdGlvbnMpIHtcbiAgdmFyIHN1bSA9IHBvc2l0aW9ucy5yZWR1Y2UoXG4gICAgZnVuY3Rpb24gKGFjYywgZWx0KSB7IHJldHVybiBbYWNjWzBdICsgZWx0WzBdLCBhY2NbMV0gKyBlbHRbMV1dOyB9LFxuICAgIFswLCAwXVxuICApO1xuICByZXR1cm4gW3N1bVswXSAvIHBvc2l0aW9ucy5sZW5ndGgsIHN1bVsxXSAvIHBvc2l0aW9ucy5sZW5ndGhdO1xufVxuXG52YXIgRXZlbnRNYW5hZ2VyID0gZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKGNhbnZhcywgcmVmKSB7XG4gIGlmICggcmVmID09PSB2b2lkIDAgKSByZWYgPSB7fTtcbiAgdmFyIG9uTW91c2VEb3duID0gcmVmLm9uTW91c2VEb3duOyBpZiAoIG9uTW91c2VEb3duID09PSB2b2lkIDAgKSBvbk1vdXNlRG93biA9IG5vb3A7XG4gIHZhciBvbk1vdXNlQ2xpY2sgPSByZWYub25Nb3VzZUNsaWNrOyBpZiAoIG9uTW91c2VDbGljayA9PT0gdm9pZCAwICkgb25Nb3VzZUNsaWNrID0gbm9vcDtcbiAgdmFyIG9uTW91c2VSb3RhdGUgPSByZWYub25Nb3VzZVJvdGF0ZTsgaWYgKCBvbk1vdXNlUm90YXRlID09PSB2b2lkIDAgKSBvbk1vdXNlUm90YXRlID0gbm9vcDtcbiAgdmFyIG9uTW91c2VEcmFnID0gcmVmLm9uTW91c2VEcmFnOyBpZiAoIG9uTW91c2VEcmFnID09PSB2b2lkIDAgKSBvbk1vdXNlRHJhZyA9IG5vb3A7XG4gIHZhciBvblRvdWNoU3RhcnQgPSByZWYub25Ub3VjaFN0YXJ0OyBpZiAoIG9uVG91Y2hTdGFydCA9PT0gdm9pZCAwICkgb25Ub3VjaFN0YXJ0ID0gbm9vcDtcbiAgdmFyIG9uVG91Y2hSb3RhdGUgPSByZWYub25Ub3VjaFJvdGF0ZTsgaWYgKCBvblRvdWNoUm90YXRlID09PSB2b2lkIDAgKSBvblRvdWNoUm90YXRlID0gbm9vcDtcbiAgdmFyIG9uVG91Y2hEcmFnID0gcmVmLm9uVG91Y2hEcmFnOyBpZiAoIG9uVG91Y2hEcmFnID09PSB2b2lkIDAgKSBvblRvdWNoRHJhZyA9IG5vb3A7XG4gIHZhciBvblRvdWNoRW5kID0gcmVmLm9uVG91Y2hFbmQ7IGlmICggb25Ub3VjaEVuZCA9PT0gdm9pZCAwICkgb25Ub3VjaEVuZCA9IG5vb3A7XG4gIHZhciBvblRvdWNoVGFwID0gcmVmLm9uVG91Y2hUYXA7IGlmICggb25Ub3VjaFRhcCA9PT0gdm9pZCAwICkgb25Ub3VjaFRhcCA9IG5vb3A7XG4gIHZhciBvblpvb20gPSByZWYub25ab29tOyBpZiAoIG9uWm9vbSA9PT0gdm9pZCAwICkgb25ab29tID0gbm9vcDtcbiAgdmFyIG9uWm9vbUVuZCA9IHJlZi5vblpvb21FbmQ7IGlmICggb25ab29tRW5kID09PSB2b2lkIDAgKSBvblpvb21FbmQgPSBub29wO1xuXG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlTW92ZSk7XG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25Ub3VjaFN0YXJ0KTtcbiAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5fb25Nb3VzZURvd24pO1xuICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMuX29uV2hlZWwpO1xuXG4gIHRoaXMuc3RhdGUgPSB7XG4gICAgZGlkRHJhZzogZmFsc2UsXG4gICAgaXNGdW5jdGlvbktleVByZXNzZWQ6IGZhbHNlLFxuICAgIHN0YXJ0UG9zOiBudWxsLFxuICAgIHBvczogbnVsbCxcbiAgICBtb3VzZVdoZWVsUG9zOiBudWxsXG4gIH07XG5cbiAgdGhpcy5jYWxsYmFja3MgPSB7XG4gICAgb25Nb3VzZURvd246IG9uTW91c2VEb3duLFxuICAgIG9uVG91Y2hTdGFydDogb25Ub3VjaFN0YXJ0LFxuICAgIG9uTW91c2VSb3RhdGU6IG9uTW91c2VSb3RhdGUsXG4gICAgb25Nb3VzZURyYWc6IG9uTW91c2VEcmFnLFxuICAgIG9uVG91Y2hSb3RhdGU6IG9uVG91Y2hSb3RhdGUsXG4gICAgb25Ub3VjaERyYWc6IG9uVG91Y2hEcmFnLFxuICAgIG9uVG91Y2hFbmQ6IG9uVG91Y2hFbmQsXG4gICAgb25Ub3VjaFRhcDogb25Ub3VjaFRhcCxcbiAgICBvblpvb206IG9uWm9vbSxcbiAgICBvblpvb21FbmQ6IG9uWm9vbUVuZFxuICB9O1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIHNldFN0YXRlIChzZXR0aW5ncykge1xuICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUsIHNldHRpbmdzKTtcbn07XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUuX2dldE1vdXNlUG9zID0gZnVuY3Rpb24gX2dldE1vdXNlUG9zIChldmVudCkge1xuICB2YXIgZWwgPSB0aGlzLnJlZnMuY29udGFpbmVyO1xuICByZXR1cm4gZ2V0TW91c2VQb3NpdGlvbihlbCwgZXZlbnQpO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5fZ2V0VG91Y2hQb3MgPSBmdW5jdGlvbiBfZ2V0VG91Y2hQb3MgKGV2ZW50KSB7XG4gIHZhciBlbCA9IHRoaXMucmVmcy5jb250YWluZXI7XG4gIHZhciBwb3NpdGlvbnMgPSBnZXRUb3VjaFBvc2l0aW9ucyhlbCwgZXZlbnQpO1xuICByZXR1cm4gY2VudHJvaWQocG9zaXRpb25zKTtcbn07XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUuX2lzRnVuY3Rpb25LZXlQcmVzc2VkID0gZnVuY3Rpb24gX2lzRnVuY3Rpb25LZXlQcmVzc2VkIChldmVudCkge1xuICByZXR1cm4gQm9vbGVhbihldmVudC5tZXRhS2V5IHx8IGV2ZW50LmFsdEtleSB8fFxuICAgIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkpO1xufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5fb25Nb3VzZURvd24gPSBmdW5jdGlvbiBfb25Nb3VzZURvd24gKGV2ZW50KSB7XG4gIHZhciBwb3MgPSB0aGlzLl9nZXRNb3VzZVBvcyhldmVudCk7XG4gIHRoaXMuc2V0U3RhdGUoe1xuICAgIGRpZERyYWc6IGZhbHNlLFxuICAgIHN0YXJ0UG9zOiBwb3MsXG4gICAgcG9zOiBwb3MsXG4gICAgaXNGdW5jdGlvbktleVByZXNzZWQ6IHRoaXMuX2lzRnVuY3Rpb25LZXlQcmVzc2VkKGV2ZW50KVxuICB9KTtcbiAgdGhpcy5jYWxsYmFja3Mub25Nb3VzZURvd24oe3BvczogcG9zfSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VEcmFnLCBmYWxzZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXAsIGZhbHNlKTtcbn07XG5FdmVudE1hbmFnZXIucHJvdG90eXBlLl9vblRvdWNoU3RhcnQgPSBmdW5jdGlvbiBfb25Ub3VjaFN0YXJ0IChldmVudCkge1xuICB2YXIgcG9zID0gdGhpcy5fZ2V0VG91Y2hQb3MoZXZlbnQpO1xuICB0aGlzLnNldFN0YXRlKHtcbiAgICBkaWREcmFnOiBmYWxzZSxcbiAgICBzdGFydFBvczogcG9zLFxuICAgIHBvczogcG9zLFxuICAgIGlzRnVuY3Rpb25LZXlQcmVzc2VkOiB0aGlzLl9pc0Z1bmN0aW9uS2V5UHJlc3NlZChldmVudClcbiAgfSk7XG4gIHRoaXMuY2FsbGJhY2tzLm9uVG91Y2hTdGFydCh7cG9zOiBwb3N9KTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaERyYWcsIGZhbHNlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9vblRvdWNoRW5kLCBmYWxzZSk7XG59O1xuXG5FdmVudE1hbmFnZXIucHJvdG90eXBlLl9vbk1vdXNlRHJhZyA9IGZ1bmN0aW9uIF9vbk1vdXNlRHJhZyAoZXZlbnQpIHtcbiAgdmFyIHBvcyA9IHRoaXMuX2dldE1vdXNlUG9zKGV2ZW50KTtcbiAgdGhpcy5zZXRTdGF0ZSh7cG9zOiBwb3MsIGRpZERyYWc6IHRydWV9KTtcbiAgdmFyIHJlZiA9IHRoaXMuc3RhdGU7XG4gICAgdmFyIHN0YXJ0UG9zID0gcmVmLnN0YXJ0UG9zO1xuICBpZiAodGhpcy5zdGF0ZS5pc0Z1bmN0aW9uS2V5UHJlc3NlZCkge1xuICAgIHRoaXMuY2FsbGJhY2tzLm9uTW91c2VSb3RhdGUoe3BvczogcG9zLCBzdGFydFBvczogc3RhcnRQb3N9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmNhbGxiYWNrcy5vbk1vdXNlRHJhZyh7cG9zOiBwb3MsIHN0YXJ0UG9zOiBzdGFydFBvc30pO1xuICB9XG59O1xuXG5FdmVudE1hbmFnZXIucHJvdG90eXBlLl9vblRvdWNoRHJhZyA9IGZ1bmN0aW9uIF9vblRvdWNoRHJhZyAoZXZlbnQpIHtcbiAgdmFyIHBvcyA9IHRoaXMuX2dldFRvdWNoUG9zKGV2ZW50KTtcbiAgdGhpcy5zZXRTdGF0ZSh7cG9zOiBwb3MsIGRpZERyYWc6IHRydWV9KTtcbiAgaWYgKHRoaXMuc3RhdGUuaXNGdW5jdGlvbktleVByZXNzZWQpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5zdGF0ZTtcbiAgICAgIHZhciBzdGFydFBvcyA9IHJlZi5zdGFydFBvcztcbiAgICB0aGlzLmNhbGxiYWNrcy5vblRvdWNoUm90YXRlKHtwb3M6IHBvcywgc3RhcnRQb3M6IHN0YXJ0UG9zfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5jYWxsYmFja3Mub25Ub3VjaERyYWcoe3BvczogcG9zfSk7XG4gIH1cbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn07XG5cbkV2ZW50TWFuYWdlci5wcm90b3R5cGUuX29uTW91c2VVcCA9IGZ1bmN0aW9uIF9vbk1vdXNlVXAgKGV2ZW50KSB7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VEcmFnLCBmYWxzZSk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXAsIGZhbHNlKTtcbiAgdmFyIHBvcyA9IHRoaXMuX2dldE1vdXNlUG9zKGV2ZW50KTtcbiAgdGhpcy5zZXRTdGF0ZSh7cG9zOiBwb3N9KTtcbiAgdGhpcy5jYWxsYmFja3Mub25Nb3VzZVVwKHtwb3M6IHBvc30pO1xuICBpZiAoIXRoaXMuc3RhdGUuZGlkRHJhZykge1xuICAgIHRoaXMuY2FsbGJhY2tzLm9uTW91c2VDbGljayh7cG9zOiBwb3N9KTtcbiAgfVxufTtcblxuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5fb25Ub3VjaEVuZCA9IGZ1bmN0aW9uIF9vblRvdWNoRW5kIChldmVudCkge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9vblRvdWNoRHJhZywgZmFsc2UpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQsIGZhbHNlKTtcbiAgdmFyIHBvcyA9IHRoaXMuX2dldFRvdWNoUG9zKGV2ZW50KTtcbiAgdGhpcy5zZXRTdGF0ZSh7cG9zOiBwb3N9KTtcbiAgdGhpcy5jYWxsYmFja3Mub25Ub3VjaEVuZCh7cG9zOiBwb3N9KTtcbiAgaWYgKCF0aGlzLnN0YXRlLmRpZERyYWcpIHtcbiAgICB0aGlzLmNhbGxiYWNrcy5vblRvdWNoVGFwKHtwb3M6IHBvc30pO1xuICB9XG59O1xuXG5FdmVudE1hbmFnZXIucHJvdG90eXBlLl9vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIF9vbk1vdXNlTW92ZSAoZXZlbnQpIHtcbiAgdmFyIHBvcyA9IHRoaXMuX2dldE1vdXNlUG9zKGV2ZW50KTtcbiAgdGhpcy5jYWxsYmFja3Mub25Nb3VzZU1vdmUoe3BvczogcG9zfSk7XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5LCBtYXgtc3RhdGVtZW50cyAqL1xuRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5fb25XaGVlbCA9IGZ1bmN0aW9uIF9vbldoZWVsIChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB2YXIgdmFsdWUgPSBldmVudC5kZWx0YVk7XG4gIC8vIEZpcmVmb3ggZG91YmxlcyB0aGUgdmFsdWVzIG9uIHJldGluYSBzY3JlZW5zLi4uXG4gIGlmIChmaXJlZm94ICYmIGV2ZW50LmRlbHRhTW9kZSA9PT0gd2luZG93LldoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgdmFsdWUgLz0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIH1cbiAgaWYgKGV2ZW50LmRlbHRhTW9kZSA9PT0gd2luZG93LldoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUpIHtcbiAgICB2YWx1ZSAqPSA0MDtcbiAgfVxuXG4gIHZhciB0eXBlID0gdGhpcy5zdGF0ZS5tb3VzZVdoZWVsVHlwZTtcbiAgdmFyIHRpbWVvdXQgPSB0aGlzLnN0YXRlLm1vdXNlV2hlZWxUaW1lb3V0O1xuICB2YXIgbGFzdFZhbHVlID0gdGhpcy5zdGF0ZS5tb3VzZVdoZWVsTGFzdFZhbHVlO1xuICB2YXIgdGltZSA9IHRoaXMuc3RhdGUubW91c2VXaGVlbFRpbWU7XG5cbiAgdmFyIG5vdyA9ICh3aW5kb3cucGVyZm9ybWFuY2UgfHwgRGF0ZSkubm93KCk7XG4gIHZhciB0aW1lRGVsdGEgPSBub3cgLSAodGltZSB8fCAwKTtcblxuICB2YXIgcG9zID0gdGhpcy5fZ2V0TW91c2VQb3MoZXZlbnQpO1xuICB0aW1lID0gbm93O1xuXG4gIGlmICh2YWx1ZSAhPT0gMCAmJiB2YWx1ZSAlIDQuMDAwMjQ0MTQwNjI1ID09PSAwKSB7XG4gICAgLy8gVGhpcyBvbmUgaXMgZGVmaW5pdGVseSBhIG1vdXNlIHdoZWVsIGV2ZW50LlxuICAgIHR5cGUgPSAnd2hlZWwnO1xuICAgIC8vIE5vcm1hbGl6ZSB0aGlzIHZhbHVlIHRvIG1hdGNoIHRyYWNrcGFkLlxuICAgIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSAvIDQpO1xuICB9IGVsc2UgaWYgKHZhbHVlICE9PSAwICYmIE1hdGguYWJzKHZhbHVlKSA8IDQpIHtcbiAgICAvLyBUaGlzIG9uZSBpcyBkZWZpbml0ZWx5IGEgdHJhY2twYWQgZXZlbnQgYmVjYXVzZSBpdCBpcyBzbyBzbWFsbC5cbiAgICB0eXBlID0gJ3RyYWNrcGFkJztcbiAgfSBlbHNlIGlmICh0aW1lRGVsdGEgPiA0MDApIHtcbiAgICAvLyBUaGlzIGlzIGxpa2VseSBhIG5ldyBzY3JvbGwgYWN0aW9uLlxuICAgIHR5cGUgPSBudWxsO1xuICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgIC8vIFN0YXJ0IGEgdGltZW91dCBpbiBjYXNlIHRoaXMgd2FzIGEgc2luZ3VsYXIgZXZlbnQsIGFuZCBkZWxheSBpdCBieSB1cFxuICAgIC8vIHRvIDQwbXMuXG4gICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uIHNldFRpbWVvdXQoKSB7XG4gICAgICB2YXIgX3R5cGUgPSAnd2hlZWwnO1xuICAgICAgdGhpcy5fem9vbSgtdGhpcy5zdGF0ZS5tb3VzZVdoZWVsTGFzdFZhbHVlLCB0aGlzLnN0YXRlLm1vdXNlV2hlZWxQb3MpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bW91c2VXaGVlbFR5cGU6IF90eXBlfSk7XG4gICAgfS5iaW5kKHRoaXMpLCA0MCk7XG4gIH0gZWxzZSBpZiAoIXRoaXMuX3R5cGUpIHtcbiAgICAvLyBUaGlzIGlzIGEgcmVwZWF0aW5nIGV2ZW50LCBidXQgd2UgZG9uJ3Qga25vdyB0aGUgdHlwZSBvZiBldmVudCBqdXN0XG4gICAgLy8geWV0LlxuICAgIC8vIElmIHRoZSBkZWx0YSBwZXIgdGltZSBpcyBzbWFsbCwgd2UgYXNzdW1lIGl0J3MgYSBmYXN0IHRyYWNrcGFkO1xuICAgIC8vIG90aGVyd2lzZSB3ZSBzd2l0Y2ggaW50byB3aGVlbCBtb2RlLlxuICAgIHR5cGUgPSBNYXRoLmFicyh0aW1lRGVsdGEgKiB2YWx1ZSkgPCAyMDAgPyAndHJhY2twYWQnIDogJ3doZWVsJztcblxuICAgIC8vIE1ha2Ugc3VyZSBvdXIgZGVsYXllZCBldmVudCBpc24ndCBmaXJlZCBhZ2FpbiwgYmVjYXVzZSB3ZSBhY2N1bXVsYXRlXG4gICAgLy8gdGhlIHByZXZpb3VzIGV2ZW50ICh3aGljaCB3YXMgbGVzcyB0aGFuIDQwbXMgYWdvKSBpbnRvIHRoaXMgZXZlbnQuXG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHZhbHVlICs9IGxhc3RWYWx1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBTbG93IGRvd24gem9vbSBpZiBzaGlmdCBrZXkgaXMgaGVsZCBmb3IgbW9yZSBwcmVjaXNlIHpvb21pbmdcbiAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIHZhbHVlKSB7XG4gICAgdmFsdWUgPSB2YWx1ZSAvIDQ7XG4gIH1cblxuICAvLyBPbmx5IGZpcmUgdGhlIGNhbGxiYWNrIGlmIHdlIGFjdHVhbGx5IGtub3cgd2hhdCB0eXBlIG9mIHNjcm9sbGluZyBkZXZpY2VcbiAgLy8gdGhlIHVzZXIgdXNlcy5cbiAgaWYgKHR5cGUpIHtcbiAgICB0aGlzLl96b29tKC12YWx1ZSwgcG9zKTtcbiAgfVxuXG4gIHRoaXMuc2V0U3RhdGUoe1xuICAgIG1vdXNlV2hlZWxUaW1lOiB0aW1lLFxuICAgIG1vdXNlV2hlZWxQb3M6IHBvcyxcbiAgICBtb3VzZVdoZWVsVHlwZTogdHlwZSxcbiAgICBtb3VzZVdoZWVsVGltZW91dDogdGltZW91dCxcbiAgICBtb3VzZVdoZWVsTGFzdFZhbHVlOiBsYXN0VmFsdWVcbiAgfSk7XG59O1xuLyogZXNsaW50LWVuYWJsZSBjb21wbGV4aXR5LCBtYXgtc3RhdGVtZW50cyAqL1xuXG5FdmVudE1hbmFnZXIucHJvdG90eXBlLl96b29tID0gZnVuY3Rpb24gX3pvb20gKGRlbHRhLCBwb3MpIHtcbiAgLy8gU2NhbGUgYnkgc2lnbW9pZCBvZiBzY3JvbGwgd2hlZWwgZGVsdGEuXG4gIHZhciBzY2FsZSA9IDIgLyAoMSArIE1hdGguZXhwKC1NYXRoLmFicyhkZWx0YSAvIDEwMCkpKTtcbiAgaWYgKGRlbHRhIDwgMCAmJiBzY2FsZSAhPT0gMCkge1xuICAgIHNjYWxlID0gMSAvIHNjYWxlO1xuICB9XG4gIHRoaXMuY2FsbGJhY2tzLm9uWm9vbSh7cG9zOiBwb3MsIGRlbHRhOiBkZWx0YSwgc2NhbGU6IHNjYWxlfSk7XG4gIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fem9vbUVuZFRpbWVvdXQpO1xuICB0aGlzLl96b29tRW5kVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uIF9zZXRUaW1lb3V0KCkge1xuICAgIHRoaXMuY2FsbGJhY2tzLm9uWm9vbUVuZCgpO1xuICB9LmJpbmQodGhpcyksIDIwMCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFdmVudE1hbmFnZXI7XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC91dGlscy9ldmVudC1tYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval("/* unused harmony export diffSources */\n/* unused harmony export diffLayers */\n/* harmony export (immutable) */ exports[\"a\"] = diffStyle;\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* eslint-disable max-statements */\nfunction diffSources(prevStyle, nextStyle) {\n  var prevSources = prevStyle.get('sources');\n  var nextSources = nextStyle.get('sources');\n  var enter = [];\n  var update = [];\n  var exit = [];\n  var prevIds = prevSources.keySeq().toArray();\n  var nextIds = nextSources.keySeq().toArray();\n  for (var i = 0, list = prevIds; i < list.length; i += 1) {\n    var id = list[i];\n\n    var nextSource = nextSources.get(id);\n    if (nextSource) {\n      if (!nextSource.equals(prevSources.get(id))) {\n        update.push({id: id, source: nextSources.get(id)});\n      }\n    } else {\n      exit.push({id: id, source: prevSources.get(id)});\n    }\n  }\n  for (var i$1 = 0, list$1 = nextIds; i$1 < list$1.length; i$1 += 1) {\n    var id$1 = list$1[i$1];\n\n    var prevSource = prevSources.get(id$1);\n    if (!prevSource) {\n      enter.push({id: id$1, source: nextSources.get(id$1)});\n    }\n  }\n  return {enter: enter, update: update, exit: exit};\n}\n/* eslint-enable max-statements */\n\nfunction diffLayers(prevStyle, nextStyle) {\n  var prevLayers = prevStyle.get('layers');\n  var nextLayers = nextStyle.get('layers');\n  var updates = [];\n  var exiting = [];\n  var prevMap = {};\n  var nextMap = {};\n  nextLayers.forEach(function (layer, index) {\n    var id = layer.get('id');\n    var layerImBehind = nextLayers.get(index + 1);\n    nextMap[id] = {\n      layer: layer,\n      id: id,\n      // The `id` of the layer before this one.\n      before: layerImBehind ? layerImBehind.get('id') : null,\n      enter: true\n    };\n  });\n  prevLayers.forEach(function (layer, index) {\n    var id = layer.get('id');\n    var layerImBehind = prevLayers.get(index + 1);\n    prevMap[id] = {\n      layer: layer,\n      id: id,\n      before: layerImBehind ? layerImBehind.get('id') : null\n    };\n    if (nextMap[id]) {\n      // Not a new layer.\n      nextMap[id].enter = false;\n    } else {\n      // This layer is being removed.\n      exiting.push(prevMap[id]);\n    }\n  });\n  for (var i = 0, list = nextLayers.reverse(); i < list.length; i += 1) {\n    var layer = list[i];\n\n    var id = layer.get('id');\n    if (\n      !prevMap[id] ||\n      !prevMap[id].layer.equals(nextMap[id].layer) ||\n      prevMap[id].before !== nextMap[id].before\n    ) {\n      // This layer is being changed.\n      updates.push(nextMap[id]);\n    }\n  }\n  return {updates: updates, exiting: exiting};\n}\n\nfunction diffStyle(prevStyle, nextStyle) {\n  return {\n    sourcesDiff: diffSources(prevStyle, nextStyle),\n    layersDiff: diffLayers(prevStyle, nextStyle)\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L3V0aWxzL2RpZmYtc3R5bGVzLmpzP2UyNmYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuLyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMgKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmU291cmNlcyhwcmV2U3R5bGUsIG5leHRTdHlsZSkge1xuICB2YXIgcHJldlNvdXJjZXMgPSBwcmV2U3R5bGUuZ2V0KCdzb3VyY2VzJyk7XG4gIHZhciBuZXh0U291cmNlcyA9IG5leHRTdHlsZS5nZXQoJ3NvdXJjZXMnKTtcbiAgdmFyIGVudGVyID0gW107XG4gIHZhciB1cGRhdGUgPSBbXTtcbiAgdmFyIGV4aXQgPSBbXTtcbiAgdmFyIHByZXZJZHMgPSBwcmV2U291cmNlcy5rZXlTZXEoKS50b0FycmF5KCk7XG4gIHZhciBuZXh0SWRzID0gbmV4dFNvdXJjZXMua2V5U2VxKCkudG9BcnJheSgpO1xuICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHByZXZJZHM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgdmFyIGlkID0gbGlzdFtpXTtcblxuICAgIHZhciBuZXh0U291cmNlID0gbmV4dFNvdXJjZXMuZ2V0KGlkKTtcbiAgICBpZiAobmV4dFNvdXJjZSkge1xuICAgICAgaWYgKCFuZXh0U291cmNlLmVxdWFscyhwcmV2U291cmNlcy5nZXQoaWQpKSkge1xuICAgICAgICB1cGRhdGUucHVzaCh7aWQ6IGlkLCBzb3VyY2U6IG5leHRTb3VyY2VzLmdldChpZCl9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXhpdC5wdXNoKHtpZDogaWQsIHNvdXJjZTogcHJldlNvdXJjZXMuZ2V0KGlkKX0pO1xuICAgIH1cbiAgfVxuICBmb3IgKHZhciBpJDEgPSAwLCBsaXN0JDEgPSBuZXh0SWRzOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkge1xuICAgIHZhciBpZCQxID0gbGlzdCQxW2kkMV07XG5cbiAgICB2YXIgcHJldlNvdXJjZSA9IHByZXZTb3VyY2VzLmdldChpZCQxKTtcbiAgICBpZiAoIXByZXZTb3VyY2UpIHtcbiAgICAgIGVudGVyLnB1c2goe2lkOiBpZCQxLCBzb3VyY2U6IG5leHRTb3VyY2VzLmdldChpZCQxKX0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge2VudGVyOiBlbnRlciwgdXBkYXRlOiB1cGRhdGUsIGV4aXQ6IGV4aXR9O1xufVxuLyogZXNsaW50LWVuYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlmZkxheWVycyhwcmV2U3R5bGUsIG5leHRTdHlsZSkge1xuICB2YXIgcHJldkxheWVycyA9IHByZXZTdHlsZS5nZXQoJ2xheWVycycpO1xuICB2YXIgbmV4dExheWVycyA9IG5leHRTdHlsZS5nZXQoJ2xheWVycycpO1xuICB2YXIgdXBkYXRlcyA9IFtdO1xuICB2YXIgZXhpdGluZyA9IFtdO1xuICB2YXIgcHJldk1hcCA9IHt9O1xuICB2YXIgbmV4dE1hcCA9IHt9O1xuICBuZXh0TGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpbmRleCkge1xuICAgIHZhciBpZCA9IGxheWVyLmdldCgnaWQnKTtcbiAgICB2YXIgbGF5ZXJJbUJlaGluZCA9IG5leHRMYXllcnMuZ2V0KGluZGV4ICsgMSk7XG4gICAgbmV4dE1hcFtpZF0gPSB7XG4gICAgICBsYXllcjogbGF5ZXIsXG4gICAgICBpZDogaWQsXG4gICAgICAvLyBUaGUgYGlkYCBvZiB0aGUgbGF5ZXIgYmVmb3JlIHRoaXMgb25lLlxuICAgICAgYmVmb3JlOiBsYXllckltQmVoaW5kID8gbGF5ZXJJbUJlaGluZC5nZXQoJ2lkJykgOiBudWxsLFxuICAgICAgZW50ZXI6IHRydWVcbiAgICB9O1xuICB9KTtcbiAgcHJldkxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllciwgaW5kZXgpIHtcbiAgICB2YXIgaWQgPSBsYXllci5nZXQoJ2lkJyk7XG4gICAgdmFyIGxheWVySW1CZWhpbmQgPSBwcmV2TGF5ZXJzLmdldChpbmRleCArIDEpO1xuICAgIHByZXZNYXBbaWRdID0ge1xuICAgICAgbGF5ZXI6IGxheWVyLFxuICAgICAgaWQ6IGlkLFxuICAgICAgYmVmb3JlOiBsYXllckltQmVoaW5kID8gbGF5ZXJJbUJlaGluZC5nZXQoJ2lkJykgOiBudWxsXG4gICAgfTtcbiAgICBpZiAobmV4dE1hcFtpZF0pIHtcbiAgICAgIC8vIE5vdCBhIG5ldyBsYXllci5cbiAgICAgIG5leHRNYXBbaWRdLmVudGVyID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgbGF5ZXIgaXMgYmVpbmcgcmVtb3ZlZC5cbiAgICAgIGV4aXRpbmcucHVzaChwcmV2TWFwW2lkXSk7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBuZXh0TGF5ZXJzLnJldmVyc2UoKTsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgbGF5ZXIgPSBsaXN0W2ldO1xuXG4gICAgdmFyIGlkID0gbGF5ZXIuZ2V0KCdpZCcpO1xuICAgIGlmIChcbiAgICAgICFwcmV2TWFwW2lkXSB8fFxuICAgICAgIXByZXZNYXBbaWRdLmxheWVyLmVxdWFscyhuZXh0TWFwW2lkXS5sYXllcikgfHxcbiAgICAgIHByZXZNYXBbaWRdLmJlZm9yZSAhPT0gbmV4dE1hcFtpZF0uYmVmb3JlXG4gICAgKSB7XG4gICAgICAvLyBUaGlzIGxheWVyIGlzIGJlaW5nIGNoYW5nZWQuXG4gICAgICB1cGRhdGVzLnB1c2gobmV4dE1hcFtpZF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge3VwZGF0ZXM6IHVwZGF0ZXMsIGV4aXRpbmc6IGV4aXRpbmd9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkaWZmU3R5bGUocHJldlN0eWxlLCBuZXh0U3R5bGUpIHtcbiAgcmV0dXJuIHtcbiAgICBzb3VyY2VzRGlmZjogZGlmZlNvdXJjZXMocHJldlN0eWxlLCBuZXh0U3R5bGUpLFxuICAgIGxheWVyc0RpZmY6IGRpZmZMYXllcnMocHJldlN0eWxlLCBuZXh0U3R5bGUpXG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Rpc3QvdXRpbHMvZGlmZi1zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){"use strict";eval("\n//      \n\nconst UnitBezier = __webpack_require__(/*! unitbezier */ 48);\nconst Coordinate = __webpack_require__(/*! ../geo/coordinate */ 12);\nconst Point = __webpack_require__(/*! point-geometry */ 22);\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexports.easeCubicInOut = function(t        )         {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n};\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexports.bezier = function(p1x        , p1y        , p2x        , p2y        )                        {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t        ) {\n        return bezier.solve(t);\n    };\n};\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexports.ease = exports.bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexports.clamp = function (n        , min        , max        )         {\n    return Math.min(max, Math.max(min, n));\n};\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexports.wrap = function (n        , min        , max        )         {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n};\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexports.asyncAll = function (array            , fn          , callback          ) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = result;\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n};\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexports.values = function (obj        )                {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n};\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexports.keysDifference = function (obj        , other        )                {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n};\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param {...Object} sources sources from which properties are pulled\n * @private\n */\n// eslint-disable-next-line no-unused-vars\nexports.extend = function (dest        , source0        , source1         , source2         )         {\n    for (let i = 1; i < arguments.length; i++) {\n        const src = arguments[i];\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n};\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexports.pick = function (src        , properties               )         {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n};\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexports.uniqueId = function ()         {\n    return id++;\n};\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexports.bindAll = function(fns               , context        )       {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n};\n\n/**\n * Given a list of coordinates, get their center as a coordinate.\n *\n * @returns centerpoint\n * @private\n */\nexports.getCoordinatesCenter = function(coords                   )             {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    for (let i = 0; i < coords.length; i++) {\n        minX = Math.min(minX, coords[i].column);\n        minY = Math.min(minY, coords[i].row);\n        maxX = Math.max(maxX, coords[i].column);\n        maxY = Math.max(maxY, coords[i].row);\n    }\n\n    const dx = maxX - minX;\n    const dy = maxY - minY;\n    const dMax = Math.max(dx, dy);\n    return new Coordinate((minX + maxX) / 2, (minY + maxY) / 2, 0)\n        .zoomTo(Math.floor(-Math.log(dMax) / Math.LN2));\n};\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexports.endsWith = function(string        , suffix        )          {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n};\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexports.mapObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n};\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexports.filterObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n};\n\n/**\n * Deeply compares two object literals.\n *\n * @private\n */\nexports.deepEqual = function(a        , b        )          {\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!exports.deepEqual(a[i], b[i])) return false;\n        }\n        return true;\n    }\n    if (typeof a === 'object' && a !== null && b !== null) {\n        if (!(typeof b === 'object')) return false;\n        const keys = Object.keys(a);\n        if (keys.length !== Object.keys(b).length) return false;\n        for (const key in a) {\n            if (!exports.deepEqual(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a === b;\n};\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexports.clone = function   (input   )    {\n    if (Array.isArray(input)) {\n        return input.map(exports.clone);\n    } else if (typeof input === 'object' && input) {\n        return ((exports.mapObject(input, exports.clone)     )   );\n    } else {\n        return input;\n    }\n};\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexports.arraysIntersect = function(a            , b            )          {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n};\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory = {};\nexports.warnOnce = function(message        )       {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n};\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexports.isCounterClockwise = function(a       , b       , c       )          {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n};\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @param ring Exterior or interior ring\n */\nexports.calculateSignedArea = function(ring              )         {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n};\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexports.isClosedPolygon = function(points              )          {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return (Math.abs(exports.calculateSignedArea(points)) > 0.01);\n};\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexports.sphericalToCartesian = function(spherical               )                {\n    const r = spherical[0];\n    let azimuthal = spherical[1],\n        polar = spherical[2];\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0 when really this is 90 (/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    // spherical to cartesian (x, y, z)\n    return [\n        r * Math.cos(azimuthal) * Math.sin(polar),\n        r * Math.sin(azimuthal) * Math.sin(polar),\n        r * Math.cos(polar)\n    ];\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy91dGlsL3V0aWwuanM/MWViMCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4vLyAgICAgIFxuXG5jb25zdCBVbml0QmV6aWVyID0gcmVxdWlyZSgndW5pdGJlemllcicpO1xuY29uc3QgQ29vcmRpbmF0ZSA9IHJlcXVpcmUoJy4uL2dlby9jb29yZGluYXRlJyk7XG5jb25zdCBQb2ludCA9IHJlcXVpcmUoJ3BvaW50LWdlb21ldHJ5Jyk7XG5cbi8qKlxuICogR2l2ZW4gYSB2YWx1ZSBgdGAgdGhhdCB2YXJpZXMgYmV0d2VlbiAwIGFuZCAxLCByZXR1cm5cbiAqIGFuIGludGVycG9sYXRpb24gZnVuY3Rpb24gdGhhdCBlYXNlcyBiZXR3ZWVuIDAgYW5kIDEgaW4gYSBwbGVhc2luZ1xuICogY3ViaWMgaW4tb3V0IGZhc2hpb24uXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5lYXNlQ3ViaWNJbk91dCA9IGZ1bmN0aW9uKHQgICAgICAgICkgICAgICAgICB7XG4gICAgaWYgKHQgPD0gMCkgcmV0dXJuIDA7XG4gICAgaWYgKHQgPj0gMSkgcmV0dXJuIDE7XG4gICAgY29uc3QgdDIgPSB0ICogdCxcbiAgICAgICAgdDMgPSB0MiAqIHQ7XG4gICAgcmV0dXJuIDQgKiAodCA8IDAuNSA/IHQzIDogMyAqICh0IC0gdDIpICsgdDMgLSAwLjc1KTtcbn07XG5cbi8qKlxuICogR2l2ZW4gZ2l2ZW4gKHgsIHkpLCAoeDEsIHkxKSBjb250cm9sIHBvaW50cyBmb3IgYSBiZXppZXIgY3VydmUsXG4gKiByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGludGVycG9sYXRlcyBhbG9uZyB0aGF0IGN1cnZlLlxuICpcbiAqIEBwYXJhbSBwMXggY29udHJvbCBwb2ludCAxIHggY29vcmRpbmF0ZVxuICogQHBhcmFtIHAxeSBjb250cm9sIHBvaW50IDEgeSBjb29yZGluYXRlXG4gKiBAcGFyYW0gcDJ4IGNvbnRyb2wgcG9pbnQgMiB4IGNvb3JkaW5hdGVcbiAqIEBwYXJhbSBwMnkgY29udHJvbCBwb2ludCAyIHkgY29vcmRpbmF0ZVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5iZXppZXIgPSBmdW5jdGlvbihwMXggICAgICAgICwgcDF5ICAgICAgICAsIHAyeCAgICAgICAgLCBwMnkgICAgICAgICkgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgY29uc3QgYmV6aWVyID0gbmV3IFVuaXRCZXppZXIocDF4LCBwMXksIHAyeCwgcDJ5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCAgICAgICAgKSB7XG4gICAgICAgIHJldHVybiBiZXppZXIuc29sdmUodCk7XG4gICAgfTtcbn07XG5cbi8qKlxuICogQSBkZWZhdWx0IGJlemllci1jdXJ2ZSBwb3dlcmVkIGVhc2luZyBmdW5jdGlvbiB3aXRoXG4gKiBjb250cm9sIHBvaW50cyAoMC4yNSwgMC4xKSBhbmQgKDAuMjUsIDEpXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5lYXNlID0gZXhwb3J0cy5iZXppZXIoMC4yNSwgMC4xLCAwLjI1LCAxKTtcblxuLyoqXG4gKiBjb25zdHJhaW4gbiB0byB0aGUgZ2l2ZW4gcmFuZ2UgdmlhIG1pbiArIG1heFxuICpcbiAqIEBwYXJhbSBuIHZhbHVlXG4gKiBAcGFyYW0gbWluIHRoZSBtaW5pbXVtIHZhbHVlIHRvIGJlIHJldHVybmVkXG4gKiBAcGFyYW0gbWF4IHRoZSBtYXhpbXVtIHZhbHVlIHRvIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB0aGUgY2xhbXBlZCB2YWx1ZVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5jbGFtcCA9IGZ1bmN0aW9uIChuICAgICAgICAsIG1pbiAgICAgICAgLCBtYXggICAgICAgICkgICAgICAgICB7XG4gICAgcmV0dXJuIE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCBuKSk7XG59O1xuXG4vKipcbiAqIGNvbnN0cmFpbiBuIHRvIHRoZSBnaXZlbiByYW5nZSwgZXhjbHVkaW5nIHRoZSBtaW5pbXVtLCB2aWEgbW9kdWxhciBhcml0aG1ldGljXG4gKlxuICogQHBhcmFtIG4gdmFsdWVcbiAqIEBwYXJhbSBtaW4gdGhlIG1pbmltdW0gdmFsdWUgdG8gYmUgcmV0dXJuZWQsIGV4Y2x1c2l2ZVxuICogQHBhcmFtIG1heCB0aGUgbWF4aW11bSB2YWx1ZSB0byBiZSByZXR1cm5lZCwgaW5jbHVzaXZlXG4gKiBAcmV0dXJucyBjb25zdHJhaW5lZCBudW1iZXJcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydHMud3JhcCA9IGZ1bmN0aW9uIChuICAgICAgICAsIG1pbiAgICAgICAgLCBtYXggICAgICAgICkgICAgICAgICB7XG4gICAgY29uc3QgZCA9IG1heCAtIG1pbjtcbiAgICBjb25zdCB3ID0gKChuIC0gbWluKSAlIGQgKyBkKSAlIGQgKyBtaW47XG4gICAgcmV0dXJuICh3ID09PSBtaW4pID8gbWF4IDogdztcbn07XG5cbi8qXG4gKiBDYWxsIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBvbiBhbiBhcnJheSBvZiBhcmd1bWVudHMsXG4gKiBjYWxsaW5nIGBjYWxsYmFja2Agd2l0aCB0aGUgY29tcGxldGVkIHJlc3VsdHMgb2YgYWxsIGNhbGxzLlxuICpcbiAqIEBwYXJhbSBhcnJheSBpbnB1dCB0byBlYWNoIGNhbGwgb2YgdGhlIGFzeW5jIGZ1bmN0aW9uLlxuICogQHBhcmFtIGZuIGFuIGFzeW5jIGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlIChkYXRhLCBjYWxsYmFjaylcbiAqIEBwYXJhbSBjYWxsYmFjayBhIGNhbGxiYWNrIHJ1biBhZnRlciBhbGwgYXN5bmMgd29yayBpcyBkb25lLlxuICogY2FsbGVkIHdpdGggYW4gYXJyYXksIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgZWFjaCBhc3luYyBjYWxsLlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5hc3luY0FsbCA9IGZ1bmN0aW9uIChhcnJheSAgICAgICAgICAgICwgZm4gICAgICAgICAgLCBjYWxsYmFjayAgICAgICAgICApIHtcbiAgICBpZiAoIWFycmF5Lmxlbmd0aCkgeyByZXR1cm4gY2FsbGJhY2sobnVsbCwgW10pOyB9XG4gICAgbGV0IHJlbWFpbmluZyA9IGFycmF5Lmxlbmd0aDtcbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KGFycmF5Lmxlbmd0aCk7XG4gICAgbGV0IGVycm9yID0gbnVsbDtcbiAgICBhcnJheS5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XG4gICAgICAgIGZuKGl0ZW0sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikgZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSBjYWxsYmFjayhlcnJvciwgcmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuLypcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QudmFsdWVzLiBOb3QgZnVsbHkgc3BlYyBjb21wbGlhbnQsIGJ1dCB3ZSBkb24ndFxuICogbmVlZCBpdCB0byBiZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnRzLnZhbHVlcyA9IGZ1bmN0aW9uIChvYmogICAgICAgICkgICAgICAgICAgICAgICAge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgcmVzdWx0LnB1c2gob2JqW2tdKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qXG4gKiBDb21wdXRlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGtleXMgaW4gb25lIG9iamVjdCBhbmQgdGhlIGtleXNcbiAqIGluIGFub3RoZXIgb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIGtleXMgZGlmZmVyZW5jZVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5rZXlzRGlmZmVyZW5jZSA9IGZ1bmN0aW9uIChvYmogICAgICAgICwgb3RoZXIgICAgICAgICkgICAgICAgICAgICAgICAge1xuICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGkgaW4gb2JqKSB7XG4gICAgICAgIGlmICghKGkgaW4gb3RoZXIpKSB7XG4gICAgICAgICAgICBkaWZmZXJlbmNlLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRpZmZlcmVuY2U7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgZGVzdGluYXRpb24gb2JqZWN0IGFuZCBvcHRpb25hbGx5IG1hbnkgc291cmNlIG9iamVjdHMsXG4gKiBjb3B5IGFsbCBwcm9wZXJ0aWVzIGZyb20gdGhlIHNvdXJjZSBvYmplY3RzIGludG8gdGhlIGRlc3RpbmF0aW9uLlxuICogVGhlIGxhc3Qgc291cmNlIG9iamVjdCBnaXZlbiBvdmVycmlkZXMgcHJvcGVydGllcyBmcm9tIHByZXZpb3VzXG4gKiBzb3VyY2Ugb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gZGVzdCBkZXN0aW5hdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBzb3VyY2VzIHNvdXJjZXMgZnJvbSB3aGljaCBwcm9wZXJ0aWVzIGFyZSBwdWxsZWRcbiAqIEBwcml2YXRlXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbiAoZGVzdCAgICAgICAgLCBzb3VyY2UwICAgICAgICAsIHNvdXJjZTEgICAgICAgICAsIHNvdXJjZTIgICAgICAgICApICAgICAgICAge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNyYyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIHNyYykge1xuICAgICAgICAgICAgZGVzdFtrXSA9IHNyY1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn07XG5cbi8qKlxuICogR2l2ZW4gYW4gb2JqZWN0IGFuZCBhIG51bWJlciBvZiBwcm9wZXJ0aWVzIGFzIHN0cmluZ3MsIHJldHVybiB2ZXJzaW9uXG4gKiBvZiB0aGF0IG9iamVjdCB3aXRoIG9ubHkgdGhvc2UgcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0gc3JjIHRoZSBvYmplY3RcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGNob3NlblxuICogdG8gYXBwZWFyIG9uIHRoZSByZXN1bHRpbmcgb2JqZWN0LlxuICogQHJldHVybnMgb2JqZWN0IHdpdGggbGltaXRlZCBwcm9wZXJ0aWVzLlxuICogQGV4YW1wbGVcbiAqIHZhciBmb28gPSB7IG5hbWU6ICdDaGFybGllJywgYWdlOiAxMCB9O1xuICogdmFyIGp1c3ROYW1lID0gcGljayhmb28sIFsnbmFtZSddKTtcbiAqIC8vIGp1c3ROYW1lID0geyBuYW1lOiAnQ2hhcmxpZScgfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5waWNrID0gZnVuY3Rpb24gKHNyYyAgICAgICAgLCBwcm9wZXJ0aWVzICAgICAgICAgICAgICAgKSAgICAgICAgIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgayA9IHByb3BlcnRpZXNbaV07XG4gICAgICAgIGlmIChrIGluIHNyYykge1xuICAgICAgICAgICAgcmVzdWx0W2tdID0gc3JjW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5sZXQgaWQgPSAxO1xuXG4vKipcbiAqIFJldHVybiBhIHVuaXF1ZSBudW1lcmljIGlkLCBzdGFydGluZyBhdCAxIGFuZCBpbmNyZW1lbnRpbmcgd2l0aFxuICogZWFjaCBjYWxsLlxuICpcbiAqIEByZXR1cm5zIHVuaXF1ZSBudW1lcmljIGlkLlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy51bmlxdWVJZCA9IGZ1bmN0aW9uICgpICAgICAgICAge1xuICAgIHJldHVybiBpZCsrO1xufTtcblxuLyoqXG4gKiBHaXZlbiBhbiBhcnJheSBvZiBtZW1iZXIgZnVuY3Rpb24gbmFtZXMgYXMgc3RyaW5ncywgcmVwbGFjZSBhbGwgb2YgdGhlbVxuICogd2l0aCBib3VuZCB2ZXJzaW9ucyB0aGF0IHdpbGwgYWx3YXlzIHJlZmVyIHRvIGBjb250ZXh0YCBhcyBgdGhpc2AuIFRoaXNcbiAqIGlzIHVzZWZ1bCBmb3IgY2xhc3NlcyB3aGVyZSBvdGhlcndpc2UgZXZlbnQgYmluZGluZ3Mgd291bGQgcmVhc3NpZ25cbiAqIGB0aGlzYCB0byB0aGUgZXZlbnRlZCBvYmplY3Qgb3Igc29tZSBvdGhlciB2YWx1ZTogdGhpcyBsZXRzIHlvdSBlbnN1cmVcbiAqIHRoZSBgdGhpc2AgdmFsdWUgYWx3YXlzLlxuICpcbiAqIEBwYXJhbSBmbnMgbGlzdCBvZiBtZW1iZXIgZnVuY3Rpb24gbmFtZXNcbiAqIEBwYXJhbSBjb250ZXh0IHRoZSBjb250ZXh0IHZhbHVlXG4gKiBAZXhhbXBsZVxuICogZnVuY3Rpb24gTXlDbGFzcygpIHtcbiAqICAgYmluZEFsbChbJ29udGltZXInXSwgdGhpcyk7XG4gKiAgIHRoaXMubmFtZSA9ICdUb20nO1xuICogfVxuICogTXlDbGFzcy5wcm90b3R5cGUub250aW1lciA9IGZ1bmN0aW9uKCkge1xuICogICBhbGVydCh0aGlzLm5hbWUpO1xuICogfTtcbiAqIHZhciBteUNsYXNzID0gbmV3IE15Q2xhc3MoKTtcbiAqIHNldFRpbWVvdXQobXlDbGFzcy5vbnRpbWVyLCAxMDApO1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5iaW5kQWxsID0gZnVuY3Rpb24oZm5zICAgICAgICAgICAgICAgLCBjb250ZXh0ICAgICAgICApICAgICAgIHtcbiAgICBmbnMuZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgICAgaWYgKCFjb250ZXh0W2ZuXSkgeyByZXR1cm47IH1cbiAgICAgICAgY29udGV4dFtmbl0gPSBjb250ZXh0W2ZuXS5iaW5kKGNvbnRleHQpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBHaXZlbiBhIGxpc3Qgb2YgY29vcmRpbmF0ZXMsIGdldCB0aGVpciBjZW50ZXIgYXMgYSBjb29yZGluYXRlLlxuICpcbiAqIEByZXR1cm5zIGNlbnRlcnBvaW50XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnRzLmdldENvb3JkaW5hdGVzQ2VudGVyID0gZnVuY3Rpb24oY29vcmRzICAgICAgICAgICAgICAgICAgICkgICAgICAgICAgICAge1xuICAgIGxldCBtaW5YID0gSW5maW5pdHk7XG4gICAgbGV0IG1pblkgPSBJbmZpbml0eTtcbiAgICBsZXQgbWF4WCA9IC1JbmZpbml0eTtcbiAgICBsZXQgbWF4WSA9IC1JbmZpbml0eTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBjb29yZHNbaV0uY29sdW1uKTtcbiAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIGNvb3Jkc1tpXS5yb3cpO1xuICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgY29vcmRzW2ldLmNvbHVtbik7XG4gICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBjb29yZHNbaV0ucm93KTtcbiAgICB9XG5cbiAgICBjb25zdCBkeCA9IG1heFggLSBtaW5YO1xuICAgIGNvbnN0IGR5ID0gbWF4WSAtIG1pblk7XG4gICAgY29uc3QgZE1heCA9IE1hdGgubWF4KGR4LCBkeSk7XG4gICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKChtaW5YICsgbWF4WCkgLyAyLCAobWluWSArIG1heFkpIC8gMiwgMClcbiAgICAgICAgLnpvb21UbyhNYXRoLmZsb29yKC1NYXRoLmxvZyhkTWF4KSAvIE1hdGguTE4yKSk7XG59O1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHN0cmluZyBlbmRzIHdpdGggYSBwYXJ0aWN1bGFyIHN1YnN0cmluZ1xuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydHMuZW5kc1dpdGggPSBmdW5jdGlvbihzdHJpbmcgICAgICAgICwgc3VmZml4ICAgICAgICApICAgICAgICAgIHtcbiAgICByZXR1cm4gc3RyaW5nLmluZGV4T2Yoc3VmZml4LCBzdHJpbmcubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgIT09IC0xO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IGJ5IG1hcHBpbmcgYWxsIHRoZSB2YWx1ZXMgb2YgYW4gZXhpc3Rpbmcgb2JqZWN0IHdoaWxlXG4gKiBwcmVzZXJ2aW5nIHRoZWlyIGtleXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5tYXBPYmplY3QgPSBmdW5jdGlvbihpbnB1dCAgICAgICAgLCBpdGVyYXRvciAgICAgICAgICAsIGNvbnRleHQgICAgICAgICApICAgICAgICAge1xuICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGlucHV0KSB7XG4gICAgICAgIG91dHB1dFtrZXldID0gaXRlcmF0b3IuY2FsbChjb250ZXh0IHx8IHRoaXMsIGlucHV0W2tleV0sIGtleSwgaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gb2JqZWN0IGJ5IGZpbHRlcmluZyBvdXQgdmFsdWVzIG9mIGFuIGV4aXN0aW5nIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnRzLmZpbHRlck9iamVjdCA9IGZ1bmN0aW9uKGlucHV0ICAgICAgICAsIGl0ZXJhdG9yICAgICAgICAgICwgY29udGV4dCAgICAgICAgICkgICAgICAgICB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5wdXQpIHtcbiAgICAgICAgaWYgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCB8fCB0aGlzLCBpbnB1dFtrZXldLCBrZXksIGlucHV0KSkge1xuICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBpbnB1dFtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vKipcbiAqIERlZXBseSBjb21wYXJlcyB0d28gb2JqZWN0IGxpdGVyYWxzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydHMuZGVlcEVxdWFsID0gZnVuY3Rpb24oYSAgICAgICAgLCBiICAgICAgICApICAgICAgICAgIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYikgfHwgYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFleHBvcnRzLmRlZXBFcXVhbChhW2ldLCBiW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGEgPT09ICdvYmplY3QnICYmIGEgIT09IG51bGwgJiYgYiAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoISh0eXBlb2YgYiA9PT0gJ29iamVjdCcpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICAgICAgaWYgKCFleHBvcnRzLmRlZXBFcXVhbChhW2tleV0sIGJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGEgPT09IGI7XG59O1xuXG4vKipcbiAqIERlZXBseSBjbG9uZXMgdHdvIG9iamVjdHMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0cy5jbG9uZSA9IGZ1bmN0aW9uICAgKGlucHV0ICAgKSAgICB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5tYXAoZXhwb3J0cy5jbG9uZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmIGlucHV0KSB7XG4gICAgICAgIHJldHVybiAoKGV4cG9ydHMubWFwT2JqZWN0KGlucHV0LCBleHBvcnRzLmNsb25lKSAgICAgKSAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdHdvIGFycmF5cyBoYXZlIGF0IGxlYXN0IG9uZSBjb21tb24gZWxlbWVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnRzLmFycmF5c0ludGVyc2VjdCA9IGZ1bmN0aW9uKGEgICAgICAgICAgICAsIGIgICAgICAgICAgICApICAgICAgICAgIHtcbiAgICBmb3IgKGxldCBsID0gMDsgbCA8IGEubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgaWYgKGIuaW5kZXhPZihhW2xdKSA+PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBQcmludCBhIHdhcm5pbmcgbWVzc2FnZSB0byB0aGUgY29uc29sZSBhbmQgZW5zdXJlIGR1cGxpY2F0ZSB3YXJuaW5nIG1lc3NhZ2VzXG4gKiBhcmUgbm90IHByaW50ZWQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuY29uc3Qgd2Fybk9uY2VIaXN0b3J5ID0ge307XG5leHBvcnRzLndhcm5PbmNlID0gZnVuY3Rpb24obWVzc2FnZSAgICAgICAgKSAgICAgICB7XG4gICAgaWYgKCF3YXJuT25jZUhpc3RvcnlbbWVzc2FnZV0pIHtcbiAgICAgICAgLy8gY29uc29sZSBpc24ndCBkZWZpbmVkIGluIHNvbWUgV2ViV29ya2Vycywgc2VlICMyNTU4XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIikgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICB3YXJuT25jZUhpc3RvcnlbbWVzc2FnZV0gPSB0cnVlO1xuICAgIH1cbn07XG5cbi8qKlxuICogSW5kaWNhdGVzIGlmIHRoZSBwcm92aWRlZCBQb2ludHMgYXJlIGluIGEgY291bnRlciBjbG9ja3dpc2UgKHRydWUpIG9yIGNsb2Nrd2lzZSAoZmFsc2UpIG9yZGVyXG4gKlxuICogQHJldHVybnMgdHJ1ZSBmb3IgYSBjb3VudGVyIGNsb2Nrd2lzZSBzZXQgb2YgcG9pbnRzXG4gKi9cbi8vIGh0dHA6Ly9icnljZWJvZS5jb20vMjAwNi8xMC8yMy9saW5lLXNlZ21lbnQtaW50ZXJzZWN0aW9uLWFsZ29yaXRobS9cbmV4cG9ydHMuaXNDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24oYSAgICAgICAsIGIgICAgICAgLCBjICAgICAgICkgICAgICAgICAge1xuICAgIHJldHVybiAoYy55IC0gYS55KSAqIChiLnggLSBhLngpID4gKGIueSAtIGEueSkgKiAoYy54IC0gYS54KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2lnbmVkIGFyZWEgZm9yIHRoZSBwb2x5Z29uIHJpbmcuICBQb3N0aXZlIGFyZWFzIGFyZSBleHRlcmlvciByaW5ncyBhbmRcbiAqIGhhdmUgYSBjbG9ja3dpc2Ugd2luZGluZy4gIE5lZ2F0aXZlIGFyZWFzIGFyZSBpbnRlcmlvciByaW5ncyBhbmQgaGF2ZSBhIGNvdW50ZXIgY2xvY2t3aXNlXG4gKiBvcmRlcmluZy5cbiAqXG4gKiBAcGFyYW0gcmluZyBFeHRlcmlvciBvciBpbnRlcmlvciByaW5nXG4gKi9cbmV4cG9ydHMuY2FsY3VsYXRlU2lnbmVkQXJlYSA9IGZ1bmN0aW9uKHJpbmcgICAgICAgICAgICAgICkgICAgICAgICB7XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHJpbmcubGVuZ3RoLCBqID0gbGVuIC0gMSwgcDEsIHAyOyBpIDwgbGVuOyBqID0gaSsrKSB7XG4gICAgICAgIHAxID0gcmluZ1tpXTtcbiAgICAgICAgcDIgPSByaW5nW2pdO1xuICAgICAgICBzdW0gKz0gKHAyLnggLSBwMS54KSAqIChwMS55ICsgcDIueSk7XG4gICAgfVxuICAgIHJldHVybiBzdW07XG59O1xuXG4vKipcbiAqIERldGVjdHMgY2xvc2VkIHBvbHlnb25zLCBmaXJzdCArIGxhc3QgcG9pbnQgYXJlIGVxdWFsXG4gKlxuICogQHBhcmFtIHBvaW50cyBhcnJheSBvZiBwb2ludHNcbiAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgcG9pbnRzIGFyZSBhIGNsb3NlZCBwb2x5Z29uXG4gKi9cbmV4cG9ydHMuaXNDbG9zZWRQb2x5Z29uID0gZnVuY3Rpb24ocG9pbnRzICAgICAgICAgICAgICApICAgICAgICAgIHtcbiAgICAvLyBJZiBpdCBpcyAyIHBvaW50cyB0aGF0IGFyZSB0aGUgc2FtZSB0aGVuIGl0IGlzIGEgcG9pbnRcbiAgICAvLyBJZiBpdCBpcyAzIHBvaW50cyB3aXRoIHN0YXJ0IGFuZCBlbmQgdGhlIHNhbWUgdGhlbiBpdCBpcyBhIGxpbmVcbiAgICBpZiAocG9pbnRzLmxlbmd0aCA8IDQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IHAxID0gcG9pbnRzWzBdO1xuICAgIGNvbnN0IHAyID0gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXTtcblxuICAgIGlmIChNYXRoLmFicyhwMS54IC0gcDIueCkgPiAwIHx8XG4gICAgICAgIE1hdGguYWJzKHAxLnkgLSBwMi55KSA+IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHBvbHlnb24gc2ltcGxpZmljYXRpb24gY2FuIHByb2R1Y2UgcG9seWdvbnMgd2l0aCB6ZXJvIGFyZWEgYW5kIG1vcmUgdGhhbiAzIHBvaW50c1xuICAgIHJldHVybiAoTWF0aC5hYnMoZXhwb3J0cy5jYWxjdWxhdGVTaWduZWRBcmVhKHBvaW50cykpID4gMC4wMSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHNwaGVyaWNhbCBjb29yZGluYXRlcyB0byBjYXJ0ZXNpYW4gY29vcmRpbmF0ZXMuXG4gKlxuICogQHBhcmFtIHNwaGVyaWNhbCBTcGhlcmljYWwgY29vcmRpbmF0ZXMsIGluIFtyYWRpYWwsIGF6aW11dGhhbCwgcG9sYXJdXG4gKiBAcmV0dXJuIGNhcnRlc2lhbiBjb29yZGluYXRlcyBpbiBbeCwgeSwgel1cbiAqL1xuXG5leHBvcnRzLnNwaGVyaWNhbFRvQ2FydGVzaWFuID0gZnVuY3Rpb24oc3BoZXJpY2FsICAgICAgICAgICAgICAgKSAgICAgICAgICAgICAgICB7XG4gICAgY29uc3QgciA9IHNwaGVyaWNhbFswXTtcbiAgICBsZXQgYXppbXV0aGFsID0gc3BoZXJpY2FsWzFdLFxuICAgICAgICBwb2xhciA9IHNwaGVyaWNhbFsyXTtcbiAgICAvLyBXZSBhYnN0cmFjdCBcIm5vcnRoXCIvXCJ1cFwiIChjb21wYXNzLXdpc2UpIHRvIGJlIDDCsCB3aGVuIHJlYWxseSB0aGlzIGlzIDkwwrAgKM+ALzIpOlxuICAgIC8vIGNvcnJlY3QgZm9yIHRoYXQgaGVyZVxuICAgIGF6aW11dGhhbCArPSA5MDtcblxuICAgIC8vIENvbnZlcnQgYXppbXV0aGFsIGFuZCBwb2xhciBhbmdsZXMgdG8gcmFkaWFuc1xuICAgIGF6aW11dGhhbCAqPSBNYXRoLlBJIC8gMTgwO1xuICAgIHBvbGFyICo9IE1hdGguUEkgLyAxODA7XG5cbiAgICAvLyBzcGhlcmljYWwgdG8gY2FydGVzaWFuICh4LCB5LCB6KVxuICAgIHJldHVybiBbXG4gICAgICAgIHIgKiBNYXRoLmNvcyhhemltdXRoYWwpICogTWF0aC5zaW4ocG9sYXIpLFxuICAgICAgICByICogTWF0aC5zaW4oYXppbXV0aGFsKSAqIE1hdGguc2luKHBvbGFyKSxcbiAgICAgICAgciAqIE1hdGguY29zKHBvbGFyKVxuICAgIF07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hcGJveC1nbC9qcy91dGlsL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");
},function(module,exports){eval('var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function("return this")() || (1,eval)("this");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === "object")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it\'s\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzPzM2OTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_21__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJkMy1zZWxlY3Rpb25cIj8wOTgyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yMV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZDMtc2VsZWN0aW9uXCJcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_22__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwb2ludC1nZW9tZXRyeVwiPzk3YTMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIyX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJwb2ludC1nZW9tZXRyeVwiXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9")},,function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__ = __webpack_require__(/*! react-addons-shallow-compare */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__static_map__ = __webpack_require__(/*! ./static-map */ 16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__map_controls__ = __webpack_require__(/*! ./map-controls */ 15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_transform__ = __webpack_require__(/*! ../utils/transform */ 9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mapbox_gl__ = __webpack_require__(/*! mapbox-gl */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_mapbox_gl__);\n\n\n\n\n\n\n\n\n// import {unprojectFromTransform} from \'./utils/transform\';\n\n\nvar InteractiveMap = (function (Component) {\n  function InteractiveMap(props) {\n    Component.call(this, props);\n    this.state = {viewport: {}};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_autobind__["a" /* default */])(this);\n  }\n\n  if ( Component ) InteractiveMap.__proto__ = Component;\n  InteractiveMap.prototype = Object.create( Component && Component.prototype );\n  InteractiveMap.prototype.constructor = InteractiveMap;\n\n  // Pure render\n  InteractiveMap.supported = function supported () {\n    return __WEBPACK_IMPORTED_MODULE_6_mapbox_gl___default.a.supported();\n  };\n\n  InteractiveMap.prototype.shouldComponentUpdate = function shouldComponentUpdate (nextProps, nextState) {\n    return __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default()(this, nextProps, nextState);\n  };\n\n  InteractiveMap.prototype._getMap = function _getMap () {\n    return this.refs.map._map;\n  };\n\n  // Uses map to unproject a coordinate\n  // TODO - replace with Viewport\n  InteractiveMap.prototype._unproject = function _unproject (pos) {\n    var ref = this._unprojectToLatLng(pos);\n    var lng = ref.lng;\n    var lat = ref.lat;\n    return [lng, lat];\n  };\n\n  InteractiveMap.prototype._unprojectToLatLng = function _unprojectToLatLng (pos) {\n    var map = this._getMap();\n    var point = new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_6_mapbox_gl__["Point"], [ null ].concat( pos) ));\n    var latLong = map.unproject(point);\n    return latLong;\n  };\n\n  // Uses map to get position for panning\n  // TODO - replace with Viewport\n  InteractiveMap.prototype._getLngLatAtPoint = function _getLngLatAtPoint (ref) {\n    var lngLat = ref.lngLat;\n    var pos = ref.pos;\n\n    // assert(point);\n    var map = this._getMap();\n    var transform = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__utils_transform__["c" /* cloneTransform */])(map.transform);\n    var mapboxPoint = new (Function.prototype.bind.apply( __WEBPACK_IMPORTED_MODULE_6_mapbox_gl__["Point"], [ null ].concat( pos) ));\n    // const around = unprojectFromTransform(transform, mapboxPoint);\n    transform.setLocationAtPoint(lngLat, mapboxPoint);\n    return [\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__utils_transform__["b" /* mod */])(transform.center.lng + 180, 360) - 180,\n      transform.center.lat\n    ];\n  };\n\n  InteractiveMap.prototype.render = function render () {\n    // TODO - do we still need this?\n    // let content = [];\n    // if (this.state.isSupported && this.props.onChangeViewport) {\n    //   content = (}\n\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( __WEBPACK_IMPORTED_MODULE_4__map_controls__["a" /* default */], Object.assign({},\n        this.props, { unproject: this._unproject, getLngLatAtPoint: this._getLngLatAtPoint }),\n\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( __WEBPACK_IMPORTED_MODULE_3__static_map__["a" /* default */], Object.assign({}, { ref: "map" }, this.props))\n\n      )\n    );\n  };\n\n  return InteractiveMap;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = InteractiveMap;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2NvbXBvbmVudHMvaW50ZXJhY3RpdmUtbWFwLmpzPzRkM2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2hhbGxvd0NvbXBhcmUgZnJvbSAncmVhY3QtYWRkb25zLXNoYWxsb3ctY29tcGFyZSc7XG5pbXBvcnQgYXV0b2JpbmQgZnJvbSAnLi4vdXRpbHMvYXV0b2JpbmQnO1xuXG5pbXBvcnQgU3RhdGljTWFwIGZyb20gJy4vc3RhdGljLW1hcCc7XG5pbXBvcnQgTWFwQ29udHJvbHMgZnJvbSAnLi9tYXAtY29udHJvbHMnO1xuXG5pbXBvcnQge21vZCwgY2xvbmVUcmFuc2Zvcm19IGZyb20gJy4uL3V0aWxzL3RyYW5zZm9ybSc7XG4vLyBpbXBvcnQge3VucHJvamVjdEZyb21UcmFuc2Zvcm19IGZyb20gJy4vdXRpbHMvdHJhbnNmb3JtJztcbmltcG9ydCBtYXBib3hnbCwge1BvaW50fSBmcm9tICdtYXBib3gtZ2wnO1xuXG52YXIgSW50ZXJhY3RpdmVNYXAgPSAoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICBmdW5jdGlvbiBJbnRlcmFjdGl2ZU1hcChwcm9wcykge1xuICAgIENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge3ZpZXdwb3J0OiB7fX07XG4gICAgYXV0b2JpbmQodGhpcyk7XG4gIH1cblxuICBpZiAoIENvbXBvbmVudCApIEludGVyYWN0aXZlTWFwLl9fcHJvdG9fXyA9IENvbXBvbmVudDtcbiAgSW50ZXJhY3RpdmVNYXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29tcG9uZW50ICYmIENvbXBvbmVudC5wcm90b3R5cGUgKTtcbiAgSW50ZXJhY3RpdmVNYXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50ZXJhY3RpdmVNYXA7XG5cbiAgLy8gUHVyZSByZW5kZXJcbiAgSW50ZXJhY3RpdmVNYXAuc3VwcG9ydGVkID0gZnVuY3Rpb24gc3VwcG9ydGVkICgpIHtcbiAgICByZXR1cm4gbWFwYm94Z2wuc3VwcG9ydGVkKCk7XG4gIH07XG5cbiAgSW50ZXJhY3RpdmVNYXAucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZSAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICByZXR1cm4gc2hhbGxvd0NvbXBhcmUodGhpcywgbmV4dFByb3BzLCBuZXh0U3RhdGUpO1xuICB9O1xuXG4gIEludGVyYWN0aXZlTWFwLnByb3RvdHlwZS5fZ2V0TWFwID0gZnVuY3Rpb24gX2dldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmcy5tYXAuX21hcDtcbiAgfTtcblxuICAvLyBVc2VzIG1hcCB0byB1bnByb2plY3QgYSBjb29yZGluYXRlXG4gIC8vIFRPRE8gLSByZXBsYWNlIHdpdGggVmlld3BvcnRcbiAgSW50ZXJhY3RpdmVNYXAucHJvdG90eXBlLl91bnByb2plY3QgPSBmdW5jdGlvbiBfdW5wcm9qZWN0IChwb3MpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5fdW5wcm9qZWN0VG9MYXRMbmcocG9zKTtcbiAgICB2YXIgbG5nID0gcmVmLmxuZztcbiAgICB2YXIgbGF0ID0gcmVmLmxhdDtcbiAgICByZXR1cm4gW2xuZywgbGF0XTtcbiAgfTtcblxuICBJbnRlcmFjdGl2ZU1hcC5wcm90b3R5cGUuX3VucHJvamVjdFRvTGF0TG5nID0gZnVuY3Rpb24gX3VucHJvamVjdFRvTGF0TG5nIChwb3MpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5fZ2V0TWFwKCk7XG4gICAgdmFyIHBvaW50ID0gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseSggUG9pbnQsIFsgbnVsbCBdLmNvbmNhdCggcG9zKSApKTtcbiAgICB2YXIgbGF0TG9uZyA9IG1hcC51bnByb2plY3QocG9pbnQpO1xuICAgIHJldHVybiBsYXRMb25nO1xuICB9O1xuXG4gIC8vIFVzZXMgbWFwIHRvIGdldCBwb3NpdGlvbiBmb3IgcGFubmluZ1xuICAvLyBUT0RPIC0gcmVwbGFjZSB3aXRoIFZpZXdwb3J0XG4gIEludGVyYWN0aXZlTWFwLnByb3RvdHlwZS5fZ2V0TG5nTGF0QXRQb2ludCA9IGZ1bmN0aW9uIF9nZXRMbmdMYXRBdFBvaW50IChyZWYpIHtcbiAgICB2YXIgbG5nTGF0ID0gcmVmLmxuZ0xhdDtcbiAgICB2YXIgcG9zID0gcmVmLnBvcztcblxuICAgIC8vIGFzc2VydChwb2ludCk7XG4gICAgdmFyIG1hcCA9IHRoaXMuX2dldE1hcCgpO1xuICAgIHZhciB0cmFuc2Zvcm0gPSBjbG9uZVRyYW5zZm9ybShtYXAudHJhbnNmb3JtKTtcbiAgICB2YXIgbWFwYm94UG9pbnQgPSBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KCBQb2ludCwgWyBudWxsIF0uY29uY2F0KCBwb3MpICkpO1xuICAgIC8vIGNvbnN0IGFyb3VuZCA9IHVucHJvamVjdEZyb21UcmFuc2Zvcm0odHJhbnNmb3JtLCBtYXBib3hQb2ludCk7XG4gICAgdHJhbnNmb3JtLnNldExvY2F0aW9uQXRQb2ludChsbmdMYXQsIG1hcGJveFBvaW50KTtcbiAgICByZXR1cm4gW1xuICAgICAgbW9kKHRyYW5zZm9ybS5jZW50ZXIubG5nICsgMTgwLCAzNjApIC0gMTgwLFxuICAgICAgdHJhbnNmb3JtLmNlbnRlci5sYXRcbiAgICBdO1xuICB9O1xuXG4gIEludGVyYWN0aXZlTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIC8vIFRPRE8gLSBkbyB3ZSBzdGlsbCBuZWVkIHRoaXM/XG4gICAgLy8gbGV0IGNvbnRlbnQgPSBbXTtcbiAgICAvLyBpZiAodGhpcy5zdGF0ZS5pc1N1cHBvcnRlZCAmJiB0aGlzLnByb3BzLm9uQ2hhbmdlVmlld3BvcnQpIHtcbiAgICAvLyAgIGNvbnRlbnQgPSAofVxuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoIE1hcENvbnRyb2xzLCBPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICB0aGlzLnByb3BzLCB7IHVucHJvamVjdDogdGhpcy5fdW5wcm9qZWN0LCBnZXRMbmdMYXRBdFBvaW50OiB0aGlzLl9nZXRMbmdMYXRBdFBvaW50IH0pLFxuXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoIFN0YXRpY01hcCwgT2JqZWN0LmFzc2lnbih7fSwgeyByZWY6IFwibWFwXCIgfSwgdGhpcy5wcm9wcykpXG5cbiAgICAgIClcbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcmFjdGl2ZU1hcDtcbn0oQ29tcG9uZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyYWN0aXZlTWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kaXN0L2NvbXBvbmVudHMvaW50ZXJhY3RpdmUtbWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_global_window__ = __webpack_require__(/*! global/window */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_global_window___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_global_window__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  redraw: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool.isRequired\n};\n\nvar CanvasOverlay = (function (Component) {\n  function CanvasOverlay () {\n    Component.apply(this, arguments);\n  }\n\n  if ( Component ) CanvasOverlay.__proto__ = Component;\n  CanvasOverlay.prototype = Object.create( Component && Component.prototype );\n  CanvasOverlay.prototype.constructor = CanvasOverlay;\n\n  CanvasOverlay.prototype.componentDidMount = function componentDidMount () {\n    this._redraw();\n  };\n\n  CanvasOverlay.prototype.componentDidUpdate = function componentDidUpdate () {\n    this._redraw();\n  };\n\n  CanvasOverlay.prototype._redraw = function _redraw () {\n    var pixelRatio = __WEBPACK_IMPORTED_MODULE_2_global_window___default.a.devicePixelRatio || 1;\n    var canvas = this.refs.overlay;\n    var ctx = canvas.getContext(\'2d\');\n    ctx.save();\n    ctx.scale(pixelRatio, pixelRatio);\n    var mercator = __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default()(this.props);\n    this.props.redraw({\n      width: this.props.width,\n      height: this.props.height,\n      ctx: ctx,\n      project: mercator.project,\n      unproject: mercator.unproject,\n      isDragging: this.props.isDragging\n    });\n    ctx.restore();\n  };\n\n  CanvasOverlay.prototype.render = function render () {\n    var pixelRatio = __WEBPACK_IMPORTED_MODULE_2_global_window___default.a.devicePixelRatio || 1;\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'canvas\', {\n        ref: "overlay", width: this.props.width * pixelRatio, height: this.props.height * pixelRatio, style: {\n          width: ((this.props.width) + "px"),\n          height: ((this.props.height) + "px"),\n          position: \'absolute\',\n          pointerEvents: \'none\',\n          left: 0,\n          top: 0\n        } })\n    );\n  };\n\n  return CanvasOverlay;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = CanvasOverlay;\n\nCanvasOverlay.propTypes = propTypes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L292ZXJsYXlzL2NhbnZhcy1vdmVybGF5LmpzPzVkNmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzLCBDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBWaWV3cG9ydE1lcmNhdG9yIGZyb20gJ3ZpZXdwb3J0LW1lcmNhdG9yLXByb2plY3QnO1xuaW1wb3J0IHdpbmRvdyBmcm9tICdnbG9iYWwvd2luZG93JztcblxudmFyIHByb3BUeXBlcyA9IHtcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGxhdGl0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGxvbmdpdHVkZTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICB6b29tOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHJlZHJhdzogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNEcmFnZ2luZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxufTtcblxudmFyIENhbnZhc092ZXJsYXkgPSAoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICBmdW5jdGlvbiBDYW52YXNPdmVybGF5ICgpIHtcbiAgICBDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGlmICggQ29tcG9uZW50ICkgQ2FudmFzT3ZlcmxheS5fX3Byb3RvX18gPSBDb21wb25lbnQ7XG4gIENhbnZhc092ZXJsYXkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29tcG9uZW50ICYmIENvbXBvbmVudC5wcm90b3R5cGUgKTtcbiAgQ2FudmFzT3ZlcmxheS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDYW52YXNPdmVybGF5O1xuXG4gIENhbnZhc092ZXJsYXkucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuX3JlZHJhdygpO1xuICB9O1xuXG4gIENhbnZhc092ZXJsYXkucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgdGhpcy5fcmVkcmF3KCk7XG4gIH07XG5cbiAgQ2FudmFzT3ZlcmxheS5wcm90b3R5cGUuX3JlZHJhdyA9IGZ1bmN0aW9uIF9yZWRyYXcgKCkge1xuICAgIHZhciBwaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5yZWZzLm92ZXJsYXk7XG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIHZhciBtZXJjYXRvciA9IFZpZXdwb3J0TWVyY2F0b3IodGhpcy5wcm9wcyk7XG4gICAgdGhpcy5wcm9wcy5yZWRyYXcoe1xuICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LFxuICAgICAgY3R4OiBjdHgsXG4gICAgICBwcm9qZWN0OiBtZXJjYXRvci5wcm9qZWN0LFxuICAgICAgdW5wcm9qZWN0OiBtZXJjYXRvci51bnByb2plY3QsXG4gICAgICBpc0RyYWdnaW5nOiB0aGlzLnByb3BzLmlzRHJhZ2dpbmdcbiAgICB9KTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9O1xuXG4gIENhbnZhc092ZXJsYXkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuICAgIHJldHVybiAoXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJywge1xuICAgICAgICByZWY6IFwib3ZlcmxheVwiLCB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCAqIHBpeGVsUmF0aW8sIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQgKiBwaXhlbFJhdGlvLCBzdHlsZToge1xuICAgICAgICAgIHdpZHRoOiAoKHRoaXMucHJvcHMud2lkdGgpICsgXCJweFwiKSxcbiAgICAgICAgICBoZWlnaHQ6ICgodGhpcy5wcm9wcy5oZWlnaHQpICsgXCJweFwiKSxcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICB0b3A6IDBcbiAgICAgICAgfSB9KVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIENhbnZhc092ZXJsYXk7XG59KENvbXBvbmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNPdmVybGF5O1xuXG5DYW52YXNPdmVybGF5LnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9vdmVybGF5cy9jYW52YXMtb3ZlcmxheS5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__(/*! ../config */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_immutable__ = __webpack_require__(/*! immutable */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_global_document__ = __webpack_require__(/*! global/document */ 11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_global_document___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_global_document__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\n\n\n\n\n\nfunction noop() {}\n\n// Makes working with SVG transforms a little nicer\nfunction svgTransform(props) {\n  var transform = [];\n  if (Array.isArray(props)) {\n    props.forEach(function (prop) {\n      var key = Object.keys(prop)[0];\n      transform.push((key + "(" + (prop[key]) + ")"));\n    });\n  }\n  return transform.join(\' \');\n}\n\nfunction mouse(container, event) {\n  var rect = container.getBoundingClientRect();\n  var x = event.clientX - rect.left - container.clientLeft;\n  var y = event.clientY - rect.top - container.clientTop;\n  return [x, y];\n}\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  points: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].instanceOf(__WEBPACK_IMPORTED_MODULE_4_immutable___default.a.List).isRequired,\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool.isRequired,\n  keyAccessor: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  lngLatAccessor: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  onAddPoint: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  onUpdatePoint: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  renderPoint: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired\n};\n\nvar defaultProps = {\n  keyAccessor: function (point) { return point.get(\'id\'); },\n  lngLatAccessor: function (point) { return point.get(\'location\').toArray(); },\n  onAddPoint: noop,\n  onUpdatePoint: noop,\n  renderPoint: noop,\n  isDragging: false\n};\n\nvar DraggablePointsOverlay = (function (Component) {\n  function DraggablePointsOverlay(props) {\n    Component.call(this, props);\n    this.state = {\n      draggedPointKey: null\n    };\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_autobind__["a" /* default */])(this);\n  }\n\n  if ( Component ) DraggablePointsOverlay.__proto__ = Component;\n  DraggablePointsOverlay.prototype = Object.create( Component && Component.prototype );\n  DraggablePointsOverlay.prototype.constructor = DraggablePointsOverlay;\n\n  DraggablePointsOverlay.prototype._onDragStart = function _onDragStart (point, event) {\n    event.stopPropagation();\n    __WEBPACK_IMPORTED_MODULE_5_global_document___default.a.addEventListener(\'mousemove\', this._onDrag, false);\n    __WEBPACK_IMPORTED_MODULE_5_global_document___default.a.addEventListener(\'mouseup\', this._onDragEnd, false);\n    this.setState({draggedPointKey: this.props.keyAccessor(point)});\n  };\n\n  DraggablePointsOverlay.prototype._onDrag = function _onDrag (event) {\n    event.stopPropagation();\n    var pixel = mouse(this.refs.container, event);\n    var mercator = __WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project___default()(this.props);\n    var lngLat = mercator.unproject(pixel);\n    var key = this.state.draggedPointKey;\n    this.props.onUpdatePoint({key: key, location: lngLat});\n  };\n\n  DraggablePointsOverlay.prototype._onDragEnd = function _onDragEnd (event) {\n    event.stopPropagation();\n    __WEBPACK_IMPORTED_MODULE_5_global_document___default.a.removeEventListener(\'mousemove\', this._onDrag, false);\n    __WEBPACK_IMPORTED_MODULE_5_global_document___default.a.removeEventListener(\'mouseup\', this._onDragEnd, false);\n    this.setState({draggedPointKey: null});\n  };\n\n  DraggablePointsOverlay.prototype._addPoint = function _addPoint (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    var pixel = mouse(this.refs.container, event);\n    var mercator = __WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project___default()(this.props);\n    this.props.onAddPoint(mercator.unproject(pixel));\n  };\n\n  DraggablePointsOverlay.prototype.render = function render () {\n    var this$1 = this;\n\n    var ref = this.props;\n    var points = ref.points;\n    var width = ref.width;\n    var height = ref.height;\n    var isDragging = ref.isDragging;\n    var style = ref.style;\n    var mercator = __WEBPACK_IMPORTED_MODULE_3_viewport_mercator_project___default()(this.props);\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'svg\', {\n        ref: "container", width: width, height: height, style: Object.assign({}, {pointerEvents: \'all\',\n          position: \'absolute\',\n          left: 0,\n          top: 0,\n          cursor: isDragging ? __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].CURSOR.GRABBING : __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].CURSOR.GRAB},\n          style), onContextMenu: this._addPoint },\n\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'g\', { style: {cursor: \'pointer\'} },\n          points.map(function (point, index) {\n              var pixel = mercator.project(this$1.props.lngLatAccessor(point));\n              return (\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'g\', {\n                  key: index, style: {pointerEvents: \'all\'}, transform: svgTransform([{translate: pixel}]), onMouseDown: this$1._onDragStart.bind(this$1, point) },\n                  this$1.props.renderPoint.call(this$1, point, pixel)\n                )\n              );\n            })\n        )\n      )\n    );\n  };\n\n  return DraggablePointsOverlay;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = DraggablePointsOverlay;\n\nDraggablePointsOverlay.propTypes = propTypes;\nDraggablePointsOverlay.defaultProps = defaultProps;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L292ZXJsYXlzL2RyYWdnYWJsZS1wb2ludHMtb3ZlcmxheS5qcz8yZWYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNSBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCBSZWFjdCwge1Byb3BUeXBlcywgQ29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXV0b2JpbmQgZnJvbSAnLi4vdXRpbHMvYXV0b2JpbmQnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5pbXBvcnQgVmlld3BvcnRNZXJjYXRvciBmcm9tICd2aWV3cG9ydC1tZXJjYXRvci1wcm9qZWN0JztcblxuaW1wb3J0IEltbXV0YWJsZSBmcm9tICdpbW11dGFibGUnO1xuaW1wb3J0IGRvY3VtZW50IGZyb20gJ2dsb2JhbC9kb2N1bWVudCc7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBNYWtlcyB3b3JraW5nIHdpdGggU1ZHIHRyYW5zZm9ybXMgYSBsaXR0bGUgbmljZXJcbmZ1bmN0aW9uIHN2Z1RyYW5zZm9ybShwcm9wcykge1xuICB2YXIgdHJhbnNmb3JtID0gW107XG4gIGlmIChBcnJheS5pc0FycmF5KHByb3BzKSkge1xuICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhwcm9wKVswXTtcbiAgICAgIHRyYW5zZm9ybS5wdXNoKChrZXkgKyBcIihcIiArIChwcm9wW2tleV0pICsgXCIpXCIpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdHJhbnNmb3JtLmpvaW4oJyAnKTtcbn1cblxuZnVuY3Rpb24gbW91c2UoY29udGFpbmVyLCBldmVudCkge1xuICB2YXIgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gY29udGFpbmVyLmNsaWVudExlZnQ7XG4gIHZhciB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wIC0gY29udGFpbmVyLmNsaWVudFRvcDtcbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGxhdGl0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGxvbmdpdHVkZTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICB6b29tOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHBvaW50czogUHJvcFR5cGVzLmluc3RhbmNlT2YoSW1tdXRhYmxlLkxpc3QpLmlzUmVxdWlyZWQsXG4gIGlzRHJhZ2dpbmc6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIGtleUFjY2Vzc29yOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBsbmdMYXRBY2Nlc3NvcjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25BZGRQb2ludDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25VcGRhdGVQb2ludDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgcmVuZGVyUG9pbnQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbn07XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIGtleUFjY2Vzc29yOiBmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIHBvaW50LmdldCgnaWQnKTsgfSxcbiAgbG5nTGF0QWNjZXNzb3I6IGZ1bmN0aW9uIChwb2ludCkgeyByZXR1cm4gcG9pbnQuZ2V0KCdsb2NhdGlvbicpLnRvQXJyYXkoKTsgfSxcbiAgb25BZGRQb2ludDogbm9vcCxcbiAgb25VcGRhdGVQb2ludDogbm9vcCxcbiAgcmVuZGVyUG9pbnQ6IG5vb3AsXG4gIGlzRHJhZ2dpbmc6IGZhbHNlXG59O1xuXG52YXIgRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheSA9IChmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIERyYWdnYWJsZVBvaW50c092ZXJsYXkocHJvcHMpIHtcbiAgICBDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRyYWdnZWRQb2ludEtleTogbnVsbFxuICAgIH07XG4gICAgYXV0b2JpbmQodGhpcyk7XG4gIH1cblxuICBpZiAoIENvbXBvbmVudCApIERyYWdnYWJsZVBvaW50c092ZXJsYXkuX19wcm90b19fID0gQ29tcG9uZW50O1xuICBEcmFnZ2FibGVQb2ludHNPdmVybGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbXBvbmVudCAmJiBDb21wb25lbnQucHJvdG90eXBlICk7XG4gIERyYWdnYWJsZVBvaW50c092ZXJsYXkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheTtcblxuICBEcmFnZ2FibGVQb2ludHNPdmVybGF5LnByb3RvdHlwZS5fb25EcmFnU3RhcnQgPSBmdW5jdGlvbiBfb25EcmFnU3RhcnQgKHBvaW50LCBldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uRHJhZywgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbkRyYWdFbmQsIGZhbHNlKTtcbiAgICB0aGlzLnNldFN0YXRlKHtkcmFnZ2VkUG9pbnRLZXk6IHRoaXMucHJvcHMua2V5QWNjZXNzb3IocG9pbnQpfSk7XG4gIH07XG5cbiAgRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheS5wcm90b3R5cGUuX29uRHJhZyA9IGZ1bmN0aW9uIF9vbkRyYWcgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdmFyIHBpeGVsID0gbW91c2UodGhpcy5yZWZzLmNvbnRhaW5lciwgZXZlbnQpO1xuICAgIHZhciBtZXJjYXRvciA9IFZpZXdwb3J0TWVyY2F0b3IodGhpcy5wcm9wcyk7XG4gICAgdmFyIGxuZ0xhdCA9IG1lcmNhdG9yLnVucHJvamVjdChwaXhlbCk7XG4gICAgdmFyIGtleSA9IHRoaXMuc3RhdGUuZHJhZ2dlZFBvaW50S2V5O1xuICAgIHRoaXMucHJvcHMub25VcGRhdGVQb2ludCh7a2V5OiBrZXksIGxvY2F0aW9uOiBsbmdMYXR9KTtcbiAgfTtcblxuICBEcmFnZ2FibGVQb2ludHNPdmVybGF5LnByb3RvdHlwZS5fb25EcmFnRW5kID0gZnVuY3Rpb24gX29uRHJhZ0VuZCAoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbkRyYWcsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fb25EcmFnRW5kLCBmYWxzZSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZHJhZ2dlZFBvaW50S2V5OiBudWxsfSk7XG4gIH07XG5cbiAgRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheS5wcm90b3R5cGUuX2FkZFBvaW50ID0gZnVuY3Rpb24gX2FkZFBvaW50IChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHBpeGVsID0gbW91c2UodGhpcy5yZWZzLmNvbnRhaW5lciwgZXZlbnQpO1xuICAgIHZhciBtZXJjYXRvciA9IFZpZXdwb3J0TWVyY2F0b3IodGhpcy5wcm9wcyk7XG4gICAgdGhpcy5wcm9wcy5vbkFkZFBvaW50KG1lcmNhdG9yLnVucHJvamVjdChwaXhlbCkpO1xuICB9O1xuXG4gIERyYWdnYWJsZVBvaW50c092ZXJsYXkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHRoaXMkMSA9IHRoaXM7XG5cbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgcG9pbnRzID0gcmVmLnBvaW50cztcbiAgICB2YXIgd2lkdGggPSByZWYud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHJlZi5oZWlnaHQ7XG4gICAgdmFyIGlzRHJhZ2dpbmcgPSByZWYuaXNEcmFnZ2luZztcbiAgICB2YXIgc3R5bGUgPSByZWYuc3R5bGU7XG4gICAgdmFyIG1lcmNhdG9yID0gVmlld3BvcnRNZXJjYXRvcih0aGlzLnByb3BzKTtcbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCggJ3N2ZycsIHtcbiAgICAgICAgcmVmOiBcImNvbnRhaW5lclwiLCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCBzdHlsZTogT2JqZWN0LmFzc2lnbih7fSwge3BvaW50ZXJFdmVudHM6ICdhbGwnLFxuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGN1cnNvcjogaXNEcmFnZ2luZyA/IGNvbmZpZy5DVVJTT1IuR1JBQkJJTkcgOiBjb25maWcuQ1VSU09SLkdSQUJ9LFxuICAgICAgICAgIHN0eWxlKSwgb25Db250ZXh0TWVudTogdGhpcy5fYWRkUG9pbnQgfSxcblxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnZycsIHsgc3R5bGU6IHtjdXJzb3I6ICdwb2ludGVyJ30gfSxcbiAgICAgICAgICBwb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbWVyY2F0b3IucHJvamVjdCh0aGlzJDEucHJvcHMubG5nTGF0QWNjZXNzb3IocG9pbnQpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCAnZycsIHtcbiAgICAgICAgICAgICAgICAgIGtleTogaW5kZXgsIHN0eWxlOiB7cG9pbnRlckV2ZW50czogJ2FsbCd9LCB0cmFuc2Zvcm06IHN2Z1RyYW5zZm9ybShbe3RyYW5zbGF0ZTogcGl4ZWx9XSksIG9uTW91c2VEb3duOiB0aGlzJDEuX29uRHJhZ1N0YXJ0LmJpbmQodGhpcyQxLCBwb2ludCkgfSxcbiAgICAgICAgICAgICAgICAgIHRoaXMkMS5wcm9wcy5yZW5kZXJQb2ludC5jYWxsKHRoaXMkMSwgcG9pbnQsIHBpeGVsKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBEcmFnZ2FibGVQb2ludHNPdmVybGF5O1xufShDb21wb25lbnQpKTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheTtcblxuRHJhZ2dhYmxlUG9pbnRzT3ZlcmxheS5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5EcmFnZ2FibGVQb2ludHNPdmVybGF5LmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9vdmVybGF5cy9kcmFnZ2FibGUtcG9pbnRzLW92ZXJsYXkuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9');
},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  redraw: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool.isRequired\n  // TODO: style\n};\n\nvar HTMLOverlay = (function (Component) {\n  function HTMLOverlay () {\n    Component.apply(this, arguments);\n  }\n\n  if ( Component ) HTMLOverlay.__proto__ = Component;\n  HTMLOverlay.prototype = Object.create( Component && Component.prototype );\n  HTMLOverlay.prototype.constructor = HTMLOverlay;\n\n  HTMLOverlay.prototype.render = function render () {\n    var ref = this.props;\n    var width = ref.width;\n    var height = ref.height;\n    var isDragging = ref.isDragging;\n    var style = Object.assign({}, {position: \'absolute\',\n      pointerEvents: \'none\',\n      left: 0,\n      top: 0,\n      width: width,\n      height: height},\n      this.props.style);\n    var mercator = __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default()(this.props);\n    var project = mercator.project;\n    var unproject = mercator.unproject;\n\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'div\', { ref: "overlay", style: style },\n        this.props.redraw({width: width, height: height, project: project, unproject: unproject, isDragging: isDragging})\n      )\n    );\n  };\n\n  return HTMLOverlay;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = HTMLOverlay;\n\nHTMLOverlay.propTypes = propTypes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L292ZXJsYXlzL2h0bWwtb3ZlcmxheS5qcz8wODdjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNSBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbmltcG9ydCBSZWFjdCwge1Byb3BUeXBlcywgQ29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVmlld3BvcnRNZXJjYXRvciBmcm9tICd2aWV3cG9ydC1tZXJjYXRvci1wcm9qZWN0JztcblxudmFyIHByb3BUeXBlcyA9IHtcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHJlZHJhdzogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgaXNEcmFnZ2luZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxuICAvLyBUT0RPOiBzdHlsZVxufTtcblxudmFyIEhUTUxPdmVybGF5ID0gKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgZnVuY3Rpb24gSFRNTE92ZXJsYXkgKCkge1xuICAgIENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgaWYgKCBDb21wb25lbnQgKSBIVE1MT3ZlcmxheS5fX3Byb3RvX18gPSBDb21wb25lbnQ7XG4gIEhUTUxPdmVybGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIENvbXBvbmVudCAmJiBDb21wb25lbnQucHJvdG90eXBlICk7XG4gIEhUTUxPdmVybGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhUTUxPdmVybGF5O1xuXG4gIEhUTUxPdmVybGF5LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIgKCkge1xuICAgIHZhciByZWYgPSB0aGlzLnByb3BzO1xuICAgIHZhciB3aWR0aCA9IHJlZi53aWR0aDtcbiAgICB2YXIgaGVpZ2h0ID0gcmVmLmhlaWdodDtcbiAgICB2YXIgaXNEcmFnZ2luZyA9IHJlZi5pc0RyYWdnaW5nO1xuICAgIHZhciBzdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHtwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICB0b3A6IDAsXG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodH0sXG4gICAgICB0aGlzLnByb3BzLnN0eWxlKTtcbiAgICB2YXIgbWVyY2F0b3IgPSBWaWV3cG9ydE1lcmNhdG9yKHRoaXMucHJvcHMpO1xuICAgIHZhciBwcm9qZWN0ID0gbWVyY2F0b3IucHJvamVjdDtcbiAgICB2YXIgdW5wcm9qZWN0ID0gbWVyY2F0b3IudW5wcm9qZWN0O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoICdkaXYnLCB7IHJlZjogXCJvdmVybGF5XCIsIHN0eWxlOiBzdHlsZSB9LFxuICAgICAgICB0aGlzLnByb3BzLnJlZHJhdyh7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgcHJvamVjdDogcHJvamVjdCwgdW5wcm9qZWN0OiB1bnByb2plY3QsIGlzRHJhZ2dpbmc6IGlzRHJhZ2dpbmd9KVxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIEhUTUxPdmVybGF5O1xufShDb21wb25lbnQpKTtcblxuZXhwb3J0IGRlZmF1bHQgSFRNTE92ZXJsYXk7XG5cbkhUTUxPdmVybGF5LnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9vdmVybGF5cy9odG1sLW92ZXJsYXkuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_immutable__ = __webpack_require__(/*! immutable */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global_window__ = __webpack_require__(/*! global/window */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global_window___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_global_window__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\n\n\n\nfunction round(x, n) {\n  var tenN = Math.pow(10, n);\n  return Math.round(x * tenN) / tenN;\n}\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool.isRequired,\n  locations: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].instanceOf(__WEBPACK_IMPORTED_MODULE_2_immutable___default.a.List).isRequired,\n  lngLatAccessor: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func,\n  renderWhileDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool,\n  globalOpacity: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n  dotRadius: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number,\n  dotFill: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string,\n  compositeOperation: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].string\n};\n\nvar defaultProps = {\n  lngLatAccessor: function (location) { return [location.get(0), location.get(1)]; },\n  renderWhileDragging: true,\n  dotRadius: 4,\n  dotFill: \'#1FBAD6\',\n  globalOpacity: 1,\n  // Same as browser default.\n  compositeOperation: \'source-over\'\n};\n\nvar ScatterplotOverlay = (function (Component) {\n  function ScatterplotOverlay () {\n    Component.apply(this, arguments);\n  }\n\n  if ( Component ) ScatterplotOverlay.__proto__ = Component;\n  ScatterplotOverlay.prototype = Object.create( Component && Component.prototype );\n  ScatterplotOverlay.prototype.constructor = ScatterplotOverlay;\n\n  ScatterplotOverlay.prototype.componentDidMount = function componentDidMount () {\n    this._redraw();\n  };\n\n  ScatterplotOverlay.prototype.componentDidUpdate = function componentDidUpdate () {\n    this._redraw();\n  };\n\n  /* eslint-disable max-statements */\n  ScatterplotOverlay.prototype._redraw = function _redraw () {\n    var ref = this.props;\n    var width = ref.width;\n    var height = ref.height;\n    var dotRadius = ref.dotRadius;\n    var dotFill = ref.dotFill;\n    var compositeOperation = ref.compositeOperation;\n    var renderWhileDragging = ref.renderWhileDragging;\n    var isDragging = ref.isDragging;\n    var locations = ref.locations;\n    var lngLatAccessor = ref.lngLatAccessor;\n\n    var mercator = __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default()(this.props);\n    var pixelRatio = __WEBPACK_IMPORTED_MODULE_3_global_window___default.a.devicePixelRatio || 1;\n    var canvas = this.refs.overlay;\n    var ctx = canvas.getContext(\'2d\');\n\n    ctx.save();\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.clearRect(0, 0, width, height);\n    ctx.globalCompositeOperation = compositeOperation;\n\n    if ((renderWhileDragging || !isDragging) && locations) {\n      for (var i = 0, list = locations; i < list.length; i += 1) {\n        var location = list[i];\n\n        var pixel = mercator.project(lngLatAccessor(location));\n        var pixelRounded = [round(pixel[0], 1), round(pixel[1], 1)];\n        if (pixelRounded[0] + dotRadius >= 0 &&\n            pixelRounded[0] - dotRadius < width &&\n            pixelRounded[1] + dotRadius >= 0 &&\n            pixelRounded[1] - dotRadius < height\n        ) {\n          ctx.fillStyle = dotFill;\n          ctx.beginPath();\n          ctx.arc(pixelRounded[0], pixelRounded[1], dotRadius, 0, Math.PI * 2);\n          ctx.fill();\n        }\n      }\n    }\n\n    ctx.restore();\n  };\n  /* eslint-enable max-statements */\n\n  ScatterplotOverlay.prototype.render = function render () {\n    var ref = this.props;\n    var width = ref.width;\n    var height = ref.height;\n    var globalOpacity = ref.globalOpacity;\n    var pixelRatio = __WEBPACK_IMPORTED_MODULE_3_global_window___default.a.devicePixelRatio || 1;\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'canvas\', {\n        ref: "overlay", width: width * pixelRatio, height: height * pixelRatio, style: {\n          width: (width + "px"),\n          height: (height + "px"),\n          position: \'absolute\',\n          pointerEvents: \'none\',\n          opacity: globalOpacity,\n          left: 0,\n          top: 0\n        } })\n    );\n  };\n\n  return ScatterplotOverlay;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = ScatterplotOverlay;\n\nScatterplotOverlay.propTypes = propTypes;\nScatterplotOverlay.defaultProps = defaultProps;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L292ZXJsYXlzL3NjYXR0ZXJwbG90LW92ZXJsYXkuanM/Y2VkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHtQcm9wVHlwZXMsIENvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFZpZXdwb3J0TWVyY2F0b3IgZnJvbSAndmlld3BvcnQtbWVyY2F0b3ItcHJvamVjdCc7XG5cbmltcG9ydCBJbW11dGFibGUgZnJvbSAnaW1tdXRhYmxlJztcbmltcG9ydCB3aW5kb3cgZnJvbSAnZ2xvYmFsL3dpbmRvdyc7XG5cbmZ1bmN0aW9uIHJvdW5kKHgsIG4pIHtcbiAgdmFyIHRlbk4gPSBNYXRoLnBvdygxMCwgbik7XG4gIHJldHVybiBNYXRoLnJvdW5kKHggKiB0ZW5OKSAvIHRlbk47XG59XG5cbnZhciBwcm9wVHlwZXMgPSB7XG4gIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGhlaWdodDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBsYXRpdHVkZTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBsb25naXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgem9vbTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBpc0RyYWdnaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBsb2NhdGlvbnM6IFByb3BUeXBlcy5pbnN0YW5jZU9mKEltbXV0YWJsZS5MaXN0KS5pc1JlcXVpcmVkLFxuICBsbmdMYXRBY2Nlc3NvcjogUHJvcFR5cGVzLmZ1bmMsXG4gIHJlbmRlcldoaWxlRHJhZ2dpbmc6IFByb3BUeXBlcy5ib29sLFxuICBnbG9iYWxPcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICBkb3RSYWRpdXM6IFByb3BUeXBlcy5udW1iZXIsXG4gIGRvdEZpbGw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbXBvc2l0ZU9wZXJhdGlvbjogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgbG5nTGF0QWNjZXNzb3I6IGZ1bmN0aW9uIChsb2NhdGlvbikgeyByZXR1cm4gW2xvY2F0aW9uLmdldCgwKSwgbG9jYXRpb24uZ2V0KDEpXTsgfSxcbiAgcmVuZGVyV2hpbGVEcmFnZ2luZzogdHJ1ZSxcbiAgZG90UmFkaXVzOiA0LFxuICBkb3RGaWxsOiAnIzFGQkFENicsXG4gIGdsb2JhbE9wYWNpdHk6IDEsXG4gIC8vIFNhbWUgYXMgYnJvd3NlciBkZWZhdWx0LlxuICBjb21wb3NpdGVPcGVyYXRpb246ICdzb3VyY2Utb3Zlcidcbn07XG5cbnZhciBTY2F0dGVycGxvdE92ZXJsYXkgPSAoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICBmdW5jdGlvbiBTY2F0dGVycGxvdE92ZXJsYXkgKCkge1xuICAgIENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgaWYgKCBDb21wb25lbnQgKSBTY2F0dGVycGxvdE92ZXJsYXkuX19wcm90b19fID0gQ29tcG9uZW50O1xuICBTY2F0dGVycGxvdE92ZXJsYXkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQ29tcG9uZW50ICYmIENvbXBvbmVudC5wcm90b3R5cGUgKTtcbiAgU2NhdHRlcnBsb3RPdmVybGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNjYXR0ZXJwbG90T3ZlcmxheTtcblxuICBTY2F0dGVycGxvdE92ZXJsYXkucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuX3JlZHJhdygpO1xuICB9O1xuXG4gIFNjYXR0ZXJwbG90T3ZlcmxheS5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlICgpIHtcbiAgICB0aGlzLl9yZWRyYXcoKTtcbiAgfTtcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuICBTY2F0dGVycGxvdE92ZXJsYXkucHJvdG90eXBlLl9yZWRyYXcgPSBmdW5jdGlvbiBfcmVkcmF3ICgpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgd2lkdGggPSByZWYud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHJlZi5oZWlnaHQ7XG4gICAgdmFyIGRvdFJhZGl1cyA9IHJlZi5kb3RSYWRpdXM7XG4gICAgdmFyIGRvdEZpbGwgPSByZWYuZG90RmlsbDtcbiAgICB2YXIgY29tcG9zaXRlT3BlcmF0aW9uID0gcmVmLmNvbXBvc2l0ZU9wZXJhdGlvbjtcbiAgICB2YXIgcmVuZGVyV2hpbGVEcmFnZ2luZyA9IHJlZi5yZW5kZXJXaGlsZURyYWdnaW5nO1xuICAgIHZhciBpc0RyYWdnaW5nID0gcmVmLmlzRHJhZ2dpbmc7XG4gICAgdmFyIGxvY2F0aW9ucyA9IHJlZi5sb2NhdGlvbnM7XG4gICAgdmFyIGxuZ0xhdEFjY2Vzc29yID0gcmVmLmxuZ0xhdEFjY2Vzc29yO1xuXG4gICAgdmFyIG1lcmNhdG9yID0gVmlld3BvcnRNZXJjYXRvcih0aGlzLnByb3BzKTtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgdmFyIGNhbnZhcyA9IHRoaXMucmVmcy5vdmVybGF5O1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IGNvbXBvc2l0ZU9wZXJhdGlvbjtcblxuICAgIGlmICgocmVuZGVyV2hpbGVEcmFnZ2luZyB8fCAhaXNEcmFnZ2luZykgJiYgbG9jYXRpb25zKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IGxvY2F0aW9uczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gbGlzdFtpXTtcblxuICAgICAgICB2YXIgcGl4ZWwgPSBtZXJjYXRvci5wcm9qZWN0KGxuZ0xhdEFjY2Vzc29yKGxvY2F0aW9uKSk7XG4gICAgICAgIHZhciBwaXhlbFJvdW5kZWQgPSBbcm91bmQocGl4ZWxbMF0sIDEpLCByb3VuZChwaXhlbFsxXSwgMSldO1xuICAgICAgICBpZiAocGl4ZWxSb3VuZGVkWzBdICsgZG90UmFkaXVzID49IDAgJiZcbiAgICAgICAgICAgIHBpeGVsUm91bmRlZFswXSAtIGRvdFJhZGl1cyA8IHdpZHRoICYmXG4gICAgICAgICAgICBwaXhlbFJvdW5kZWRbMV0gKyBkb3RSYWRpdXMgPj0gMCAmJlxuICAgICAgICAgICAgcGl4ZWxSb3VuZGVkWzFdIC0gZG90UmFkaXVzIDwgaGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBkb3RGaWxsO1xuICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICBjdHguYXJjKHBpeGVsUm91bmRlZFswXSwgcGl4ZWxSb3VuZGVkWzFdLCBkb3RSYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfTtcbiAgLyogZXNsaW50LWVuYWJsZSBtYXgtc3RhdGVtZW50cyAqL1xuXG4gIFNjYXR0ZXJwbG90T3ZlcmxheS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyICgpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgd2lkdGggPSByZWYud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHJlZi5oZWlnaHQ7XG4gICAgdmFyIGdsb2JhbE9wYWNpdHkgPSByZWYuZ2xvYmFsT3BhY2l0eTtcbiAgICB2YXIgcGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnLCB7XG4gICAgICAgIHJlZjogXCJvdmVybGF5XCIsIHdpZHRoOiB3aWR0aCAqIHBpeGVsUmF0aW8sIGhlaWdodDogaGVpZ2h0ICogcGl4ZWxSYXRpbywgc3R5bGU6IHtcbiAgICAgICAgICB3aWR0aDogKHdpZHRoICsgXCJweFwiKSxcbiAgICAgICAgICBoZWlnaHQ6IChoZWlnaHQgKyBcInB4XCIpLFxuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICBvcGFjaXR5OiBnbG9iYWxPcGFjaXR5LFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwXG4gICAgICAgIH0gfSlcbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBTY2F0dGVycGxvdE92ZXJsYXk7XG59KENvbXBvbmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBTY2F0dGVycGxvdE92ZXJsYXk7XG5cblNjYXR0ZXJwbG90T3ZlcmxheS5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5TY2F0dGVycGxvdE92ZXJsYXkuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kaXN0L292ZXJsYXlzL3NjYXR0ZXJwbG90LW92ZXJsYXkuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__ = __webpack_require__(/*! viewport-mercator-project */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  latitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  longitude: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  zoom: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].number.isRequired,\n  redraw: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].func.isRequired,\n  isDragging: __WEBPACK_IMPORTED_MODULE_0_react__["PropTypes"].bool.isRequired\n};\n\nvar SVGOverlay = (function (Component) {\n  function SVGOverlay () {\n    Component.apply(this, arguments);\n  }\n\n  if ( Component ) SVGOverlay.__proto__ = Component;\n  SVGOverlay.prototype = Object.create( Component && Component.prototype );\n  SVGOverlay.prototype.constructor = SVGOverlay;\n\n  SVGOverlay.prototype.render = function render () {\n    var ref = this.props;\n    var width = ref.width;\n    var height = ref.height;\n    var isDragging = ref.isDragging;\n    var style = Object.assign({}, {pointerEvents: \'none\',\n      position: \'absolute\',\n      left: 0,\n      top: 0},\n      this.props.style);\n    var mercator = __WEBPACK_IMPORTED_MODULE_1_viewport_mercator_project___default()(this.props);\n    var project = mercator.project;\n    var unproject = mercator.unproject;\n\n    return (\n      __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement( \'svg\', {\n        ref: "overlay", width: width, height: height, style: style },\n\n        this.props.redraw({width: width, height: height, project: project, unproject: unproject, isDragging: isDragging})\n\n      )\n    );\n  };\n\n  return SVGOverlay;\n}(__WEBPACK_IMPORTED_MODULE_0_react__["Component"]));\n\n/* harmony default export */ exports["a"] = SVGOverlay;\n\nSVGOverlay.propTypes = propTypes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L292ZXJsYXlzL3N2Zy1vdmVybGF5LmpzPzU0OGIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuaW1wb3J0IFJlYWN0LCB7UHJvcFR5cGVzLCBDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBWaWV3cG9ydE1lcmNhdG9yIGZyb20gJ3ZpZXdwb3J0LW1lcmNhdG9yLXByb2plY3QnO1xuXG52YXIgcHJvcFR5cGVzID0ge1xuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgbGF0aXR1ZGU6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgbG9uZ2l0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIHpvb206IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgcmVkcmF3OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBpc0RyYWdnaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkXG59O1xuXG52YXIgU1ZHT3ZlcmxheSA9IChmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIGZ1bmN0aW9uIFNWR092ZXJsYXkgKCkge1xuICAgIENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgaWYgKCBDb21wb25lbnQgKSBTVkdPdmVybGF5Ll9fcHJvdG9fXyA9IENvbXBvbmVudDtcbiAgU1ZHT3ZlcmxheS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDb21wb25lbnQgJiYgQ29tcG9uZW50LnByb3RvdHlwZSApO1xuICBTVkdPdmVybGF5LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNWR092ZXJsYXk7XG5cbiAgU1ZHT3ZlcmxheS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyICgpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5wcm9wcztcbiAgICB2YXIgd2lkdGggPSByZWYud2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHJlZi5oZWlnaHQ7XG4gICAgdmFyIGlzRHJhZ2dpbmcgPSByZWYuaXNEcmFnZ2luZztcbiAgICB2YXIgc3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCB7cG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgdG9wOiAwfSxcbiAgICAgIHRoaXMucHJvcHMuc3R5bGUpO1xuICAgIHZhciBtZXJjYXRvciA9IFZpZXdwb3J0TWVyY2F0b3IodGhpcy5wcm9wcyk7XG4gICAgdmFyIHByb2plY3QgPSBtZXJjYXRvci5wcm9qZWN0O1xuICAgIHZhciB1bnByb2plY3QgPSBtZXJjYXRvci51bnByb2plY3Q7XG5cbiAgICByZXR1cm4gKFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCggJ3N2ZycsIHtcbiAgICAgICAgcmVmOiBcIm92ZXJsYXlcIiwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgc3R5bGU6IHN0eWxlIH0sXG5cbiAgICAgICAgdGhpcy5wcm9wcy5yZWRyYXcoe3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsIHByb2plY3Q6IHByb2plY3QsIHVucHJvamVjdDogdW5wcm9qZWN0LCBpc0RyYWdnaW5nOiBpc0RyYWdnaW5nfSlcblxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFNWR092ZXJsYXk7XG59KENvbXBvbmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBTVkdPdmVybGF5O1xuXG5TVkdPdmVybGF5LnByb3BUeXBlcyA9IHByb3BUeXBlcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9vdmVybGF5cy9zdmctb3ZlcmxheS5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__transform__ = __webpack_require__(/*! ./transform */ 9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mapbox_gl__ = __webpack_require__(/*! mapbox-gl */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_mapbox_gl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_mapbox_gl__);\n/* harmony export (immutable) */ exports["a"] = fitBounds;\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// NOTE: Transform is not a public API so we should be careful to always lock\n// down mapbox-gl to a specific major, minor, and patch version.\n\n\n\n/**\n * Returns map settings {latitude, longitude, zoom}\n * that will contain the provided corners within the provided\n * width.\n * @param {Number} width - viewport width\n * @param {Number} height - viewport height\n * @param {Array} bounds - [[lat,lon], [lat,lon]]\n * @param {Number} options.padding - viewport width\n * @returns {Object} - latitude, longitude and zoom\n */\nfunction fitBounds(width, height, bounds, ref) {\n  if ( ref === void 0 ) ref = {};\n  var padding = ref.padding; if ( padding === void 0 ) padding = 0;\n\n  var _bounds = new __WEBPACK_IMPORTED_MODULE_1_mapbox_gl__["LngLatBounds"]([\n    bounds[0].reverse(),\n    bounds[1].reverse()\n  ]);\n  var offset = __WEBPACK_IMPORTED_MODULE_1_mapbox_gl__["Point"].convert([0, 0]);\n  var tr = new __WEBPACK_IMPORTED_MODULE_0__transform__["a" /* default */]();\n  tr.width = width;\n  tr.height = height;\n  var nw = tr.project(_bounds.getNorthWest());\n  var se = tr.project(_bounds.getSouthEast());\n  var size = se.sub(nw);\n  var scaleX = (tr.width - padding * 2 - Math.abs(offset.x) * 2) / size.x;\n  var scaleY = (tr.height - padding * 2 - Math.abs(offset.y) * 2) / size.y;\n\n  var center = tr.unproject(nw.add(se).div(2));\n  var zoom = tr.scaleZoom(tr.scale * Math.abs(Math.min(scaleX, scaleY)));\n  return {\n    latitude: center.lat,\n    longitude: center.lng,\n    zoom: zoom\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L3V0aWxzL2ZpdC1ib3VuZHMuanM/MDEzZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUcmFuc2Zvcm0gaXMgbm90IGEgcHVibGljIEFQSSBzbyB3ZSBzaG91bGQgYmUgY2FyZWZ1bCB0byBhbHdheXMgbG9ja1xuLy8gZG93biBtYXBib3gtZ2wgdG8gYSBzcGVjaWZpYyBtYWpvciwgbWlub3IsIGFuZCBwYXRjaCB2ZXJzaW9uLlxuaW1wb3J0IFRyYW5zZm9ybSBmcm9tICcuL3RyYW5zZm9ybSc7XG5pbXBvcnQge0xuZ0xhdEJvdW5kcywgUG9pbnR9IGZyb20gJ21hcGJveC1nbCc7XG5cbi8qKlxuICogUmV0dXJucyBtYXAgc2V0dGluZ3Mge2xhdGl0dWRlLCBsb25naXR1ZGUsIHpvb219XG4gKiB0aGF0IHdpbGwgY29udGFpbiB0aGUgcHJvdmlkZWQgY29ybmVycyB3aXRoaW4gdGhlIHByb3ZpZGVkXG4gKiB3aWR0aC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCAtIHZpZXdwb3J0IHdpZHRoXG4gKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0IC0gdmlld3BvcnQgaGVpZ2h0XG4gKiBAcGFyYW0ge0FycmF5fSBib3VuZHMgLSBbW2xhdCxsb25dLCBbbGF0LGxvbl1dXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5wYWRkaW5nIC0gdmlld3BvcnQgd2lkdGhcbiAqIEByZXR1cm5zIHtPYmplY3R9IC0gbGF0aXR1ZGUsIGxvbmdpdHVkZSBhbmQgem9vbVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaXRCb3VuZHMod2lkdGgsIGhlaWdodCwgYm91bmRzLCByZWYpIHtcbiAgaWYgKCByZWYgPT09IHZvaWQgMCApIHJlZiA9IHt9O1xuICB2YXIgcGFkZGluZyA9IHJlZi5wYWRkaW5nOyBpZiAoIHBhZGRpbmcgPT09IHZvaWQgMCApIHBhZGRpbmcgPSAwO1xuXG4gIHZhciBfYm91bmRzID0gbmV3IExuZ0xhdEJvdW5kcyhbXG4gICAgYm91bmRzWzBdLnJldmVyc2UoKSxcbiAgICBib3VuZHNbMV0ucmV2ZXJzZSgpXG4gIF0pO1xuICB2YXIgb2Zmc2V0ID0gUG9pbnQuY29udmVydChbMCwgMF0pO1xuICB2YXIgdHIgPSBuZXcgVHJhbnNmb3JtKCk7XG4gIHRyLndpZHRoID0gd2lkdGg7XG4gIHRyLmhlaWdodCA9IGhlaWdodDtcbiAgdmFyIG53ID0gdHIucHJvamVjdChfYm91bmRzLmdldE5vcnRoV2VzdCgpKTtcbiAgdmFyIHNlID0gdHIucHJvamVjdChfYm91bmRzLmdldFNvdXRoRWFzdCgpKTtcbiAgdmFyIHNpemUgPSBzZS5zdWIobncpO1xuICB2YXIgc2NhbGVYID0gKHRyLndpZHRoIC0gcGFkZGluZyAqIDIgLSBNYXRoLmFicyhvZmZzZXQueCkgKiAyKSAvIHNpemUueDtcbiAgdmFyIHNjYWxlWSA9ICh0ci5oZWlnaHQgLSBwYWRkaW5nICogMiAtIE1hdGguYWJzKG9mZnNldC55KSAqIDIpIC8gc2l6ZS55O1xuXG4gIHZhciBjZW50ZXIgPSB0ci51bnByb2plY3QobncuYWRkKHNlKS5kaXYoMikpO1xuICB2YXIgem9vbSA9IHRyLnNjYWxlWm9vbSh0ci5zY2FsZSAqIE1hdGguYWJzKE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKSkpO1xuICByZXR1cm4ge1xuICAgIGxhdGl0dWRlOiBjZW50ZXIubGF0LFxuICAgIGxvbmdpdHVkZTogY2VudGVyLmxuZyxcbiAgICB6b29tOiB6b29tXG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2Rpc3QvdXRpbHMvZml0LWJvdW5kcy5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==');
},,,function(module,exports,__webpack_require__){"use strict";eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(/*! react */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__ = __webpack_require__(/*! react-addons-shallow-compare */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_autobind__ = __webpack_require__(/*! ../utils/autobind */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global_document__ = __webpack_require__(/*! global/document */ 11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_global_document___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_global_document__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_global_window__ = __webpack_require__(/*! global/window */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_global_window___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_global_window__);\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// Portions of the code below originally from:\n// https://github.com/mapbox/mapbox-gl-js/blob/master/js/ui/handler/scroll_zoom.js\n\n\n\n\n\n\nfunction noop() {}\n\nvar ua = typeof __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.navigator !== 'undefined' ?\n  __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.navigator.userAgent.toLowerCase() : '';\nvar firefox = ua.indexOf('firefox') !== -1;\n\n// Extract a position from a mouse event\nfunction getMousePosition(el, event) {\n  var rect = el.getBoundingClientRect();\n  event = event.touches ? event.touches[0] : event;\n  return [\n    event.clientX - rect.left - el.clientLeft,\n    event.clientY - rect.top - el.clientTop\n  ];\n}\n\n// Extract an array of touch positions from a touch event\nfunction getTouchPositions(el, event) {\n  var points = [];\n  var rect = el.getBoundingClientRect();\n  var touches = getTouches(event);\n  for (var i = 0; i < touches.length; i++) {\n    points.push([\n      touches[i].clientX - rect.left - el.clientLeft,\n      touches[i].clientY - rect.top - el.clientTop\n    ]);\n  }\n  return points;\n}\n\n// Get relevant touches from event depending on event type (for `touchend` and\n// `touchcancel` the property `changedTouches` contains the relevant coordinates)\nfunction getTouches(event) {\n  var type = event.type;\n  if (type === 'touchend' || type === 'touchcancel') {\n    return event.changedTouches;\n  }\n  return event.touches;\n}\n\n// Return the centroid of an array of points\nfunction centroid(positions) {\n  var sum = positions.reduce(\n    function (acc, elt) { return [acc[0] + elt[0], acc[1] + elt[1]]; },\n    [0, 0]\n  );\n  return [sum[0] / positions.length, sum[1] / positions.length];\n}\n\nvar propTypes = {\n  width: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].number.isRequired,\n  height: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].number.isRequired,\n  onMouseDown: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onMouseDrag: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onMouseRotate: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onMouseUp: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onMouseMove: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onMouseClick: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onTouchStart: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onTouchDrag: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onTouchRotate: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onTouchEnd: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onTouchTap: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onZoom: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func,\n  onZoomEnd: __WEBPACK_IMPORTED_MODULE_0_react__[\"PropTypes\"].func\n};\n\nvar defaultProps = {\n  onMouseDown: noop,\n  onMouseDrag: noop,\n  onMouseRotate: noop,\n  onMouseUp: noop,\n  onMouseMove: noop,\n  onMouseClick: noop,\n  onTouchStart: noop,\n  onTouchDrag: noop,\n  onTouchRotate: noop,\n  onTouchEnd: noop,\n  onTouchTap: noop,\n  onZoom: noop,\n  onZoomEnd: noop\n};\n\nvar Interactions = (function (Component) {\n  function Interactions(props) {\n    Component.call(this, props);\n    this.state = {\n      didDrag: false,\n      isFunctionKeyPressed: false,\n      startPos: null,\n      pos: null,\n      mouseWheelPos: null\n    };\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_autobind__[\"a\" /* default */])(this);\n  }\n\n  if ( Component ) Interactions.__proto__ = Component;\n  Interactions.prototype = Object.create( Component && Component.prototype );\n  Interactions.prototype.constructor = Interactions;\n\n  Interactions.prototype.shouldComponentUpdate = function shouldComponentUpdate (nextProps, nextState) {\n    return __WEBPACK_IMPORTED_MODULE_1_react_addons_shallow_compare___default()(this, nextProps, nextState);\n  };\n\n  Interactions.prototype._getMousePos = function _getMousePos (event) {\n    var el = this.refs.container;\n    return getMousePosition(el, event);\n  };\n\n  Interactions.prototype._getTouchPos = function _getTouchPos (event) {\n    var el = this.refs.container;\n    var positions = getTouchPositions(el, event);\n    return centroid(positions);\n  };\n\n  Interactions.prototype._isFunctionKeyPressed = function _isFunctionKeyPressed (event) {\n    return Boolean(event.metaKey || event.altKey ||\n      event.ctrlKey || event.shiftKey);\n  };\n\n  Interactions.prototype._onMouseDown = function _onMouseDown (event) {\n    var pos = this._getMousePos(event);\n    this.setState({\n      didDrag: false,\n      startPos: pos,\n      pos: pos,\n      isFunctionKeyPressed: this._isFunctionKeyPressed(event)\n    });\n    this.props.onMouseDown({pos: pos});\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.addEventListener('mousemove', this._onMouseDrag, false);\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.addEventListener('mouseup', this._onMouseUp, false);\n  };\n\n  Interactions.prototype._onTouchStart = function _onTouchStart (event) {\n    var pos = this._getTouchPos(event);\n    this.setState({\n      didDrag: false,\n      startPos: pos,\n      pos: pos,\n      isFunctionKeyPressed: this._isFunctionKeyPressed(event)\n    });\n    this.props.onTouchStart({pos: pos});\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.addEventListener('touchmove', this._onTouchDrag, false);\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.addEventListener('touchend', this._onTouchEnd, false);\n  };\n\n  Interactions.prototype._onMouseDrag = function _onMouseDrag (event) {\n    var pos = this._getMousePos(event);\n    this.setState({pos: pos, didDrag: true});\n    if (this.state.isFunctionKeyPressed) {\n      var ref = this.state;\n      var startPos = ref.startPos;\n      this.props.onMouseRotate({pos: pos, startPos: startPos});\n    } else {\n      this.props.onMouseDrag({pos: pos});\n    }\n  };\n\n  Interactions.prototype._onTouchDrag = function _onTouchDrag (event) {\n    var pos = this._getTouchPos(event);\n    this.setState({pos: pos, didDrag: true});\n    if (this.state.isFunctionKeyPressed) {\n      var ref = this.state;\n      var startPos = ref.startPos;\n      this.props.onTouchRotate({pos: pos, startPos: startPos});\n    } else {\n      this.props.onTouchDrag({pos: pos});\n    }\n    event.preventDefault();\n  };\n\n  Interactions.prototype._onMouseUp = function _onMouseUp (event) {\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.removeEventListener('mousemove', this._onMouseDrag, false);\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.removeEventListener('mouseup', this._onMouseUp, false);\n    var pos = this._getMousePos(event);\n    this.setState({pos: pos});\n    this.props.onMouseUp({pos: pos});\n    if (!this.state.didDrag) {\n      this.props.onMouseClick({pos: pos});\n    }\n  };\n\n  Interactions.prototype._onTouchEnd = function _onTouchEnd (event) {\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.removeEventListener('touchmove', this._onTouchDrag, false);\n    __WEBPACK_IMPORTED_MODULE_3_global_document___default.a.removeEventListener('touchend', this._onTouchEnd, false);\n    var pos = this._getTouchPos(event);\n    this.setState({pos: pos});\n    this.props.onTouchEnd({pos: pos});\n    if (!this.state.didDrag) {\n      this.props.onTouchTap({pos: pos});\n    }\n  };\n\n  Interactions.prototype._onMouseMove = function _onMouseMove (event) {\n    var pos = this._getMousePos(event);\n    this.props.onMouseMove({pos: pos});\n  };\n\n  /* eslint-disable complexity, max-statements */\n  Interactions.prototype._onWheel = function _onWheel (event) {\n    event.preventDefault();\n    var value = event.deltaY;\n    // Firefox doubles the values on retina screens...\n    if (firefox && event.deltaMode === __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.WheelEvent.DOM_DELTA_PIXEL) {\n      value /= __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.devicePixelRatio;\n    }\n    if (event.deltaMode === __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.WheelEvent.DOM_DELTA_LINE) {\n      value *= 40;\n    }\n\n    var type = this.state.mouseWheelType;\n    var timeout = this.state.mouseWheelTimeout;\n    var lastValue = this.state.mouseWheelLastValue;\n    var time = this.state.mouseWheelTime;\n\n    var now = (__WEBPACK_IMPORTED_MODULE_4_global_window___default.a.performance || Date).now();\n    var timeDelta = now - (time || 0);\n\n    var pos = this._getMousePos(event);\n    time = now;\n\n    if (value !== 0 && value % 4.000244140625 === 0) {\n      // This one is definitely a mouse wheel event.\n      type = 'wheel';\n      // Normalize this value to match trackpad.\n      value = Math.floor(value / 4);\n    } else if (value !== 0 && Math.abs(value) < 4) {\n      // This one is definitely a trackpad event because it is so small.\n      type = 'trackpad';\n    } else if (timeDelta > 400) {\n      // This is likely a new scroll action.\n      type = null;\n      lastValue = value;\n\n      // Start a timeout in case this was a singular event, and delay it by up\n      // to 40ms.\n      timeout = __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.setTimeout(function setTimeout() {\n        var _type = 'wheel';\n        this._zoom(-this.state.mouseWheelLastValue, this.state.mouseWheelPos);\n        this.setState({mouseWheelType: _type});\n      }.bind(this), 40);\n    } else if (!this._type) {\n      // This is a repeating event, but we don't know the type of event just\n      // yet.\n      // If the delta per time is small, we assume it's a fast trackpad;\n      // otherwise we switch into wheel mode.\n      type = Math.abs(timeDelta * value) < 200 ? 'trackpad' : 'wheel';\n\n      // Make sure our delayed event isn't fired again, because we accumulate\n      // the previous event (which was less than 40ms ago) into this event.\n      if (timeout) {\n        __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.clearTimeout(timeout);\n        timeout = null;\n        value += lastValue;\n      }\n    }\n\n    // Slow down zoom if shift key is held for more precise zooming\n    if (event.shiftKey && value) {\n      value = value / 4;\n    }\n\n    // Only fire the callback if we actually know what type of scrolling device\n    // the user uses.\n    if (type) {\n      this._zoom(-value, pos);\n    }\n\n    this.setState({\n      mouseWheelTime: time,\n      mouseWheelPos: pos,\n      mouseWheelType: type,\n      mouseWheelTimeout: timeout,\n      mouseWheelLastValue: lastValue\n    });\n  };\n  /* eslint-enable complexity, max-statements */\n\n  Interactions.prototype._zoom = function _zoom (delta, pos) {\n    // Scale by sigmoid of scroll wheel delta.\n    var scale = 2 / (1 + Math.exp(-Math.abs(delta / 100)));\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n    this.props.onZoom({pos: pos, scale: scale});\n    __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.clearTimeout(this._zoomEndTimeout);\n    this._zoomEndTimeout = __WEBPACK_IMPORTED_MODULE_4_global_window___default.a.setTimeout(function _setTimeout() {\n      this.props.onZoomEnd();\n    }.bind(this), 200);\n  };\n\n  Interactions.prototype.render = function render () {\n    var ref = this.props;\n    var width = ref.width;\n    var height = ref.height;\n\n    return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"].apply(void 0, [ 'div', {\n      ref: 'container',\n      onMouseMove: this._onMouseMove,\n      onMouseDown: this._onMouseDown,\n      onTouchStart: this._onTouchStart,\n      onContextMenu: this._onMouseDown,\n      onWheel: this._onWheel,\n      style: {width: width, height: height, position: 'relative'}\n    } ].concat( this.props.children ));\n  };\n\n  return Interactions;\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]));\n\n/* harmony default export */ exports[\"a\"] = Interactions;\n\nInteractions.displayName = 'Interactions';\nInteractions.propTypes = propTypes;\nInteractions.defaultProps = defaultProps;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2NvbXBvbmVudHMvbWFwLWludGVyYWN0aW9ucy5qcz8zMDNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNSBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLyBUSEUgU09GVFdBUkUuXG5cbi8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGJlbG93IG9yaWdpbmFsbHkgZnJvbTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2Jsb2IvbWFzdGVyL2pzL3VpL2hhbmRsZXIvc2Nyb2xsX3pvb20uanNcbmltcG9ydCB7UHJvcFR5cGVzLCBDb21wb25lbnQsIGNyZWF0ZUVsZW1lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzaGFsbG93Q29tcGFyZSBmcm9tICdyZWFjdC1hZGRvbnMtc2hhbGxvdy1jb21wYXJlJztcbmltcG9ydCBhdXRvYmluZCBmcm9tICcuLi91dGlscy9hdXRvYmluZCc7XG5pbXBvcnQgZG9jdW1lbnQgZnJvbSAnZ2xvYmFsL2RvY3VtZW50JztcbmltcG9ydCB3aW5kb3cgZnJvbSAnZ2xvYmFsL3dpbmRvdyc7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgdWEgPSB0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgP1xuICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpIDogJyc7XG52YXIgZmlyZWZveCA9IHVhLmluZGV4T2YoJ2ZpcmVmb3gnKSAhPT0gLTE7XG5cbi8vIEV4dHJhY3QgYSBwb3NpdGlvbiBmcm9tIGEgbW91c2UgZXZlbnRcbmZ1bmN0aW9uIGdldE1vdXNlUG9zaXRpb24oZWwsIGV2ZW50KSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGV2ZW50ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0gOiBldmVudDtcbiAgcmV0dXJuIFtcbiAgICBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gZWwuY2xpZW50TGVmdCxcbiAgICBldmVudC5jbGllbnRZIC0gcmVjdC50b3AgLSBlbC5jbGllbnRUb3BcbiAgXTtcbn1cblxuLy8gRXh0cmFjdCBhbiBhcnJheSBvZiB0b3VjaCBwb3NpdGlvbnMgZnJvbSBhIHRvdWNoIGV2ZW50XG5mdW5jdGlvbiBnZXRUb3VjaFBvc2l0aW9ucyhlbCwgZXZlbnQpIHtcbiAgdmFyIHBvaW50cyA9IFtdO1xuICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgdG91Y2hlcyA9IGdldFRvdWNoZXMoZXZlbnQpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICBwb2ludHMucHVzaChbXG4gICAgICB0b3VjaGVzW2ldLmNsaWVudFggLSByZWN0LmxlZnQgLSBlbC5jbGllbnRMZWZ0LFxuICAgICAgdG91Y2hlc1tpXS5jbGllbnRZIC0gcmVjdC50b3AgLSBlbC5jbGllbnRUb3BcbiAgICBdKTtcbiAgfVxuICByZXR1cm4gcG9pbnRzO1xufVxuXG4vLyBHZXQgcmVsZXZhbnQgdG91Y2hlcyBmcm9tIGV2ZW50IGRlcGVuZGluZyBvbiBldmVudCB0eXBlIChmb3IgYHRvdWNoZW5kYCBhbmRcbi8vIGB0b3VjaGNhbmNlbGAgdGhlIHByb3BlcnR5IGBjaGFuZ2VkVG91Y2hlc2AgY29udGFpbnMgdGhlIHJlbGV2YW50IGNvb3JkaW5hdGVzKVxuZnVuY3Rpb24gZ2V0VG91Y2hlcyhldmVudCkge1xuICB2YXIgdHlwZSA9IGV2ZW50LnR5cGU7XG4gIGlmICh0eXBlID09PSAndG91Y2hlbmQnIHx8IHR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICByZXR1cm4gZXZlbnQuY2hhbmdlZFRvdWNoZXM7XG4gIH1cbiAgcmV0dXJuIGV2ZW50LnRvdWNoZXM7XG59XG5cbi8vIFJldHVybiB0aGUgY2VudHJvaWQgb2YgYW4gYXJyYXkgb2YgcG9pbnRzXG5mdW5jdGlvbiBjZW50cm9pZChwb3NpdGlvbnMpIHtcbiAgdmFyIHN1bSA9IHBvc2l0aW9ucy5yZWR1Y2UoXG4gICAgZnVuY3Rpb24gKGFjYywgZWx0KSB7IHJldHVybiBbYWNjWzBdICsgZWx0WzBdLCBhY2NbMV0gKyBlbHRbMV1dOyB9LFxuICAgIFswLCAwXVxuICApO1xuICByZXR1cm4gW3N1bVswXSAvIHBvc2l0aW9ucy5sZW5ndGgsIHN1bVsxXSAvIHBvc2l0aW9ucy5sZW5ndGhdO1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgb25Nb3VzZURvd246IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlRHJhZzogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW91c2VSb3RhdGU6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlVXA6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlTW92ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW91c2VDbGljazogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uVG91Y2hTdGFydDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uVG91Y2hEcmFnOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Ub3VjaFJvdGF0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uVG91Y2hFbmQ6IFByb3BUeXBlcy5mdW5jLFxuICBvblRvdWNoVGFwOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25ab29tOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25ab29tRW5kOiBQcm9wVHlwZXMuZnVuY1xufTtcblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgb25Nb3VzZURvd246IG5vb3AsXG4gIG9uTW91c2VEcmFnOiBub29wLFxuICBvbk1vdXNlUm90YXRlOiBub29wLFxuICBvbk1vdXNlVXA6IG5vb3AsXG4gIG9uTW91c2VNb3ZlOiBub29wLFxuICBvbk1vdXNlQ2xpY2s6IG5vb3AsXG4gIG9uVG91Y2hTdGFydDogbm9vcCxcbiAgb25Ub3VjaERyYWc6IG5vb3AsXG4gIG9uVG91Y2hSb3RhdGU6IG5vb3AsXG4gIG9uVG91Y2hFbmQ6IG5vb3AsXG4gIG9uVG91Y2hUYXA6IG5vb3AsXG4gIG9uWm9vbTogbm9vcCxcbiAgb25ab29tRW5kOiBub29wXG59O1xuXG52YXIgSW50ZXJhY3Rpb25zID0gKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgZnVuY3Rpb24gSW50ZXJhY3Rpb25zKHByb3BzKSB7XG4gICAgQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkaWREcmFnOiBmYWxzZSxcbiAgICAgIGlzRnVuY3Rpb25LZXlQcmVzc2VkOiBmYWxzZSxcbiAgICAgIHN0YXJ0UG9zOiBudWxsLFxuICAgICAgcG9zOiBudWxsLFxuICAgICAgbW91c2VXaGVlbFBvczogbnVsbFxuICAgIH07XG4gICAgYXV0b2JpbmQodGhpcyk7XG4gIH1cblxuICBpZiAoIENvbXBvbmVudCApIEludGVyYWN0aW9ucy5fX3Byb3RvX18gPSBDb21wb25lbnQ7XG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBDb21wb25lbnQgJiYgQ29tcG9uZW50LnByb3RvdHlwZSApO1xuICBJbnRlcmFjdGlvbnMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50ZXJhY3Rpb25zO1xuXG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgIHJldHVybiBzaGFsbG93Q29tcGFyZSh0aGlzLCBuZXh0UHJvcHMsIG5leHRTdGF0ZSk7XG4gIH07XG5cbiAgSW50ZXJhY3Rpb25zLnByb3RvdHlwZS5fZ2V0TW91c2VQb3MgPSBmdW5jdGlvbiBfZ2V0TW91c2VQb3MgKGV2ZW50KSB7XG4gICAgdmFyIGVsID0gdGhpcy5yZWZzLmNvbnRhaW5lcjtcbiAgICByZXR1cm4gZ2V0TW91c2VQb3NpdGlvbihlbCwgZXZlbnQpO1xuICB9O1xuXG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUuX2dldFRvdWNoUG9zID0gZnVuY3Rpb24gX2dldFRvdWNoUG9zIChldmVudCkge1xuICAgIHZhciBlbCA9IHRoaXMucmVmcy5jb250YWluZXI7XG4gICAgdmFyIHBvc2l0aW9ucyA9IGdldFRvdWNoUG9zaXRpb25zKGVsLCBldmVudCk7XG4gICAgcmV0dXJuIGNlbnRyb2lkKHBvc2l0aW9ucyk7XG4gIH07XG5cbiAgSW50ZXJhY3Rpb25zLnByb3RvdHlwZS5faXNGdW5jdGlvbktleVByZXNzZWQgPSBmdW5jdGlvbiBfaXNGdW5jdGlvbktleVByZXNzZWQgKGV2ZW50KSB7XG4gICAgcmV0dXJuIEJvb2xlYW4oZXZlbnQubWV0YUtleSB8fCBldmVudC5hbHRLZXkgfHxcbiAgICAgIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkpO1xuICB9O1xuXG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUuX29uTW91c2VEb3duID0gZnVuY3Rpb24gX29uTW91c2VEb3duIChldmVudCkge1xuICAgIHZhciBwb3MgPSB0aGlzLl9nZXRNb3VzZVBvcyhldmVudCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkaWREcmFnOiBmYWxzZSxcbiAgICAgIHN0YXJ0UG9zOiBwb3MsXG4gICAgICBwb3M6IHBvcyxcbiAgICAgIGlzRnVuY3Rpb25LZXlQcmVzc2VkOiB0aGlzLl9pc0Z1bmN0aW9uS2V5UHJlc3NlZChldmVudClcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLm9uTW91c2VEb3duKHtwb3M6IHBvc30pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uTW91c2VEcmFnLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uTW91c2VVcCwgZmFsc2UpO1xuICB9O1xuXG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUuX29uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIF9vblRvdWNoU3RhcnQgKGV2ZW50KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuX2dldFRvdWNoUG9zKGV2ZW50KTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGRpZERyYWc6IGZhbHNlLFxuICAgICAgc3RhcnRQb3M6IHBvcyxcbiAgICAgIHBvczogcG9zLFxuICAgICAgaXNGdW5jdGlvbktleVByZXNzZWQ6IHRoaXMuX2lzRnVuY3Rpb25LZXlQcmVzc2VkKGV2ZW50KVxuICAgIH0pO1xuICAgIHRoaXMucHJvcHMub25Ub3VjaFN0YXJ0KHtwb3M6IHBvc30pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hEcmFnLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9vblRvdWNoRW5kLCBmYWxzZSk7XG4gIH07XG5cbiAgSW50ZXJhY3Rpb25zLnByb3RvdHlwZS5fb25Nb3VzZURyYWcgPSBmdW5jdGlvbiBfb25Nb3VzZURyYWcgKGV2ZW50KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuX2dldE1vdXNlUG9zKGV2ZW50KTtcbiAgICB0aGlzLnNldFN0YXRlKHtwb3M6IHBvcywgZGlkRHJhZzogdHJ1ZX0pO1xuICAgIGlmICh0aGlzLnN0YXRlLmlzRnVuY3Rpb25LZXlQcmVzc2VkKSB7XG4gICAgICB2YXIgcmVmID0gdGhpcy5zdGF0ZTtcbiAgICAgIHZhciBzdGFydFBvcyA9IHJlZi5zdGFydFBvcztcbiAgICAgIHRoaXMucHJvcHMub25Nb3VzZVJvdGF0ZSh7cG9zOiBwb3MsIHN0YXJ0UG9zOiBzdGFydFBvc30pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLm9uTW91c2VEcmFnKHtwb3M6IHBvc30pO1xuICAgIH1cbiAgfTtcblxuICBJbnRlcmFjdGlvbnMucHJvdG90eXBlLl9vblRvdWNoRHJhZyA9IGZ1bmN0aW9uIF9vblRvdWNoRHJhZyAoZXZlbnQpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5fZ2V0VG91Y2hQb3MoZXZlbnQpO1xuICAgIHRoaXMuc2V0U3RhdGUoe3BvczogcG9zLCBkaWREcmFnOiB0cnVlfSk7XG4gICAgaWYgKHRoaXMuc3RhdGUuaXNGdW5jdGlvbktleVByZXNzZWQpIHtcbiAgICAgIHZhciByZWYgPSB0aGlzLnN0YXRlO1xuICAgICAgdmFyIHN0YXJ0UG9zID0gcmVmLnN0YXJ0UG9zO1xuICAgICAgdGhpcy5wcm9wcy5vblRvdWNoUm90YXRlKHtwb3M6IHBvcywgc3RhcnRQb3M6IHN0YXJ0UG9zfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJvcHMub25Ub3VjaERyYWcoe3BvczogcG9zfSk7XG4gICAgfVxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH07XG5cbiAgSW50ZXJhY3Rpb25zLnByb3RvdHlwZS5fb25Nb3VzZVVwID0gZnVuY3Rpb24gX29uTW91c2VVcCAoZXZlbnQpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9vbk1vdXNlRHJhZywgZmFsc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9vbk1vdXNlVXAsIGZhbHNlKTtcbiAgICB2YXIgcG9zID0gdGhpcy5fZ2V0TW91c2VQb3MoZXZlbnQpO1xuICAgIHRoaXMuc2V0U3RhdGUoe3BvczogcG9zfSk7XG4gICAgdGhpcy5wcm9wcy5vbk1vdXNlVXAoe3BvczogcG9zfSk7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRpZERyYWcpIHtcbiAgICAgIHRoaXMucHJvcHMub25Nb3VzZUNsaWNrKHtwb3M6IHBvc30pO1xuICAgIH1cbiAgfTtcblxuICBJbnRlcmFjdGlvbnMucHJvdG90eXBlLl9vblRvdWNoRW5kID0gZnVuY3Rpb24gX29uVG91Y2hFbmQgKGV2ZW50KSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaERyYWcsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uVG91Y2hFbmQsIGZhbHNlKTtcbiAgICB2YXIgcG9zID0gdGhpcy5fZ2V0VG91Y2hQb3MoZXZlbnQpO1xuICAgIHRoaXMuc2V0U3RhdGUoe3BvczogcG9zfSk7XG4gICAgdGhpcy5wcm9wcy5vblRvdWNoRW5kKHtwb3M6IHBvc30pO1xuICAgIGlmICghdGhpcy5zdGF0ZS5kaWREcmFnKSB7XG4gICAgICB0aGlzLnByb3BzLm9uVG91Y2hUYXAoe3BvczogcG9zfSk7XG4gICAgfVxuICB9O1xuXG4gIEludGVyYWN0aW9ucy5wcm90b3R5cGUuX29uTW91c2VNb3ZlID0gZnVuY3Rpb24gX29uTW91c2VNb3ZlIChldmVudCkge1xuICAgIHZhciBwb3MgPSB0aGlzLl9nZXRNb3VzZVBvcyhldmVudCk7XG4gICAgdGhpcy5wcm9wcy5vbk1vdXNlTW92ZSh7cG9zOiBwb3N9KTtcbiAgfTtcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5LCBtYXgtc3RhdGVtZW50cyAqL1xuICBJbnRlcmFjdGlvbnMucHJvdG90eXBlLl9vbldoZWVsID0gZnVuY3Rpb24gX29uV2hlZWwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgdmFsdWUgPSBldmVudC5kZWx0YVk7XG4gICAgLy8gRmlyZWZveCBkb3VibGVzIHRoZSB2YWx1ZXMgb24gcmV0aW5hIHNjcmVlbnMuLi5cbiAgICBpZiAoZmlyZWZveCAmJiBldmVudC5kZWx0YU1vZGUgPT09IHdpbmRvdy5XaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCkge1xuICAgICAgdmFsdWUgLz0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgfVxuICAgIGlmIChldmVudC5kZWx0YU1vZGUgPT09IHdpbmRvdy5XaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICB2YWx1ZSAqPSA0MDtcbiAgICB9XG5cbiAgICB2YXIgdHlwZSA9IHRoaXMuc3RhdGUubW91c2VXaGVlbFR5cGU7XG4gICAgdmFyIHRpbWVvdXQgPSB0aGlzLnN0YXRlLm1vdXNlV2hlZWxUaW1lb3V0O1xuICAgIHZhciBsYXN0VmFsdWUgPSB0aGlzLnN0YXRlLm1vdXNlV2hlZWxMYXN0VmFsdWU7XG4gICAgdmFyIHRpbWUgPSB0aGlzLnN0YXRlLm1vdXNlV2hlZWxUaW1lO1xuXG4gICAgdmFyIG5vdyA9ICh3aW5kb3cucGVyZm9ybWFuY2UgfHwgRGF0ZSkubm93KCk7XG4gICAgdmFyIHRpbWVEZWx0YSA9IG5vdyAtICh0aW1lIHx8IDApO1xuXG4gICAgdmFyIHBvcyA9IHRoaXMuX2dldE1vdXNlUG9zKGV2ZW50KTtcbiAgICB0aW1lID0gbm93O1xuXG4gICAgaWYgKHZhbHVlICE9PSAwICYmIHZhbHVlICUgNC4wMDAyNDQxNDA2MjUgPT09IDApIHtcbiAgICAgIC8vIFRoaXMgb25lIGlzIGRlZmluaXRlbHkgYSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICAgIHR5cGUgPSAnd2hlZWwnO1xuICAgICAgLy8gTm9ybWFsaXplIHRoaXMgdmFsdWUgdG8gbWF0Y2ggdHJhY2twYWQuXG4gICAgICB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUgLyA0KTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSAwICYmIE1hdGguYWJzKHZhbHVlKSA8IDQpIHtcbiAgICAgIC8vIFRoaXMgb25lIGlzIGRlZmluaXRlbHkgYSB0cmFja3BhZCBldmVudCBiZWNhdXNlIGl0IGlzIHNvIHNtYWxsLlxuICAgICAgdHlwZSA9ICd0cmFja3BhZCc7XG4gICAgfSBlbHNlIGlmICh0aW1lRGVsdGEgPiA0MDApIHtcbiAgICAgIC8vIFRoaXMgaXMgbGlrZWx5IGEgbmV3IHNjcm9sbCBhY3Rpb24uXG4gICAgICB0eXBlID0gbnVsbDtcbiAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAvLyBTdGFydCBhIHRpbWVvdXQgaW4gY2FzZSB0aGlzIHdhcyBhIHNpbmd1bGFyIGV2ZW50LCBhbmQgZGVsYXkgaXQgYnkgdXBcbiAgICAgIC8vIHRvIDQwbXMuXG4gICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gc2V0VGltZW91dCgpIHtcbiAgICAgICAgdmFyIF90eXBlID0gJ3doZWVsJztcbiAgICAgICAgdGhpcy5fem9vbSgtdGhpcy5zdGF0ZS5tb3VzZVdoZWVsTGFzdFZhbHVlLCB0aGlzLnN0YXRlLm1vdXNlV2hlZWxQb3MpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHttb3VzZVdoZWVsVHlwZTogX3R5cGV9KTtcbiAgICAgIH0uYmluZCh0aGlzKSwgNDApO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuX3R5cGUpIHtcbiAgICAgIC8vIFRoaXMgaXMgYSByZXBlYXRpbmcgZXZlbnQsIGJ1dCB3ZSBkb24ndCBrbm93IHRoZSB0eXBlIG9mIGV2ZW50IGp1c3RcbiAgICAgIC8vIHlldC5cbiAgICAgIC8vIElmIHRoZSBkZWx0YSBwZXIgdGltZSBpcyBzbWFsbCwgd2UgYXNzdW1lIGl0J3MgYSBmYXN0IHRyYWNrcGFkO1xuICAgICAgLy8gb3RoZXJ3aXNlIHdlIHN3aXRjaCBpbnRvIHdoZWVsIG1vZGUuXG4gICAgICB0eXBlID0gTWF0aC5hYnModGltZURlbHRhICogdmFsdWUpIDwgMjAwID8gJ3RyYWNrcGFkJyA6ICd3aGVlbCc7XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgZGVsYXllZCBldmVudCBpc24ndCBmaXJlZCBhZ2FpbiwgYmVjYXVzZSB3ZSBhY2N1bXVsYXRlXG4gICAgICAvLyB0aGUgcHJldmlvdXMgZXZlbnQgKHdoaWNoIHdhcyBsZXNzIHRoYW4gNDBtcyBhZ28pIGludG8gdGhpcyBldmVudC5cbiAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB2YWx1ZSArPSBsYXN0VmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2xvdyBkb3duIHpvb20gaWYgc2hpZnQga2V5IGlzIGhlbGQgZm9yIG1vcmUgcHJlY2lzZSB6b29taW5nXG4gICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlIC8gNDtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGZpcmUgdGhlIGNhbGxiYWNrIGlmIHdlIGFjdHVhbGx5IGtub3cgd2hhdCB0eXBlIG9mIHNjcm9sbGluZyBkZXZpY2VcbiAgICAvLyB0aGUgdXNlciB1c2VzLlxuICAgIGlmICh0eXBlKSB7XG4gICAgICB0aGlzLl96b29tKC12YWx1ZSwgcG9zKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1vdXNlV2hlZWxUaW1lOiB0aW1lLFxuICAgICAgbW91c2VXaGVlbFBvczogcG9zLFxuICAgICAgbW91c2VXaGVlbFR5cGU6IHR5cGUsXG4gICAgICBtb3VzZVdoZWVsVGltZW91dDogdGltZW91dCxcbiAgICAgIG1vdXNlV2hlZWxMYXN0VmFsdWU6IGxhc3RWYWx1ZVxuICAgIH0pO1xuICB9O1xuICAvKiBlc2xpbnQtZW5hYmxlIGNvbXBsZXhpdHksIG1heC1zdGF0ZW1lbnRzICovXG5cbiAgSW50ZXJhY3Rpb25zLnByb3RvdHlwZS5fem9vbSA9IGZ1bmN0aW9uIF96b29tIChkZWx0YSwgcG9zKSB7XG4gICAgLy8gU2NhbGUgYnkgc2lnbW9pZCBvZiBzY3JvbGwgd2hlZWwgZGVsdGEuXG4gICAgdmFyIHNjYWxlID0gMiAvICgxICsgTWF0aC5leHAoLU1hdGguYWJzKGRlbHRhIC8gMTAwKSkpO1xuICAgIGlmIChkZWx0YSA8IDAgJiYgc2NhbGUgIT09IDApIHtcbiAgICAgIHNjYWxlID0gMSAvIHNjYWxlO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uWm9vbSh7cG9zOiBwb3MsIHNjYWxlOiBzY2FsZX0pO1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fem9vbUVuZFRpbWVvdXQpO1xuICAgIHRoaXMuX3pvb21FbmRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gX3NldFRpbWVvdXQoKSB7XG4gICAgICB0aGlzLnByb3BzLm9uWm9vbUVuZCgpO1xuICAgIH0uYmluZCh0aGlzKSwgMjAwKTtcbiAgfTtcblxuICBJbnRlcmFjdGlvbnMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMucHJvcHM7XG4gICAgdmFyIHdpZHRoID0gcmVmLndpZHRoO1xuICAgIHZhciBoZWlnaHQgPSByZWYuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQuYXBwbHkodm9pZCAwLCBbICdkaXYnLCB7XG4gICAgICByZWY6ICdjb250YWluZXInLFxuICAgICAgb25Nb3VzZU1vdmU6IHRoaXMuX29uTW91c2VNb3ZlLFxuICAgICAgb25Nb3VzZURvd246IHRoaXMuX29uTW91c2VEb3duLFxuICAgICAgb25Ub3VjaFN0YXJ0OiB0aGlzLl9vblRvdWNoU3RhcnQsXG4gICAgICBvbkNvbnRleHRNZW51OiB0aGlzLl9vbk1vdXNlRG93bixcbiAgICAgIG9uV2hlZWw6IHRoaXMuX29uV2hlZWwsXG4gICAgICBzdHlsZToge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsIHBvc2l0aW9uOiAncmVsYXRpdmUnfVxuICAgIH0gXS5jb25jYXQoIHRoaXMucHJvcHMuY2hpbGRyZW4gKSk7XG4gIH07XG5cbiAgcmV0dXJuIEludGVyYWN0aW9ucztcbn0oQ29tcG9uZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyYWN0aW9ucztcblxuSW50ZXJhY3Rpb25zLmRpc3BsYXlOYW1lID0gJ0ludGVyYWN0aW9ucyc7XG5JbnRlcmFjdGlvbnMucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuSW50ZXJhY3Rpb25zLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9jb21wb25lbnRzL21hcC1pbnRlcmFjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){eval("(function (global, factory) {\n     true ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.glMatrix = factory());\n}(this, (function () { 'use strict';\n\nfunction create() {\n    var out = new Float32Array(3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction transformMat3(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n\n\n\n\nvar vec = create();\n\nfunction create$1() {\n    var out = new Float32Array(4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction scale$1(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\n\n\n\n\n\n\n\nfunction normalize$1(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    var len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        out[0] = x * len;\n        out[1] = y * len;\n        out[2] = z * len;\n        out[3] = w * len;\n    }\n    return out;\n}\n\n\n\nfunction transformMat4$1(out, a, m) {\n    var x = a[0], y = a[1], z = a[2], w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n}\n\nvar vec$1 = create$1();\n\nfunction create$2() {\n    var out = new Float32Array(4);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n}\n\n\n\n\n\n\n\n\n\n\nfunction rotate(out, a, rad) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 *  c + a2 * s;\n    out[1] = a1 *  c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    return out;\n}\nfunction scale$2(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    return out;\n}\n\nfunction create$3() {\n    var out = new Float32Array(9);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction fromRotation$1(out, rad) {\n    var s = Math.sin(rad), c = Math.cos(rad);\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = -s;\n    out[4] = c;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n}\n\nfunction create$4() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n\n\n\nfunction identity$2(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\nfunction invert$2(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n}\n\n\nfunction multiply$4(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\nfunction translate$1(out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n}\nfunction scale$4(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n\nfunction rotateX$1(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    if (a !== out) {\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\n\nfunction rotateZ$1(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    if (a !== out) {\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n}\n\nfunction ortho(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n\nvar mapboxBuild = {\n    vec3: {\n        transformMat3: transformMat3\n    },\n    vec4: {\n        transformMat4: transformMat4$1\n    },\n    mat2: {\n        create: create$2,\n        rotate: rotate,\n        scale: scale$2\n    },\n    mat3: {\n        create: create$3,\n        fromRotation: fromRotation$1\n    },\n    mat4: {\n        create: create$4,\n        identity: identity$2,\n        translate: translate$1,\n        scale: scale$4,\n        multiply: multiply$4,\n        perspective: perspective,\n        rotateX: rotateX$1,\n        rotateZ: rotateZ$1,\n        invert: invert$2,\n        ortho: ortho\n    }\n};\n\nreturn mapboxBuild;\n\n})));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L0BtYXBib3gvZ2wtbWF0cml4L2Rpc3QvZ2wtbWF0cml4LmpzPzBjYWQiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmdsTWF0cml4ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgdmFyIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQzKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSwgeSA9IGFbMV0sIHogPSBhWzJdO1xuICAgIG91dFswXSA9IHggKiBtWzBdICsgeSAqIG1bM10gKyB6ICogbVs2XTtcbiAgICBvdXRbMV0gPSB4ICogbVsxXSArIHkgKiBtWzRdICsgeiAqIG1bN107XG4gICAgb3V0WzJdID0geCAqIG1bMl0gKyB5ICogbVs1XSArIHogKiBtWzhdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cblxuXG5cbnZhciB2ZWMgPSBjcmVhdGUoKTtcblxuZnVuY3Rpb24gY3JlYXRlJDEoKSB7XG4gICAgdmFyIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5mdW5jdGlvbiBzY2FsZSQxKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKiBiO1xuICAgIG91dFsxXSA9IGFbMV0gKiBiO1xuICAgIG91dFsyXSA9IGFbMl0gKiBiO1xuICAgIG91dFszXSA9IGFbM10gKiBiO1xuICAgIHJldHVybiBvdXQ7XG59XG5cblxuXG5cblxuXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKG91dCwgYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdLFxuICAgICAgICB3ID0gYVszXTtcbiAgICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgICAgICBvdXRbMF0gPSB4ICogbGVuO1xuICAgICAgICBvdXRbMV0gPSB5ICogbGVuO1xuICAgICAgICBvdXRbMl0gPSB6ICogbGVuO1xuICAgICAgICBvdXRbM10gPSB3ICogbGVuO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuXG5cblxuZnVuY3Rpb24gdHJhbnNmb3JtTWF0NCQxKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSwgeSA9IGFbMV0sIHogPSBhWzJdLCB3ID0gYVszXTtcbiAgICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gICAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICAgIG91dFsyXSA9IG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSAqIHc7XG4gICAgb3V0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgICByZXR1cm4gb3V0O1xufVxuXG52YXIgdmVjJDEgPSBjcmVhdGUkMSgpO1xuXG5mdW5jdGlvbiBjcmVhdGUkMigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59XG5cblxuXG5cblxuXG5cblxuXG5cbmZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCkge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sXG4gICAgICAgIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgICBvdXRbMF0gPSBhMCAqICBjICsgYTIgKiBzO1xuICAgIG91dFsxXSA9IGExICogIGMgKyBhMyAqIHM7XG4gICAgb3V0WzJdID0gYTAgKiAtcyArIGEyICogYztcbiAgICBvdXRbM10gPSBhMSAqIC1zICsgYTMgKiBjO1xuICAgIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBzY2FsZSQyKG91dCwgYSwgdikge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sXG4gICAgICAgIHYwID0gdlswXSwgdjEgPSB2WzFdO1xuICAgIG91dFswXSA9IGEwICogdjA7XG4gICAgb3V0WzFdID0gYTEgKiB2MDtcbiAgICBvdXRbMl0gPSBhMiAqIHYxO1xuICAgIG91dFszXSA9IGEzICogdjE7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlJDMoKSB7XG4gICAgdmFyIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoOSk7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAxO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbmZ1bmN0aW9uIGZyb21Sb3RhdGlvbiQxKG91dCwgcmFkKSB7XG4gICAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLCBjID0gTWF0aC5jb3MocmFkKTtcbiAgICBvdXRbMF0gPSBjO1xuICAgIG91dFsxXSA9IHM7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAtcztcbiAgICBvdXRbNF0gPSBjO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlJDQoKSB7XG4gICAgdmFyIG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAxO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAwO1xuICAgIG91dFs5XSA9IDA7XG4gICAgb3V0WzEwXSA9IDE7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9IDA7XG4gICAgb3V0WzE1XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuXG5cblxuZnVuY3Rpb24gaWRlbnRpdHkkMihvdXQpIHtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gMTtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMF0gPSAxO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICAgIG91dFsxNV0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGludmVydCQyKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLCBhMDMgPSBhWzNdLFxuICAgICAgICBhMTAgPSBhWzRdLCBhMTEgPSBhWzVdLCBhMTIgPSBhWzZdLCBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLCBhMjEgPSBhWzldLCBhMjIgPSBhWzEwXSwgYTIzID0gYVsxMV0sXG4gICAgICAgIGEzMCA9IGFbMTJdLCBhMzEgPSBhWzEzXSwgYTMyID0gYVsxNF0sIGEzMyA9IGFbMTVdLFxuICAgICAgICBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTAsXG4gICAgICAgIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMCxcbiAgICAgICAgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwLFxuICAgICAgICBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTEsXG4gICAgICAgIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMSxcbiAgICAgICAgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyLFxuICAgICAgICBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzAsXG4gICAgICAgIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMCxcbiAgICAgICAgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwLFxuICAgICAgICBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzEsXG4gICAgICAgIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMSxcbiAgICAgICAgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyLFxuICAgICAgICBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG4gICAgaWYgKCFkZXQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRldCA9IDEuMCAvIGRldDtcbiAgICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgICBvdXRbMV0gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgICBvdXRbMl0gPSAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldDtcbiAgICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgICBvdXRbNV0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgICBvdXRbN10gPSAoYTIwICogYjA1IC0gYTIyICogYjAyICsgYTIzICogYjAxKSAqIGRldDtcbiAgICBvdXRbOF0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcbiAgICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgICBvdXRbMTBdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gICAgb3V0WzExXSA9IChhMjEgKiBiMDIgLSBhMjAgKiBiMDQgLSBhMjMgKiBiMDApICogZGV0O1xuICAgIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgICBvdXRbMTNdID0gKGEwMCAqIGIwOSAtIGEwMSAqIGIwNyArIGEwMiAqIGIwNikgKiBkZXQ7XG4gICAgb3V0WzE0XSA9IChhMzEgKiBiMDEgLSBhMzAgKiBiMDMgLSBhMzIgKiBiMDApICogZGV0O1xuICAgIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5cbmZ1bmN0aW9uIG11bHRpcGx5JDQob3V0LCBhLCBiKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV07XG4gICAgdmFyIGIwICA9IGJbMF0sIGIxID0gYlsxXSwgYjIgPSBiWzJdLCBiMyA9IGJbM107XG4gICAgb3V0WzBdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gICAgb3V0WzFdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gICAgb3V0WzJdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gICAgb3V0WzNdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gICAgYjAgPSBiWzRdOyBiMSA9IGJbNV07IGIyID0gYls2XTsgYjMgPSBiWzddO1xuICAgIG91dFs0XSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICAgIG91dFs1XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICAgIG91dFs2XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICAgIG91dFs3XSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICAgIGIwID0gYls4XTsgYjEgPSBiWzldOyBiMiA9IGJbMTBdOyBiMyA9IGJbMTFdO1xuICAgIG91dFs4XSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICAgIG91dFs5XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICAgIG91dFsxMF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgICBvdXRbMTFdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gICAgYjAgPSBiWzEyXTsgYjEgPSBiWzEzXTsgYjIgPSBiWzE0XTsgYjMgPSBiWzE1XTtcbiAgICBvdXRbMTJdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gICAgb3V0WzEzXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICAgIG91dFsxNF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgICBvdXRbMTVdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gICAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHRyYW5zbGF0ZSQxKG91dCwgYSwgdikge1xuICAgIHZhciB4ID0gdlswXSwgeSA9IHZbMV0sIHogPSB2WzJdLFxuICAgICAgICBhMDAsIGEwMSwgYTAyLCBhMDMsXG4gICAgICAgIGExMCwgYTExLCBhMTIsIGExMyxcbiAgICAgICAgYTIwLCBhMjEsIGEyMiwgYTIzO1xuICAgIGlmIChhID09PSBvdXQpIHtcbiAgICAgICAgb3V0WzEyXSA9IGFbMF0gKiB4ICsgYVs0XSAqIHkgKyBhWzhdICogeiArIGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhWzJdICogeCArIGFbNl0gKiB5ICsgYVsxMF0gKiB6ICsgYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzNdICogeCArIGFbN10gKiB5ICsgYVsxMV0gKiB6ICsgYVsxNV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYTAwID0gYVswXTsgYTAxID0gYVsxXTsgYTAyID0gYVsyXTsgYTAzID0gYVszXTtcbiAgICAgICAgYTEwID0gYVs0XTsgYTExID0gYVs1XTsgYTEyID0gYVs2XTsgYTEzID0gYVs3XTtcbiAgICAgICAgYTIwID0gYVs4XTsgYTIxID0gYVs5XTsgYTIyID0gYVsxMF07IGEyMyA9IGFbMTFdO1xuICAgICAgICBvdXRbMF0gPSBhMDA7IG91dFsxXSA9IGEwMTsgb3V0WzJdID0gYTAyOyBvdXRbM10gPSBhMDM7XG4gICAgICAgIG91dFs0XSA9IGExMDsgb3V0WzVdID0gYTExOyBvdXRbNl0gPSBhMTI7IG91dFs3XSA9IGExMztcbiAgICAgICAgb3V0WzhdID0gYTIwOyBvdXRbOV0gPSBhMjE7IG91dFsxMF0gPSBhMjI7IG91dFsxMV0gPSBhMjM7XG4gICAgICAgIG91dFsxMl0gPSBhMDAgKiB4ICsgYTEwICogeSArIGEyMCAqIHogKyBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGEwMSAqIHggKyBhMTEgKiB5ICsgYTIxICogeiArIGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYTAyICogeCArIGExMiAqIHkgKyBhMjIgKiB6ICsgYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhMDMgKiB4ICsgYTEzICogeSArIGEyMyAqIHogKyBhWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHNjYWxlJDQob3V0LCBhLCB2KSB7XG4gICAgdmFyIHggPSB2WzBdLCB5ID0gdlsxXSwgeiA9IHZbMl07XG4gICAgb3V0WzBdID0gYVswXSAqIHg7XG4gICAgb3V0WzFdID0gYVsxXSAqIHg7XG4gICAgb3V0WzJdID0gYVsyXSAqIHg7XG4gICAgb3V0WzNdID0gYVszXSAqIHg7XG4gICAgb3V0WzRdID0gYVs0XSAqIHk7XG4gICAgb3V0WzVdID0gYVs1XSAqIHk7XG4gICAgb3V0WzZdID0gYVs2XSAqIHk7XG4gICAgb3V0WzddID0gYVs3XSAqIHk7XG4gICAgb3V0WzhdID0gYVs4XSAqIHo7XG4gICAgb3V0WzldID0gYVs5XSAqIHo7XG4gICAgb3V0WzEwXSA9IGFbMTBdICogejtcbiAgICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiByb3RhdGVYJDEob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBhMTAgPSBhWzRdLFxuICAgICAgICBhMTEgPSBhWzVdLFxuICAgICAgICBhMTIgPSBhWzZdLFxuICAgICAgICBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLFxuICAgICAgICBhMjEgPSBhWzldLFxuICAgICAgICBhMjIgPSBhWzEwXSxcbiAgICAgICAgYTIzID0gYVsxMV07XG4gICAgaWYgKGEgIT09IG91dCkge1xuICAgICAgICBvdXRbMF0gID0gYVswXTtcbiAgICAgICAgb3V0WzFdICA9IGFbMV07XG4gICAgICAgIG91dFsyXSAgPSBhWzJdO1xuICAgICAgICBvdXRbM10gID0gYVszXTtcbiAgICAgICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICAgICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIH1cbiAgICBvdXRbNF0gPSBhMTAgKiBjICsgYTIwICogcztcbiAgICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgICBvdXRbNl0gPSBhMTIgKiBjICsgYTIyICogcztcbiAgICBvdXRbN10gPSBhMTMgKiBjICsgYTIzICogcztcbiAgICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgICBvdXRbOV0gPSBhMjEgKiBjIC0gYTExICogcztcbiAgICBvdXRbMTBdID0gYTIyICogYyAtIGExMiAqIHM7XG4gICAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHJvdGF0ZVokMShvdXQsIGEsIHJhZCkge1xuICAgIHZhciBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCksXG4gICAgICAgIGEwMCA9IGFbMF0sXG4gICAgICAgIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sXG4gICAgICAgIGExMSA9IGFbNV0sXG4gICAgICAgIGExMiA9IGFbNl0sXG4gICAgICAgIGExMyA9IGFbN107XG4gICAgaWYgKGEgIT09IG91dCkge1xuICAgICAgICBvdXRbOF0gID0gYVs4XTtcbiAgICAgICAgb3V0WzldICA9IGFbOV07XG4gICAgICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICAgICAgb3V0WzExXSA9IGFbMTFdO1xuICAgICAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICAgICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgICAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgfVxuICAgIG91dFswXSA9IGEwMCAqIGMgKyBhMTAgKiBzO1xuICAgIG91dFsxXSA9IGEwMSAqIGMgKyBhMTEgKiBzO1xuICAgIG91dFsyXSA9IGEwMiAqIGMgKyBhMTIgKiBzO1xuICAgIG91dFszXSA9IGEwMyAqIGMgKyBhMTMgKiBzO1xuICAgIG91dFs0XSA9IGExMCAqIGMgLSBhMDAgKiBzO1xuICAgIG91dFs1XSA9IGExMSAqIGMgLSBhMDEgKiBzO1xuICAgIG91dFs2XSA9IGExMiAqIGMgLSBhMDIgKiBzO1xuICAgIG91dFs3XSA9IGExMyAqIGMgLSBhMDMgKiBzO1xuICAgIHJldHVybiBvdXQ7XG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuZnVuY3Rpb24gcGVyc3BlY3RpdmUob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICAgIHZhciBmID0gMS4wIC8gTWF0aC50YW4oZm92eSAvIDIpLFxuICAgICAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs1XSA9IGY7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDA7XG4gICAgb3V0WzldID0gMDtcbiAgICBvdXRbMTBdID0gKGZhciArIG5lYXIpICogbmY7XG4gICAgb3V0WzExXSA9IC0xO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAoMiAqIGZhciAqIG5lYXIpICogbmY7XG4gICAgb3V0WzE1XSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gb3J0aG8ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICAgIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KSxcbiAgICAgICAgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCksXG4gICAgICAgIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgICBvdXRbMF0gPSAtMiAqIGxyO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gLTIgKiBidDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMF0gPSAyICogbmY7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IChsZWZ0ICsgcmlnaHQpICogbHI7XG4gICAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gICAgb3V0WzE0XSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICAgIG91dFsxNV0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbnZhciBtYXBib3hCdWlsZCA9IHtcbiAgICB2ZWMzOiB7XG4gICAgICAgIHRyYW5zZm9ybU1hdDM6IHRyYW5zZm9ybU1hdDNcbiAgICB9LFxuICAgIHZlYzQ6IHtcbiAgICAgICAgdHJhbnNmb3JtTWF0NDogdHJhbnNmb3JtTWF0NCQxXG4gICAgfSxcbiAgICBtYXQyOiB7XG4gICAgICAgIGNyZWF0ZTogY3JlYXRlJDIsXG4gICAgICAgIHJvdGF0ZTogcm90YXRlLFxuICAgICAgICBzY2FsZTogc2NhbGUkMlxuICAgIH0sXG4gICAgbWF0Mzoge1xuICAgICAgICBjcmVhdGU6IGNyZWF0ZSQzLFxuICAgICAgICBmcm9tUm90YXRpb246IGZyb21Sb3RhdGlvbiQxXG4gICAgfSxcbiAgICBtYXQ0OiB7XG4gICAgICAgIGNyZWF0ZTogY3JlYXRlJDQsXG4gICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSQyLFxuICAgICAgICB0cmFuc2xhdGU6IHRyYW5zbGF0ZSQxLFxuICAgICAgICBzY2FsZTogc2NhbGUkNCxcbiAgICAgICAgbXVsdGlwbHk6IG11bHRpcGx5JDQsXG4gICAgICAgIHBlcnNwZWN0aXZlOiBwZXJzcGVjdGl2ZSxcbiAgICAgICAgcm90YXRlWDogcm90YXRlWCQxLFxuICAgICAgICByb3RhdGVaOiByb3RhdGVaJDEsXG4gICAgICAgIGludmVydDogaW52ZXJ0JDIsXG4gICAgICAgIG9ydGhvOiBvcnRob1xuICAgIH1cbn07XG5cbnJldHVybiBtYXBib3hCdWlsZDtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9AbWFwYm94L2dsLW1hdHJpeC9kaXN0L2dsLW1hdHJpeC5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")},,,,function(module,exports){eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzPzQ5NGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){"use strict";eval("\n\n/**\n * The maximum value of a coordinate in the internal tile coordinate system. Coordinates of\n * all source features normalized to this extent upon load.\n *\n * The value is a consequence of the following:\n *\n * * Vertex buffer store positions as signed 16 bit integers.\n * * One bit is lost for signedness to support tile buffers.\n * * One bit is lost because the line vertex buffer packs 1 bit of other data into the int.\n * * One bit is lost to support features extending past the extent on the right edge of the tile.\n * * This leaves us with 2^13 = 8192\n *\n * @private\n * @readonly\n */\nmodule.exports = 8192;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy9kYXRhL2V4dGVudC5qcz9lOGNjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUaGUgbWF4aW11bSB2YWx1ZSBvZiBhIGNvb3JkaW5hdGUgaW4gdGhlIGludGVybmFsIHRpbGUgY29vcmRpbmF0ZSBzeXN0ZW0uIENvb3JkaW5hdGVzIG9mXG4gKiBhbGwgc291cmNlIGZlYXR1cmVzIG5vcm1hbGl6ZWQgdG8gdGhpcyBleHRlbnQgdXBvbiBsb2FkLlxuICpcbiAqIFRoZSB2YWx1ZSBpcyBhIGNvbnNlcXVlbmNlIG9mIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogKiBWZXJ0ZXggYnVmZmVyIHN0b3JlIHBvc2l0aW9ucyBhcyBzaWduZWQgMTYgYml0IGludGVnZXJzLlxuICogKiBPbmUgYml0IGlzIGxvc3QgZm9yIHNpZ25lZG5lc3MgdG8gc3VwcG9ydCB0aWxlIGJ1ZmZlcnMuXG4gKiAqIE9uZSBiaXQgaXMgbG9zdCBiZWNhdXNlIHRoZSBsaW5lIHZlcnRleCBidWZmZXIgcGFja3MgMSBiaXQgb2Ygb3RoZXIgZGF0YSBpbnRvIHRoZSBpbnQuXG4gKiAqIE9uZSBiaXQgaXMgbG9zdCB0byBzdXBwb3J0IGZlYXR1cmVzIGV4dGVuZGluZyBwYXN0IHRoZSBleHRlbnQgb24gdGhlIHJpZ2h0IGVkZ2Ugb2YgdGhlIHRpbGUuXG4gKiAqIFRoaXMgbGVhdmVzIHVzIHdpdGggMl4xMyA9IDgxOTJcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJlYWRvbmx5XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gODE5MjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXBib3gtZ2wvanMvZGF0YS9leHRlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval("\n\nconst wrap = __webpack_require__(/*! ../util/util */ 19).wrap;\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n *\n * Mapbox GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match GeoJSON.\n *\n * Note that any Mapbox GL method that accepts a `LngLat` object as an argument or option\n * can also accept an `Array` of two numbers and will perform an implicit conversion.\n * This flexible type is documented as [`LngLatLike`](#LngLatLike).\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n * @see [Get coordinates of the mouse pointer](https://www.mapbox.com/mapbox-gl-js/example/mouse-position/)\n * @see [Display a popup](https://www.mapbox.com/mapbox-gl-js/example/popup/)\n * @see [Highlight features within a bounding box](https://www.mapbox.com/mapbox-gl-js/example/using-box-queryrenderedfeatures/)\n * @see [Create a timeline animation](https://www.mapbox.com/mapbox-gl-js/example/timeline-animation/)\n */\nclass LngLat {\n    constructor(lng, lat) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    /**\n     * Returns a new `LngLat` object whose longitude is wrapped to the range (-180, 180).\n     *\n     * @returns {LngLat} The wrapped `LngLat` object.\n     * @example\n     * var ll = new mapboxgl.LngLat(286.0251, 40.7736);\n     * var wrapped = ll.wrap();\n     * wrapped.lng; // = -73.9749\n     */\n    wrap() {\n        return new LngLat(wrap(this.lng, -180, 180), this.lat);\n    }\n\n    /**\n     * Returns the coordinates represented as an array of two numbers.\n     *\n     * @returns {Array<number>} The coordinates represeted as an array of longitude and latitude.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toArray(); // = [-73.9749, 40.7736]\n     */\n    toArray() {\n        return [this.lng, this.lat];\n    }\n\n    /**\n     * Returns the coordinates represent as a string.\n     *\n     * @returns {string} The coordinates represented as a string of the format `'LngLat(lng, lat)'`.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toString(); // = \"LngLat(-73.9749, 40.7736)\"\n     */\n    toString() {\n        return `LngLat(${this.lng}, ${this.lat})`;\n    }\n}\n\n/**\n * Converts an array of two numbers to a `LngLat` object.\n *\n * If a `LngLat` object is passed in, the function returns it unchanged.\n *\n * @param {LngLatLike} input An array of two numbers to convert, or a `LngLat` object to return.\n * @returns {LngLat} A new `LngLat` object, if a conversion occurred, or the original `LngLat` object.\n * @example\n * var arr = [-73.9749, 40.7736];\n * var ll = mapboxgl.LngLat.convert(arr);\n * ll;   // = LngLat {lng: -73.9749, lat: 40.7736}\n */\nLngLat.convert = function (input) {\n    if (input instanceof LngLat) {\n        return input;\n    } else if (input && input.hasOwnProperty('lng') && input.hasOwnProperty('lat')) {\n        return new LngLat(input.lng, input.lat);\n    } else if (Array.isArray(input) && input.length === 2) {\n        return new LngLat(input[0], input[1]);\n    } else {\n        throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n    }\n};\n\nmodule.exports = LngLat;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy9nZW8vbG5nX2xhdC5qcz9jNWFhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3Qgd3JhcCA9IHJlcXVpcmUoJy4uL3V0aWwvdXRpbCcpLndyYXA7XG5cbi8qKlxuICogQSBgTG5nTGF0YCBvYmplY3QgcmVwcmVzZW50cyBhIGdpdmVuIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUgY29vcmRpbmF0ZSwgbWVhc3VyZWQgaW4gZGVncmVlcy5cbiAqXG4gKiBNYXBib3ggR0wgdXNlcyBsb25naXR1ZGUsIGxhdGl0dWRlIGNvb3JkaW5hdGUgb3JkZXIgKGFzIG9wcG9zZWQgdG8gbGF0aXR1ZGUsIGxvbmdpdHVkZSkgdG8gbWF0Y2ggR2VvSlNPTi5cbiAqXG4gKiBOb3RlIHRoYXQgYW55IE1hcGJveCBHTCBtZXRob2QgdGhhdCBhY2NlcHRzIGEgYExuZ0xhdGAgb2JqZWN0IGFzIGFuIGFyZ3VtZW50IG9yIG9wdGlvblxuICogY2FuIGFsc28gYWNjZXB0IGFuIGBBcnJheWAgb2YgdHdvIG51bWJlcnMgYW5kIHdpbGwgcGVyZm9ybSBhbiBpbXBsaWNpdCBjb252ZXJzaW9uLlxuICogVGhpcyBmbGV4aWJsZSB0eXBlIGlzIGRvY3VtZW50ZWQgYXMgW2BMbmdMYXRMaWtlYF0oI0xuZ0xhdExpa2UpLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBsbmcgTG9uZ2l0dWRlLCBtZWFzdXJlZCBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IGxhdCBMYXRpdHVkZSwgbWVhc3VyZWQgaW4gZGVncmVlcy5cbiAqIEBleGFtcGxlXG4gKiB2YXIgbGwgPSBuZXcgbWFwYm94Z2wuTG5nTGF0KC03My45NzQ5LCA0MC43NzM2KTtcbiAqIEBzZWUgW0dldCBjb29yZGluYXRlcyBvZiB0aGUgbW91c2UgcG9pbnRlcl0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvZXhhbXBsZS9tb3VzZS1wb3NpdGlvbi8pXG4gKiBAc2VlIFtEaXNwbGF5IGEgcG9wdXBdKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2V4YW1wbGUvcG9wdXAvKVxuICogQHNlZSBbSGlnaGxpZ2h0IGZlYXR1cmVzIHdpdGhpbiBhIGJvdW5kaW5nIGJveF0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvZXhhbXBsZS91c2luZy1ib3gtcXVlcnlyZW5kZXJlZGZlYXR1cmVzLylcbiAqIEBzZWUgW0NyZWF0ZSBhIHRpbWVsaW5lIGFuaW1hdGlvbl0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvZXhhbXBsZS90aW1lbGluZS1hbmltYXRpb24vKVxuICovXG5jbGFzcyBMbmdMYXQge1xuICAgIGNvbnN0cnVjdG9yKGxuZywgbGF0KSB7XG4gICAgICAgIGlmIChpc05hTihsbmcpIHx8IGlzTmFOKGxhdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBMbmdMYXQgb2JqZWN0OiAoJHtsbmd9LCAke2xhdH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sbmcgPSArbG5nO1xuICAgICAgICB0aGlzLmxhdCA9ICtsYXQ7XG4gICAgICAgIGlmICh0aGlzLmxhdCA+IDkwIHx8IHRoaXMubGF0IDwgLTkwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTG5nTGF0IGxhdGl0dWRlIHZhbHVlOiBtdXN0IGJlIGJldHdlZW4gLTkwIGFuZCA5MCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBgTG5nTGF0YCBvYmplY3Qgd2hvc2UgbG9uZ2l0dWRlIGlzIHdyYXBwZWQgdG8gdGhlIHJhbmdlICgtMTgwLCAxODApLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0xuZ0xhdH0gVGhlIHdyYXBwZWQgYExuZ0xhdGAgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIGxsID0gbmV3IG1hcGJveGdsLkxuZ0xhdCgyODYuMDI1MSwgNDAuNzczNik7XG4gICAgICogdmFyIHdyYXBwZWQgPSBsbC53cmFwKCk7XG4gICAgICogd3JhcHBlZC5sbmc7IC8vID0gLTczLjk3NDlcbiAgICAgKi9cbiAgICB3cmFwKCkge1xuICAgICAgICByZXR1cm4gbmV3IExuZ0xhdCh3cmFwKHRoaXMubG5nLCAtMTgwLCAxODApLCB0aGlzLmxhdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZXMgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2YgdHdvIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gVGhlIGNvb3JkaW5hdGVzIHJlcHJlc2V0ZWQgYXMgYW4gYXJyYXkgb2YgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBsbCA9IG5ldyBtYXBib3hnbC5MbmdMYXQoLTczLjk3NDksIDQwLjc3MzYpO1xuICAgICAqIGxsLnRvQXJyYXkoKTsgLy8gPSBbLTczLjk3NDksIDQwLjc3MzZdXG4gICAgICovXG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmxuZywgdGhpcy5sYXRdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGVzIHJlcHJlc2VudCBhcyBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb29yZGluYXRlcyByZXByZXNlbnRlZCBhcyBhIHN0cmluZyBvZiB0aGUgZm9ybWF0IGAnTG5nTGF0KGxuZywgbGF0KSdgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICogdmFyIGxsID0gbmV3IG1hcGJveGdsLkxuZ0xhdCgtNzMuOTc0OSwgNDAuNzczNik7XG4gICAgICogbGwudG9TdHJpbmcoKTsgLy8gPSBcIkxuZ0xhdCgtNzMuOTc0OSwgNDAuNzczNilcIlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYExuZ0xhdCgke3RoaXMubG5nfSwgJHt0aGlzLmxhdH0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXkgb2YgdHdvIG51bWJlcnMgdG8gYSBgTG5nTGF0YCBvYmplY3QuXG4gKlxuICogSWYgYSBgTG5nTGF0YCBvYmplY3QgaXMgcGFzc2VkIGluLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdCB1bmNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtMbmdMYXRMaWtlfSBpbnB1dCBBbiBhcnJheSBvZiB0d28gbnVtYmVycyB0byBjb252ZXJ0LCBvciBhIGBMbmdMYXRgIG9iamVjdCB0byByZXR1cm4uXG4gKiBAcmV0dXJucyB7TG5nTGF0fSBBIG5ldyBgTG5nTGF0YCBvYmplY3QsIGlmIGEgY29udmVyc2lvbiBvY2N1cnJlZCwgb3IgdGhlIG9yaWdpbmFsIGBMbmdMYXRgIG9iamVjdC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgYXJyID0gWy03My45NzQ5LCA0MC43NzM2XTtcbiAqIHZhciBsbCA9IG1hcGJveGdsLkxuZ0xhdC5jb252ZXJ0KGFycik7XG4gKiBsbDsgICAvLyA9IExuZ0xhdCB7bG5nOiAtNzMuOTc0OSwgbGF0OiA0MC43NzM2fVxuICovXG5MbmdMYXQuY29udmVydCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIExuZ0xhdCkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfSBlbHNlIGlmIChpbnB1dCAmJiBpbnB1dC5oYXNPd25Qcm9wZXJ0eSgnbG5nJykgJiYgaW5wdXQuaGFzT3duUHJvcGVydHkoJ2xhdCcpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTG5nTGF0KGlucHV0LmxuZywgaW5wdXQubGF0KTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpICYmIGlucHV0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICByZXR1cm4gbmV3IExuZ0xhdChpbnB1dFswXSwgaW5wdXRbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImBMbmdMYXRMaWtlYCBhcmd1bWVudCBtdXN0IGJlIHNwZWNpZmllZCBhcyBhIExuZ0xhdCBpbnN0YW5jZSwgYW4gb2JqZWN0IHtsbmc6IDxsbmc+LCBsYXQ6IDxsYXQ+fSwgb3IgYW4gYXJyYXkgb2YgWzxsbmc+LCA8bGF0Pl1cIik7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBMbmdMYXQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFwYm94LWdsL2pzL2dlby9sbmdfbGF0LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval("\n\nconst LngLat = __webpack_require__(/*! ./lng_lat */ 40),\n    Point = __webpack_require__(/*! point-geometry */ 22),\n    Coordinate = __webpack_require__(/*! ./coordinate */ 12),\n    util = __webpack_require__(/*! ../util/util */ 19),\n    interp = __webpack_require__(/*! ../util/interpolate */ 43),\n    TileCoord = __webpack_require__(/*! ../source/tile_coord */ 42),\n    EXTENT = __webpack_require__(/*! ../data/extent */ 39),\n    glmatrix = __webpack_require__(/*! @mapbox/gl-matrix */ 34);\n\nconst vec4 = glmatrix.vec4,\n    mat4 = glmatrix.mat4,\n    mat2 = glmatrix.mat2;\n\n/**\n * A single transform, generally used for a single tile to be\n * scaled, rotated, and zoomed.\n * @private\n */\nclass Transform {\n    constructor(minZoom, maxZoom) {\n        this.tileSize = 512; // constant\n\n        this._minZoom = minZoom || 0;\n        this._maxZoom = maxZoom || 22;\n\n        this.latRange = [-85.05113, 85.05113];\n\n        this.width = 0;\n        this.height = 0;\n        this._center = new LngLat(0, 0);\n        this.zoom = 0;\n        this.angle = 0;\n        this._fov = 0.6435011087932844;\n        this._pitch = 0;\n        this._unmodified = true;\n    }\n\n    get minZoom() { return this._minZoom; }\n    set minZoom(zoom) {\n        if (this._minZoom === zoom) return;\n        this._minZoom = zoom;\n        this.zoom = Math.max(this.zoom, zoom);\n    }\n\n    get maxZoom() { return this._maxZoom; }\n    set maxZoom(zoom) {\n        if (this._maxZoom === zoom) return;\n        this._maxZoom = zoom;\n        this.zoom = Math.min(this.zoom, zoom);\n    }\n\n    get worldSize() {\n        return this.tileSize * this.scale;\n    }\n\n    get centerPoint() {\n        return this.size._div(2);\n    }\n\n    get size() {\n        return new Point(this.width, this.height);\n    }\n\n    get bearing() {\n        return -this.angle / Math.PI * 180;\n    }\n    set bearing(bearing) {\n        const b = -util.wrap(bearing, -180, 180) * Math.PI / 180;\n        if (this.angle === b) return;\n        this._unmodified = false;\n        this.angle = b;\n        this._calcMatrices();\n\n        // 2x2 matrix for rotating points\n        this.rotationMatrix = mat2.create();\n        mat2.rotate(this.rotationMatrix, this.rotationMatrix, this.angle);\n    }\n\n    get pitch() {\n        return this._pitch / Math.PI * 180;\n    }\n    set pitch(pitch) {\n        const p = util.clamp(pitch, 0, 60) / 180 * Math.PI;\n        if (this._pitch === p) return;\n        this._unmodified = false;\n        this._pitch = p;\n        this._calcMatrices();\n    }\n\n    get fov() {\n        return this._fov / Math.PI * 180;\n    }\n    set fov(fov) {\n        fov = Math.max(0.01, Math.min(60, fov));\n        if (this._fov === fov) return;\n        this._unmodified = false;\n        this._fov = fov / 180 * Math.PI;\n        this._calcMatrices();\n    }\n\n    get zoom() { return this._zoom; }\n    set zoom(zoom) {\n        const z = Math.min(Math.max(zoom, this.minZoom), this.maxZoom);\n        if (this._zoom === z) return;\n        this._unmodified = false;\n        this._zoom = z;\n        this.scale = this.zoomScale(z);\n        this.tileZoom = Math.floor(z);\n        this.zoomFraction = z - this.tileZoom;\n        this._constrain();\n        this._calcMatrices();\n    }\n\n    get center() { return this._center; }\n    set center(center) {\n        if (center.lat === this._center.lat && center.lng === this._center.lng) return;\n        this._unmodified = false;\n        this._center = center;\n        this._constrain();\n        this._calcMatrices();\n    }\n\n    /**\n     * Return a zoom level that will cover all tiles the transform\n     * @param {Object} options\n     * @param {number} options.tileSize\n     * @param {boolean} options.roundZoom\n     * @returns {number} zoom level\n     */\n    coveringZoomLevel(options) {\n        return (options.roundZoom ? Math.round : Math.floor)(\n            this.zoom + this.scaleZoom(this.tileSize / options.tileSize)\n        );\n    }\n\n    /**\n     * Return all coordinates that could cover this transform for a covering\n     * zoom level.\n     * @param {Object} options\n     * @param {number} options.tileSize\n     * @param {number} options.minzoom\n     * @param {number} options.maxzoom\n     * @param {boolean} options.roundZoom\n     * @param {boolean} options.reparseOverscaled\n     * @returns {Array<Tile>} tiles\n     */\n    coveringTiles(options) {\n        let z = this.coveringZoomLevel(options);\n        const actualZ = z;\n\n        if (z < options.minzoom) return [];\n        if (z > options.maxzoom) z = options.maxzoom;\n\n        const centerCoord = this.pointCoordinate(this.centerPoint, z);\n        const centerPoint = new Point(centerCoord.column - 0.5, centerCoord.row - 0.5);\n        const cornerCoords = [\n            this.pointCoordinate(new Point(0, 0), z),\n            this.pointCoordinate(new Point(this.width, 0), z),\n            this.pointCoordinate(new Point(this.width, this.height), z),\n            this.pointCoordinate(new Point(0, this.height), z)\n        ];\n        return TileCoord.cover(z, cornerCoords, options.reparseOverscaled ? actualZ : z)\n            .sort((a, b) => centerPoint.dist(a) - centerPoint.dist(b));\n    }\n\n    resize(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.pixelsToGLUnits = [2 / width, -2 / height];\n        this._constrain();\n        this._calcMatrices();\n    }\n\n    get unmodified() { return this._unmodified; }\n\n    zoomScale(zoom) { return Math.pow(2, zoom); }\n    scaleZoom(scale) { return Math.log(scale) / Math.LN2; }\n\n    project(lnglat) {\n        return new Point(\n            this.lngX(lnglat.lng),\n            this.latY(lnglat.lat));\n    }\n\n    unproject(point) {\n        return new LngLat(\n            this.xLng(point.x),\n            this.yLat(point.y));\n    }\n\n    get x() { return this.lngX(this.center.lng); }\n    get y() { return this.latY(this.center.lat); }\n\n    get point() { return new Point(this.x, this.y); }\n\n    /**\n     * latitude to absolute x coord\n     * @param {number} lon\n     * @returns {number} pixel coordinate\n     */\n    lngX(lng) {\n        return (180 + lng) * this.worldSize / 360;\n    }\n    /**\n     * latitude to absolute y coord\n     * @param {number} lat\n     * @returns {number} pixel coordinate\n     */\n    latY(lat) {\n        const y = 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360));\n        return (180 - y) * this.worldSize / 360;\n    }\n\n    xLng(x) {\n        return x * 360 / this.worldSize - 180;\n    }\n    yLat(y) {\n        const y2 = 180 - y * 360 / this.worldSize;\n        return 360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90;\n    }\n\n    setLocationAtPoint(lnglat, point) {\n        const translate = this.pointCoordinate(point)._sub(this.pointCoordinate(this.centerPoint));\n        this.center = this.coordinateLocation(this.locationCoordinate(lnglat)._sub(translate));\n    }\n\n    /**\n     * Given a location, return the screen point that corresponds to it\n     * @param {LngLat} lnglat location\n     * @returns {Point} screen point\n     */\n    locationPoint(lnglat) {\n        return this.coordinatePoint(this.locationCoordinate(lnglat));\n    }\n\n    /**\n     * Given a point on screen, return its lnglat\n     * @param {Point} p screen point\n     * @returns {LngLat} lnglat location\n     */\n    pointLocation(p) {\n        return this.coordinateLocation(this.pointCoordinate(p));\n    }\n\n    /**\n     * Given a geographical lnglat, return an unrounded\n     * coordinate that represents it at this transform's zoom level.\n     * @param {LngLat} lnglat\n     * @returns {Coordinate}\n     */\n    locationCoordinate(lnglat) {\n        return new Coordinate(\n            this.lngX(lnglat.lng) / this.tileSize,\n            this.latY(lnglat.lat) / this.tileSize,\n            this.zoom).zoomTo(this.tileZoom);\n    }\n\n    /**\n     * Given a Coordinate, return its geographical position.\n     * @param {Coordinate} coord\n     * @returns {LngLat} lnglat\n     */\n    coordinateLocation(coord) {\n        const zoomedCoord = coord.zoomTo(this.zoom);\n        return new LngLat(\n            this.xLng(zoomedCoord.column * this.tileSize),\n            this.yLat(zoomedCoord.row * this.tileSize));\n    }\n\n    pointCoordinate(p, zoom) {\n        if (zoom === undefined) zoom = this.tileZoom;\n\n        const targetZ = 0;\n        // since we don't know the correct projected z value for the point,\n        // unproject two points to get a line and then find the point on that\n        // line with z=0\n\n        const coord0 = [p.x, p.y, 0, 1];\n        const coord1 = [p.x, p.y, 1, 1];\n\n        vec4.transformMat4(coord0, coord0, this.pixelMatrixInverse);\n        vec4.transformMat4(coord1, coord1, this.pixelMatrixInverse);\n\n        const w0 = coord0[3];\n        const w1 = coord1[3];\n        const x0 = coord0[0] / w0;\n        const x1 = coord1[0] / w1;\n        const y0 = coord0[1] / w0;\n        const y1 = coord1[1] / w1;\n        const z0 = coord0[2] / w0;\n        const z1 = coord1[2] / w1;\n\n        const t = z0 === z1 ? 0 : (targetZ - z0) / (z1 - z0);\n\n        return new Coordinate(\n            interp(x0, x1, t) / this.tileSize,\n            interp(y0, y1, t) / this.tileSize,\n            this.zoom)._zoomTo(zoom);\n    }\n\n    /**\n     * Given a coordinate, return the screen point that corresponds to it\n     * @param {Coordinate} coord\n     * @returns {Point} screen point\n     */\n    coordinatePoint(coord) {\n        const zoomedCoord = coord.zoomTo(this.zoom);\n        const p = [zoomedCoord.column * this.tileSize, zoomedCoord.row * this.tileSize, 0, 1];\n        vec4.transformMat4(p, p, this.pixelMatrix);\n        return new Point(p[0] / p[3], p[1] / p[3]);\n    }\n\n    /**\n     * Calculate the posMatrix that, given a tile coordinate, would be used to display the tile on a map.\n     * @param {TileCoord} tileCoord\n     * @param {number} maxZoom maximum source zoom to account for overscaling\n     */\n    calculatePosMatrix(tileCoord, maxZoom) {\n        // if z > maxzoom then the tile is actually a overscaled maxzoom tile,\n        // so calculate the matrix the maxzoom tile would use.\n        const coord = tileCoord.toCoordinate(maxZoom);\n        const scale = this.worldSize / this.zoomScale(coord.zoom);\n\n        const posMatrix = mat4.identity(new Float64Array(16));\n        mat4.translate(posMatrix, posMatrix, [coord.column * scale, coord.row * scale, 0]);\n        mat4.scale(posMatrix, posMatrix, [scale / EXTENT, scale / EXTENT, 1]);\n        mat4.multiply(posMatrix, this.projMatrix, posMatrix);\n\n        return new Float32Array(posMatrix);\n    }\n\n    _constrain() {\n        if (!this.center || !this.width || !this.height || this._constraining) return;\n\n        this._constraining = true;\n\n        let minY, maxY, minX, maxX, sy, sx, x2, y2;\n        const size = this.size,\n            unmodified = this._unmodified;\n\n        if (this.latRange) {\n            minY = this.latY(this.latRange[1]);\n            maxY = this.latY(this.latRange[0]);\n            sy = maxY - minY < size.y ? size.y / (maxY - minY) : 0;\n        }\n\n        if (this.lngRange) {\n            minX = this.lngX(this.lngRange[0]);\n            maxX = this.lngX(this.lngRange[1]);\n            sx = maxX - minX < size.x ? size.x / (maxX - minX) : 0;\n        }\n\n        // how much the map should scale to fit the screen into given latitude/longitude ranges\n        const s = Math.max(sx || 0, sy || 0);\n\n        if (s) {\n            this.center = this.unproject(new Point(\n                sx ? (maxX + minX) / 2 : this.x,\n                sy ? (maxY + minY) / 2 : this.y));\n            this.zoom += this.scaleZoom(s);\n            this._unmodified = unmodified;\n            this._constraining = false;\n            return;\n        }\n\n        if (this.latRange) {\n            const y = this.y,\n                h2 = size.y / 2;\n\n            if (y - h2 < minY) y2 = minY + h2;\n            if (y + h2 > maxY) y2 = maxY - h2;\n        }\n\n        if (this.lngRange) {\n            const x = this.x,\n                w2 = size.x / 2;\n\n            if (x - w2 < minX) x2 = minX + w2;\n            if (x + w2 > maxX) x2 = maxX - w2;\n        }\n\n        // pan the map if the screen goes off the range\n        if (x2 !== undefined || y2 !== undefined) {\n            this.center = this.unproject(new Point(\n                x2 !== undefined ? x2 : this.x,\n                y2 !== undefined ? y2 : this.y));\n        }\n\n        this._unmodified = unmodified;\n        this._constraining = false;\n    }\n\n    _calcMatrices() {\n        if (!this.height) return;\n\n        this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height;\n\n        // Find the distance from the center point [width/2, height/2] to the\n        // center top point [width/2, 0] in Z units, using the law of sines.\n        // 1 Z unit is equivalent to 1 horizontal px at the center of the map\n        // (the distance between[width/2, height/2] and [width/2 + 1, height/2])\n        const halfFov = this._fov / 2;\n        const groundAngle = Math.PI / 2 + this._pitch;\n        const topHalfSurfaceDistance = Math.sin(halfFov) * this.cameraToCenterDistance / Math.sin(Math.PI - groundAngle - halfFov);\n\n        // Calculate z distance of the farthest fragment that should be rendered.\n        const furthestDistance = Math.cos(Math.PI / 2 - this._pitch) * topHalfSurfaceDistance + this.cameraToCenterDistance;\n        // Add a bit extra to avoid precision problems when a fragment's distance is exactly `furthestDistance`\n        const farZ = furthestDistance * 1.01;\n\n        // matrix for conversion from location to GL coordinates (-1 .. 1)\n        let m = new Float64Array(16);\n        mat4.perspective(m, this._fov, this.width / this.height, 1, farZ);\n\n        mat4.scale(m, m, [1, -1, 1]);\n        mat4.translate(m, m, [0, 0, -this.cameraToCenterDistance]);\n        mat4.rotateX(m, m, this._pitch);\n        mat4.rotateZ(m, m, this.angle);\n        mat4.translate(m, m, [-this.x, -this.y, 0]);\n\n        // scale vertically to meters per pixel (inverse of ground resolution):\n        // worldSize / (circumferenceOfEarth * cos(lat *  / 180))\n        const verticalScale = this.worldSize / (2 * Math.PI * 6378137 * Math.abs(Math.cos(this.center.lat * (Math.PI / 180))));\n        mat4.scale(m, m, [1, 1, verticalScale, 1]);\n\n        this.projMatrix = m;\n\n        // matrix for conversion from location to screen coordinates\n        m = mat4.create();\n        mat4.scale(m, m, [this.width / 2, -this.height / 2, 1]);\n        mat4.translate(m, m, [1, -1, 0]);\n        this.pixelMatrix = mat4.multiply(new Float64Array(16), m, this.projMatrix);\n\n        // inverse matrix for conversion from screen coordinaes to location\n        m = mat4.invert(new Float64Array(16), this.pixelMatrix);\n        if (!m) throw new Error(\"failed to invert matrix\");\n        this.pixelMatrixInverse = m;\n\n    }\n}\n\nmodule.exports = Transform;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy9nZW8vdHJhbnNmb3JtLmpzPzU0YWIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBMbmdMYXQgPSByZXF1aXJlKCcuL2xuZ19sYXQnKSxcbiAgICBQb2ludCA9IHJlcXVpcmUoJ3BvaW50LWdlb21ldHJ5JyksXG4gICAgQ29vcmRpbmF0ZSA9IHJlcXVpcmUoJy4vY29vcmRpbmF0ZScpLFxuICAgIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsL3V0aWwnKSxcbiAgICBpbnRlcnAgPSByZXF1aXJlKCcuLi91dGlsL2ludGVycG9sYXRlJyksXG4gICAgVGlsZUNvb3JkID0gcmVxdWlyZSgnLi4vc291cmNlL3RpbGVfY29vcmQnKSxcbiAgICBFWFRFTlQgPSByZXF1aXJlKCcuLi9kYXRhL2V4dGVudCcpLFxuICAgIGdsbWF0cml4ID0gcmVxdWlyZSgnQG1hcGJveC9nbC1tYXRyaXgnKTtcblxuY29uc3QgdmVjNCA9IGdsbWF0cml4LnZlYzQsXG4gICAgbWF0NCA9IGdsbWF0cml4Lm1hdDQsXG4gICAgbWF0MiA9IGdsbWF0cml4Lm1hdDI7XG5cbi8qKlxuICogQSBzaW5nbGUgdHJhbnNmb3JtLCBnZW5lcmFsbHkgdXNlZCBmb3IgYSBzaW5nbGUgdGlsZSB0byBiZVxuICogc2NhbGVkLCByb3RhdGVkLCBhbmQgem9vbWVkLlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgVHJhbnNmb3JtIHtcbiAgICBjb25zdHJ1Y3RvcihtaW5ab29tLCBtYXhab29tKSB7XG4gICAgICAgIHRoaXMudGlsZVNpemUgPSA1MTI7IC8vIGNvbnN0YW50XG5cbiAgICAgICAgdGhpcy5fbWluWm9vbSA9IG1pblpvb20gfHwgMDtcbiAgICAgICAgdGhpcy5fbWF4Wm9vbSA9IG1heFpvb20gfHwgMjI7XG5cbiAgICAgICAgdGhpcy5sYXRSYW5nZSA9IFstODUuMDUxMTMsIDg1LjA1MTEzXTtcblxuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLl9jZW50ZXIgPSBuZXcgTG5nTGF0KDAsIDApO1xuICAgICAgICB0aGlzLnpvb20gPSAwO1xuICAgICAgICB0aGlzLmFuZ2xlID0gMDtcbiAgICAgICAgdGhpcy5fZm92ID0gMC42NDM1MDExMDg3OTMyODQ0O1xuICAgICAgICB0aGlzLl9waXRjaCA9IDA7XG4gICAgICAgIHRoaXMuX3VubW9kaWZpZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGdldCBtaW5ab29tKCkgeyByZXR1cm4gdGhpcy5fbWluWm9vbTsgfVxuICAgIHNldCBtaW5ab29tKHpvb20pIHtcbiAgICAgICAgaWYgKHRoaXMuX21pblpvb20gPT09IHpvb20pIHJldHVybjtcbiAgICAgICAgdGhpcy5fbWluWm9vbSA9IHpvb207XG4gICAgICAgIHRoaXMuem9vbSA9IE1hdGgubWF4KHRoaXMuem9vbSwgem9vbSk7XG4gICAgfVxuXG4gICAgZ2V0IG1heFpvb20oKSB7IHJldHVybiB0aGlzLl9tYXhab29tOyB9XG4gICAgc2V0IG1heFpvb20oem9vbSkge1xuICAgICAgICBpZiAodGhpcy5fbWF4Wm9vbSA9PT0gem9vbSkgcmV0dXJuO1xuICAgICAgICB0aGlzLl9tYXhab29tID0gem9vbTtcbiAgICAgICAgdGhpcy56b29tID0gTWF0aC5taW4odGhpcy56b29tLCB6b29tKTtcbiAgICB9XG5cbiAgICBnZXQgd29ybGRTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZSAqIHRoaXMuc2NhbGU7XG4gICAgfVxuXG4gICAgZ2V0IGNlbnRlclBvaW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplLl9kaXYoMik7XG4gICAgfVxuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIH1cblxuICAgIGdldCBiZWFyaW5nKCkge1xuICAgICAgICByZXR1cm4gLXRoaXMuYW5nbGUgLyBNYXRoLlBJICogMTgwO1xuICAgIH1cbiAgICBzZXQgYmVhcmluZyhiZWFyaW5nKSB7XG4gICAgICAgIGNvbnN0IGIgPSAtdXRpbC53cmFwKGJlYXJpbmcsIC0xODAsIDE4MCkgKiBNYXRoLlBJIC8gMTgwO1xuICAgICAgICBpZiAodGhpcy5hbmdsZSA9PT0gYikgcmV0dXJuO1xuICAgICAgICB0aGlzLl91bm1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYW5nbGUgPSBiO1xuICAgICAgICB0aGlzLl9jYWxjTWF0cmljZXMoKTtcblxuICAgICAgICAvLyAyeDIgbWF0cml4IGZvciByb3RhdGluZyBwb2ludHNcbiAgICAgICAgdGhpcy5yb3RhdGlvbk1hdHJpeCA9IG1hdDIuY3JlYXRlKCk7XG4gICAgICAgIG1hdDIucm90YXRlKHRoaXMucm90YXRpb25NYXRyaXgsIHRoaXMucm90YXRpb25NYXRyaXgsIHRoaXMuYW5nbGUpO1xuICAgIH1cblxuICAgIGdldCBwaXRjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BpdGNoIC8gTWF0aC5QSSAqIDE4MDtcbiAgICB9XG4gICAgc2V0IHBpdGNoKHBpdGNoKSB7XG4gICAgICAgIGNvbnN0IHAgPSB1dGlsLmNsYW1wKHBpdGNoLCAwLCA2MCkgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgICBpZiAodGhpcy5fcGl0Y2ggPT09IHApIHJldHVybjtcbiAgICAgICAgdGhpcy5fdW5tb2RpZmllZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9waXRjaCA9IHA7XG4gICAgICAgIHRoaXMuX2NhbGNNYXRyaWNlcygpO1xuICAgIH1cblxuICAgIGdldCBmb3YoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3YgLyBNYXRoLlBJICogMTgwO1xuICAgIH1cbiAgICBzZXQgZm92KGZvdikge1xuICAgICAgICBmb3YgPSBNYXRoLm1heCgwLjAxLCBNYXRoLm1pbig2MCwgZm92KSk7XG4gICAgICAgIGlmICh0aGlzLl9mb3YgPT09IGZvdikgcmV0dXJuO1xuICAgICAgICB0aGlzLl91bm1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2ZvdiA9IGZvdiAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgIHRoaXMuX2NhbGNNYXRyaWNlcygpO1xuICAgIH1cblxuICAgIGdldCB6b29tKCkgeyByZXR1cm4gdGhpcy5fem9vbTsgfVxuICAgIHNldCB6b29tKHpvb20pIHtcbiAgICAgICAgY29uc3QgeiA9IE1hdGgubWluKE1hdGgubWF4KHpvb20sIHRoaXMubWluWm9vbSksIHRoaXMubWF4Wm9vbSk7XG4gICAgICAgIGlmICh0aGlzLl96b29tID09PSB6KSByZXR1cm47XG4gICAgICAgIHRoaXMuX3VubW9kaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fem9vbSA9IHo7XG4gICAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLnpvb21TY2FsZSh6KTtcbiAgICAgICAgdGhpcy50aWxlWm9vbSA9IE1hdGguZmxvb3Ioeik7XG4gICAgICAgIHRoaXMuem9vbUZyYWN0aW9uID0geiAtIHRoaXMudGlsZVpvb207XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbigpO1xuICAgICAgICB0aGlzLl9jYWxjTWF0cmljZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgY2VudGVyKCkgeyByZXR1cm4gdGhpcy5fY2VudGVyOyB9XG4gICAgc2V0IGNlbnRlcihjZW50ZXIpIHtcbiAgICAgICAgaWYgKGNlbnRlci5sYXQgPT09IHRoaXMuX2NlbnRlci5sYXQgJiYgY2VudGVyLmxuZyA9PT0gdGhpcy5fY2VudGVyLmxuZykgcmV0dXJuO1xuICAgICAgICB0aGlzLl91bm1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgdGhpcy5fY29uc3RyYWluKCk7XG4gICAgICAgIHRoaXMuX2NhbGNNYXRyaWNlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIHpvb20gbGV2ZWwgdGhhdCB3aWxsIGNvdmVyIGFsbCB0aWxlcyB0aGUgdHJhbnNmb3JtXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy50aWxlU2l6ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5yb3VuZFpvb21cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB6b29tIGxldmVsXG4gICAgICovXG4gICAgY292ZXJpbmdab29tTGV2ZWwob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gKG9wdGlvbnMucm91bmRab29tID8gTWF0aC5yb3VuZCA6IE1hdGguZmxvb3IpKFxuICAgICAgICAgICAgdGhpcy56b29tICsgdGhpcy5zY2FsZVpvb20odGhpcy50aWxlU2l6ZSAvIG9wdGlvbnMudGlsZVNpemUpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFsbCBjb29yZGluYXRlcyB0aGF0IGNvdWxkIGNvdmVyIHRoaXMgdHJhbnNmb3JtIGZvciBhIGNvdmVyaW5nXG4gICAgICogem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLnRpbGVTaXplXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMubWluem9vbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLm1heHpvb21cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMucm91bmRab29tXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnJlcGFyc2VPdmVyc2NhbGVkXG4gICAgICogQHJldHVybnMge0FycmF5PFRpbGU+fSB0aWxlc1xuICAgICAqL1xuICAgIGNvdmVyaW5nVGlsZXMob3B0aW9ucykge1xuICAgICAgICBsZXQgeiA9IHRoaXMuY292ZXJpbmdab29tTGV2ZWwob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGFjdHVhbFogPSB6O1xuXG4gICAgICAgIGlmICh6IDwgb3B0aW9ucy5taW56b29tKSByZXR1cm4gW107XG4gICAgICAgIGlmICh6ID4gb3B0aW9ucy5tYXh6b29tKSB6ID0gb3B0aW9ucy5tYXh6b29tO1xuXG4gICAgICAgIGNvbnN0IGNlbnRlckNvb3JkID0gdGhpcy5wb2ludENvb3JkaW5hdGUodGhpcy5jZW50ZXJQb2ludCwgeik7XG4gICAgICAgIGNvbnN0IGNlbnRlclBvaW50ID0gbmV3IFBvaW50KGNlbnRlckNvb3JkLmNvbHVtbiAtIDAuNSwgY2VudGVyQ29vcmQucm93IC0gMC41KTtcbiAgICAgICAgY29uc3QgY29ybmVyQ29vcmRzID0gW1xuICAgICAgICAgICAgdGhpcy5wb2ludENvb3JkaW5hdGUobmV3IFBvaW50KDAsIDApLCB6KSxcbiAgICAgICAgICAgIHRoaXMucG9pbnRDb29yZGluYXRlKG5ldyBQb2ludCh0aGlzLndpZHRoLCAwKSwgeiksXG4gICAgICAgICAgICB0aGlzLnBvaW50Q29vcmRpbmF0ZShuZXcgUG9pbnQodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpLCB6KSxcbiAgICAgICAgICAgIHRoaXMucG9pbnRDb29yZGluYXRlKG5ldyBQb2ludCgwLCB0aGlzLmhlaWdodCksIHopXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBUaWxlQ29vcmQuY292ZXIoeiwgY29ybmVyQ29vcmRzLCBvcHRpb25zLnJlcGFyc2VPdmVyc2NhbGVkID8gYWN0dWFsWiA6IHopXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gY2VudGVyUG9pbnQuZGlzdChhKSAtIGNlbnRlclBvaW50LmRpc3QoYikpO1xuICAgIH1cblxuICAgIHJlc2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5waXhlbHNUb0dMVW5pdHMgPSBbMiAvIHdpZHRoLCAtMiAvIGhlaWdodF07XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbigpO1xuICAgICAgICB0aGlzLl9jYWxjTWF0cmljZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgdW5tb2RpZmllZCgpIHsgcmV0dXJuIHRoaXMuX3VubW9kaWZpZWQ7IH1cblxuICAgIHpvb21TY2FsZSh6b29tKSB7IHJldHVybiBNYXRoLnBvdygyLCB6b29tKTsgfVxuICAgIHNjYWxlWm9vbShzY2FsZSkgeyByZXR1cm4gTWF0aC5sb2coc2NhbGUpIC8gTWF0aC5MTjI7IH1cblxuICAgIHByb2plY3QobG5nbGF0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoXG4gICAgICAgICAgICB0aGlzLmxuZ1gobG5nbGF0LmxuZyksXG4gICAgICAgICAgICB0aGlzLmxhdFkobG5nbGF0LmxhdCkpO1xuICAgIH1cblxuICAgIHVucHJvamVjdChwb2ludCkge1xuICAgICAgICByZXR1cm4gbmV3IExuZ0xhdChcbiAgICAgICAgICAgIHRoaXMueExuZyhwb2ludC54KSxcbiAgICAgICAgICAgIHRoaXMueUxhdChwb2ludC55KSk7XG4gICAgfVxuXG4gICAgZ2V0IHgoKSB7IHJldHVybiB0aGlzLmxuZ1godGhpcy5jZW50ZXIubG5nKTsgfVxuICAgIGdldCB5KCkgeyByZXR1cm4gdGhpcy5sYXRZKHRoaXMuY2VudGVyLmxhdCk7IH1cblxuICAgIGdldCBwb2ludCgpIHsgcmV0dXJuIG5ldyBQb2ludCh0aGlzLngsIHRoaXMueSk7IH1cblxuICAgIC8qKlxuICAgICAqIGxhdGl0dWRlIHRvIGFic29sdXRlIHggY29vcmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbG9uXG4gICAgICogQHJldHVybnMge251bWJlcn0gcGl4ZWwgY29vcmRpbmF0ZVxuICAgICAqL1xuICAgIGxuZ1gobG5nKSB7XG4gICAgICAgIHJldHVybiAoMTgwICsgbG5nKSAqIHRoaXMud29ybGRTaXplIC8gMzYwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBsYXRpdHVkZSB0byBhYnNvbHV0ZSB5IGNvb3JkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhdFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHBpeGVsIGNvb3JkaW5hdGVcbiAgICAgKi9cbiAgICBsYXRZKGxhdCkge1xuICAgICAgICBjb25zdCB5ID0gMTgwIC8gTWF0aC5QSSAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgbGF0ICogTWF0aC5QSSAvIDM2MCkpO1xuICAgICAgICByZXR1cm4gKDE4MCAtIHkpICogdGhpcy53b3JsZFNpemUgLyAzNjA7XG4gICAgfVxuXG4gICAgeExuZyh4KSB7XG4gICAgICAgIHJldHVybiB4ICogMzYwIC8gdGhpcy53b3JsZFNpemUgLSAxODA7XG4gICAgfVxuICAgIHlMYXQoeSkge1xuICAgICAgICBjb25zdCB5MiA9IDE4MCAtIHkgKiAzNjAgLyB0aGlzLndvcmxkU2l6ZTtcbiAgICAgICAgcmV0dXJuIDM2MCAvIE1hdGguUEkgKiBNYXRoLmF0YW4oTWF0aC5leHAoeTIgKiBNYXRoLlBJIC8gMTgwKSkgLSA5MDtcbiAgICB9XG5cbiAgICBzZXRMb2NhdGlvbkF0UG9pbnQobG5nbGF0LCBwb2ludCkge1xuICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSB0aGlzLnBvaW50Q29vcmRpbmF0ZShwb2ludCkuX3N1Yih0aGlzLnBvaW50Q29vcmRpbmF0ZSh0aGlzLmNlbnRlclBvaW50KSk7XG4gICAgICAgIHRoaXMuY2VudGVyID0gdGhpcy5jb29yZGluYXRlTG9jYXRpb24odGhpcy5sb2NhdGlvbkNvb3JkaW5hdGUobG5nbGF0KS5fc3ViKHRyYW5zbGF0ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgbG9jYXRpb24sIHJldHVybiB0aGUgc2NyZWVuIHBvaW50IHRoYXQgY29ycmVzcG9uZHMgdG8gaXRcbiAgICAgKiBAcGFyYW0ge0xuZ0xhdH0gbG5nbGF0IGxvY2F0aW9uXG4gICAgICogQHJldHVybnMge1BvaW50fSBzY3JlZW4gcG9pbnRcbiAgICAgKi9cbiAgICBsb2NhdGlvblBvaW50KGxuZ2xhdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb29yZGluYXRlUG9pbnQodGhpcy5sb2NhdGlvbkNvb3JkaW5hdGUobG5nbGF0KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBwb2ludCBvbiBzY3JlZW4sIHJldHVybiBpdHMgbG5nbGF0XG4gICAgICogQHBhcmFtIHtQb2ludH0gcCBzY3JlZW4gcG9pbnRcbiAgICAgKiBAcmV0dXJucyB7TG5nTGF0fSBsbmdsYXQgbG9jYXRpb25cbiAgICAgKi9cbiAgICBwb2ludExvY2F0aW9uKHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZUxvY2F0aW9uKHRoaXMucG9pbnRDb29yZGluYXRlKHApKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGdlb2dyYXBoaWNhbCBsbmdsYXQsIHJldHVybiBhbiB1bnJvdW5kZWRcbiAgICAgKiBjb29yZGluYXRlIHRoYXQgcmVwcmVzZW50cyBpdCBhdCB0aGlzIHRyYW5zZm9ybSdzIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtMbmdMYXR9IGxuZ2xhdFxuICAgICAqIEByZXR1cm5zIHtDb29yZGluYXRlfVxuICAgICAqL1xuICAgIGxvY2F0aW9uQ29vcmRpbmF0ZShsbmdsYXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKFxuICAgICAgICAgICAgdGhpcy5sbmdYKGxuZ2xhdC5sbmcpIC8gdGhpcy50aWxlU2l6ZSxcbiAgICAgICAgICAgIHRoaXMubGF0WShsbmdsYXQubGF0KSAvIHRoaXMudGlsZVNpemUsXG4gICAgICAgICAgICB0aGlzLnpvb20pLnpvb21Ubyh0aGlzLnRpbGVab29tKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIENvb3JkaW5hdGUsIHJldHVybiBpdHMgZ2VvZ3JhcGhpY2FsIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRcbiAgICAgKiBAcmV0dXJucyB7TG5nTGF0fSBsbmdsYXRcbiAgICAgKi9cbiAgICBjb29yZGluYXRlTG9jYXRpb24oY29vcmQpIHtcbiAgICAgICAgY29uc3Qgem9vbWVkQ29vcmQgPSBjb29yZC56b29tVG8odGhpcy56b29tKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMbmdMYXQoXG4gICAgICAgICAgICB0aGlzLnhMbmcoem9vbWVkQ29vcmQuY29sdW1uICogdGhpcy50aWxlU2l6ZSksXG4gICAgICAgICAgICB0aGlzLnlMYXQoem9vbWVkQ29vcmQucm93ICogdGhpcy50aWxlU2l6ZSkpO1xuICAgIH1cblxuICAgIHBvaW50Q29vcmRpbmF0ZShwLCB6b29tKSB7XG4gICAgICAgIGlmICh6b29tID09PSB1bmRlZmluZWQpIHpvb20gPSB0aGlzLnRpbGVab29tO1xuXG4gICAgICAgIGNvbnN0IHRhcmdldFogPSAwO1xuICAgICAgICAvLyBzaW5jZSB3ZSBkb24ndCBrbm93IHRoZSBjb3JyZWN0IHByb2plY3RlZCB6IHZhbHVlIGZvciB0aGUgcG9pbnQsXG4gICAgICAgIC8vIHVucHJvamVjdCB0d28gcG9pbnRzIHRvIGdldCBhIGxpbmUgYW5kIHRoZW4gZmluZCB0aGUgcG9pbnQgb24gdGhhdFxuICAgICAgICAvLyBsaW5lIHdpdGggej0wXG5cbiAgICAgICAgY29uc3QgY29vcmQwID0gW3AueCwgcC55LCAwLCAxXTtcbiAgICAgICAgY29uc3QgY29vcmQxID0gW3AueCwgcC55LCAxLCAxXTtcblxuICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQoY29vcmQwLCBjb29yZDAsIHRoaXMucGl4ZWxNYXRyaXhJbnZlcnNlKTtcbiAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KGNvb3JkMSwgY29vcmQxLCB0aGlzLnBpeGVsTWF0cml4SW52ZXJzZSk7XG5cbiAgICAgICAgY29uc3QgdzAgPSBjb29yZDBbM107XG4gICAgICAgIGNvbnN0IHcxID0gY29vcmQxWzNdO1xuICAgICAgICBjb25zdCB4MCA9IGNvb3JkMFswXSAvIHcwO1xuICAgICAgICBjb25zdCB4MSA9IGNvb3JkMVswXSAvIHcxO1xuICAgICAgICBjb25zdCB5MCA9IGNvb3JkMFsxXSAvIHcwO1xuICAgICAgICBjb25zdCB5MSA9IGNvb3JkMVsxXSAvIHcxO1xuICAgICAgICBjb25zdCB6MCA9IGNvb3JkMFsyXSAvIHcwO1xuICAgICAgICBjb25zdCB6MSA9IGNvb3JkMVsyXSAvIHcxO1xuXG4gICAgICAgIGNvbnN0IHQgPSB6MCA9PT0gejEgPyAwIDogKHRhcmdldFogLSB6MCkgLyAoejEgLSB6MCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKFxuICAgICAgICAgICAgaW50ZXJwKHgwLCB4MSwgdCkgLyB0aGlzLnRpbGVTaXplLFxuICAgICAgICAgICAgaW50ZXJwKHkwLCB5MSwgdCkgLyB0aGlzLnRpbGVTaXplLFxuICAgICAgICAgICAgdGhpcy56b29tKS5fem9vbVRvKHpvb20pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgY29vcmRpbmF0ZSwgcmV0dXJuIHRoZSBzY3JlZW4gcG9pbnQgdGhhdCBjb3JyZXNwb25kcyB0byBpdFxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9IHNjcmVlbiBwb2ludFxuICAgICAqL1xuICAgIGNvb3JkaW5hdGVQb2ludChjb29yZCkge1xuICAgICAgICBjb25zdCB6b29tZWRDb29yZCA9IGNvb3JkLnpvb21Ubyh0aGlzLnpvb20pO1xuICAgICAgICBjb25zdCBwID0gW3pvb21lZENvb3JkLmNvbHVtbiAqIHRoaXMudGlsZVNpemUsIHpvb21lZENvb3JkLnJvdyAqIHRoaXMudGlsZVNpemUsIDAsIDFdO1xuICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQocCwgcCwgdGhpcy5waXhlbE1hdHJpeCk7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQocFswXSAvIHBbM10sIHBbMV0gLyBwWzNdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHBvc01hdHJpeCB0aGF0LCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSwgd291bGQgYmUgdXNlZCB0byBkaXNwbGF5IHRoZSB0aWxlIG9uIGEgbWFwLlxuICAgICAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Wm9vbSBtYXhpbXVtIHNvdXJjZSB6b29tIHRvIGFjY291bnQgZm9yIG92ZXJzY2FsaW5nXG4gICAgICovXG4gICAgY2FsY3VsYXRlUG9zTWF0cml4KHRpbGVDb29yZCwgbWF4Wm9vbSkge1xuICAgICAgICAvLyBpZiB6ID4gbWF4em9vbSB0aGVuIHRoZSB0aWxlIGlzIGFjdHVhbGx5IGEgb3ZlcnNjYWxlZCBtYXh6b29tIHRpbGUsXG4gICAgICAgIC8vIHNvIGNhbGN1bGF0ZSB0aGUgbWF0cml4IHRoZSBtYXh6b29tIHRpbGUgd291bGQgdXNlLlxuICAgICAgICBjb25zdCBjb29yZCA9IHRpbGVDb29yZC50b0Nvb3JkaW5hdGUobWF4Wm9vbSk7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy53b3JsZFNpemUgLyB0aGlzLnpvb21TY2FsZShjb29yZC56b29tKTtcblxuICAgICAgICBjb25zdCBwb3NNYXRyaXggPSBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDY0QXJyYXkoMTYpKTtcbiAgICAgICAgbWF0NC50cmFuc2xhdGUocG9zTWF0cml4LCBwb3NNYXRyaXgsIFtjb29yZC5jb2x1bW4gKiBzY2FsZSwgY29vcmQucm93ICogc2NhbGUsIDBdKTtcbiAgICAgICAgbWF0NC5zY2FsZShwb3NNYXRyaXgsIHBvc01hdHJpeCwgW3NjYWxlIC8gRVhURU5ULCBzY2FsZSAvIEVYVEVOVCwgMV0pO1xuICAgICAgICBtYXQ0Lm11bHRpcGx5KHBvc01hdHJpeCwgdGhpcy5wcm9qTWF0cml4LCBwb3NNYXRyaXgpO1xuXG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHBvc01hdHJpeCk7XG4gICAgfVxuXG4gICAgX2NvbnN0cmFpbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNlbnRlciB8fCAhdGhpcy53aWR0aCB8fCAhdGhpcy5oZWlnaHQgfHwgdGhpcy5fY29uc3RyYWluaW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5fY29uc3RyYWluaW5nID0gdHJ1ZTtcblxuICAgICAgICBsZXQgbWluWSwgbWF4WSwgbWluWCwgbWF4WCwgc3ksIHN4LCB4MiwgeTI7XG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLnNpemUsXG4gICAgICAgICAgICB1bm1vZGlmaWVkID0gdGhpcy5fdW5tb2RpZmllZDtcblxuICAgICAgICBpZiAodGhpcy5sYXRSYW5nZSkge1xuICAgICAgICAgICAgbWluWSA9IHRoaXMubGF0WSh0aGlzLmxhdFJhbmdlWzFdKTtcbiAgICAgICAgICAgIG1heFkgPSB0aGlzLmxhdFkodGhpcy5sYXRSYW5nZVswXSk7XG4gICAgICAgICAgICBzeSA9IG1heFkgLSBtaW5ZIDwgc2l6ZS55ID8gc2l6ZS55IC8gKG1heFkgLSBtaW5ZKSA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sbmdSYW5nZSkge1xuICAgICAgICAgICAgbWluWCA9IHRoaXMubG5nWCh0aGlzLmxuZ1JhbmdlWzBdKTtcbiAgICAgICAgICAgIG1heFggPSB0aGlzLmxuZ1godGhpcy5sbmdSYW5nZVsxXSk7XG4gICAgICAgICAgICBzeCA9IG1heFggLSBtaW5YIDwgc2l6ZS54ID8gc2l6ZS54IC8gKG1heFggLSBtaW5YKSA6IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBob3cgbXVjaCB0aGUgbWFwIHNob3VsZCBzY2FsZSB0byBmaXQgdGhlIHNjcmVlbiBpbnRvIGdpdmVuIGxhdGl0dWRlL2xvbmdpdHVkZSByYW5nZXNcbiAgICAgICAgY29uc3QgcyA9IE1hdGgubWF4KHN4IHx8IDAsIHN5IHx8IDApO1xuXG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHRoaXMudW5wcm9qZWN0KG5ldyBQb2ludChcbiAgICAgICAgICAgICAgICBzeCA/IChtYXhYICsgbWluWCkgLyAyIDogdGhpcy54LFxuICAgICAgICAgICAgICAgIHN5ID8gKG1heFkgKyBtaW5ZKSAvIDIgOiB0aGlzLnkpKTtcbiAgICAgICAgICAgIHRoaXMuem9vbSArPSB0aGlzLnNjYWxlWm9vbShzKTtcbiAgICAgICAgICAgIHRoaXMuX3VubW9kaWZpZWQgPSB1bm1vZGlmaWVkO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWluaW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sYXRSYW5nZSkge1xuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMueSxcbiAgICAgICAgICAgICAgICBoMiA9IHNpemUueSAvIDI7XG5cbiAgICAgICAgICAgIGlmICh5IC0gaDIgPCBtaW5ZKSB5MiA9IG1pblkgKyBoMjtcbiAgICAgICAgICAgIGlmICh5ICsgaDIgPiBtYXhZKSB5MiA9IG1heFkgLSBoMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmxuZ1JhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCB4ID0gdGhpcy54LFxuICAgICAgICAgICAgICAgIHcyID0gc2l6ZS54IC8gMjtcblxuICAgICAgICAgICAgaWYgKHggLSB3MiA8IG1pblgpIHgyID0gbWluWCArIHcyO1xuICAgICAgICAgICAgaWYgKHggKyB3MiA+IG1heFgpIHgyID0gbWF4WCAtIHcyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFuIHRoZSBtYXAgaWYgdGhlIHNjcmVlbiBnb2VzIG9mZiB0aGUgcmFuZ2VcbiAgICAgICAgaWYgKHgyICE9PSB1bmRlZmluZWQgfHwgeTIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jZW50ZXIgPSB0aGlzLnVucHJvamVjdChuZXcgUG9pbnQoXG4gICAgICAgICAgICAgICAgeDIgIT09IHVuZGVmaW5lZCA/IHgyIDogdGhpcy54LFxuICAgICAgICAgICAgICAgIHkyICE9PSB1bmRlZmluZWQgPyB5MiA6IHRoaXMueSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdW5tb2RpZmllZCA9IHVubW9kaWZpZWQ7XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbmluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIF9jYWxjTWF0cmljZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5oZWlnaHQpIHJldHVybjtcblxuICAgICAgICB0aGlzLmNhbWVyYVRvQ2VudGVyRGlzdGFuY2UgPSAwLjUgLyBNYXRoLnRhbih0aGlzLl9mb3YgLyAyKSAqIHRoaXMuaGVpZ2h0O1xuXG4gICAgICAgIC8vIEZpbmQgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBwb2ludCBbd2lkdGgvMiwgaGVpZ2h0LzJdIHRvIHRoZVxuICAgICAgICAvLyBjZW50ZXIgdG9wIHBvaW50IFt3aWR0aC8yLCAwXSBpbiBaIHVuaXRzLCB1c2luZyB0aGUgbGF3IG9mIHNpbmVzLlxuICAgICAgICAvLyAxIFogdW5pdCBpcyBlcXVpdmFsZW50IHRvIDEgaG9yaXpvbnRhbCBweCBhdCB0aGUgY2VudGVyIG9mIHRoZSBtYXBcbiAgICAgICAgLy8gKHRoZSBkaXN0YW5jZSBiZXR3ZWVuW3dpZHRoLzIsIGhlaWdodC8yXSBhbmQgW3dpZHRoLzIgKyAxLCBoZWlnaHQvMl0pXG4gICAgICAgIGNvbnN0IGhhbGZGb3YgPSB0aGlzLl9mb3YgLyAyO1xuICAgICAgICBjb25zdCBncm91bmRBbmdsZSA9IE1hdGguUEkgLyAyICsgdGhpcy5fcGl0Y2g7XG4gICAgICAgIGNvbnN0IHRvcEhhbGZTdXJmYWNlRGlzdGFuY2UgPSBNYXRoLnNpbihoYWxmRm92KSAqIHRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZSAvIE1hdGguc2luKE1hdGguUEkgLSBncm91bmRBbmdsZSAtIGhhbGZGb3YpO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB6IGRpc3RhbmNlIG9mIHRoZSBmYXJ0aGVzdCBmcmFnbWVudCB0aGF0IHNob3VsZCBiZSByZW5kZXJlZC5cbiAgICAgICAgY29uc3QgZnVydGhlc3REaXN0YW5jZSA9IE1hdGguY29zKE1hdGguUEkgLyAyIC0gdGhpcy5fcGl0Y2gpICogdG9wSGFsZlN1cmZhY2VEaXN0YW5jZSArIHRoaXMuY2FtZXJhVG9DZW50ZXJEaXN0YW5jZTtcbiAgICAgICAgLy8gQWRkIGEgYml0IGV4dHJhIHRvIGF2b2lkIHByZWNpc2lvbiBwcm9ibGVtcyB3aGVuIGEgZnJhZ21lbnQncyBkaXN0YW5jZSBpcyBleGFjdGx5IGBmdXJ0aGVzdERpc3RhbmNlYFxuICAgICAgICBjb25zdCBmYXJaID0gZnVydGhlc3REaXN0YW5jZSAqIDEuMDE7XG5cbiAgICAgICAgLy8gbWF0cml4IGZvciBjb252ZXJzaW9uIGZyb20gbG9jYXRpb24gdG8gR0wgY29vcmRpbmF0ZXMgKC0xIC4uIDEpXG4gICAgICAgIGxldCBtID0gbmV3IEZsb2F0NjRBcnJheSgxNik7XG4gICAgICAgIG1hdDQucGVyc3BlY3RpdmUobSwgdGhpcy5fZm92LCB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQsIDEsIGZhclopO1xuXG4gICAgICAgIG1hdDQuc2NhbGUobSwgbSwgWzEsIC0xLCAxXSk7XG4gICAgICAgIG1hdDQudHJhbnNsYXRlKG0sIG0sIFswLCAwLCAtdGhpcy5jYW1lcmFUb0NlbnRlckRpc3RhbmNlXSk7XG4gICAgICAgIG1hdDQucm90YXRlWChtLCBtLCB0aGlzLl9waXRjaCk7XG4gICAgICAgIG1hdDQucm90YXRlWihtLCBtLCB0aGlzLmFuZ2xlKTtcbiAgICAgICAgbWF0NC50cmFuc2xhdGUobSwgbSwgWy10aGlzLngsIC10aGlzLnksIDBdKTtcblxuICAgICAgICAvLyBzY2FsZSB2ZXJ0aWNhbGx5IHRvIG1ldGVycyBwZXIgcGl4ZWwgKGludmVyc2Ugb2YgZ3JvdW5kIHJlc29sdXRpb24pOlxuICAgICAgICAvLyB3b3JsZFNpemUgLyAoY2lyY3VtZmVyZW5jZU9mRWFydGggKiBjb3MobGF0ICogz4AgLyAxODApKVxuICAgICAgICBjb25zdCB2ZXJ0aWNhbFNjYWxlID0gdGhpcy53b3JsZFNpemUgLyAoMiAqIE1hdGguUEkgKiA2Mzc4MTM3ICogTWF0aC5hYnMoTWF0aC5jb3ModGhpcy5jZW50ZXIubGF0ICogKE1hdGguUEkgLyAxODApKSkpO1xuICAgICAgICBtYXQ0LnNjYWxlKG0sIG0sIFsxLCAxLCB2ZXJ0aWNhbFNjYWxlLCAxXSk7XG5cbiAgICAgICAgdGhpcy5wcm9qTWF0cml4ID0gbTtcblxuICAgICAgICAvLyBtYXRyaXggZm9yIGNvbnZlcnNpb24gZnJvbSBsb2NhdGlvbiB0byBzY3JlZW4gY29vcmRpbmF0ZXNcbiAgICAgICAgbSA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgIG1hdDQuc2NhbGUobSwgbSwgW3RoaXMud2lkdGggLyAyLCAtdGhpcy5oZWlnaHQgLyAyLCAxXSk7XG4gICAgICAgIG1hdDQudHJhbnNsYXRlKG0sIG0sIFsxLCAtMSwgMF0pO1xuICAgICAgICB0aGlzLnBpeGVsTWF0cml4ID0gbWF0NC5tdWx0aXBseShuZXcgRmxvYXQ2NEFycmF5KDE2KSwgbSwgdGhpcy5wcm9qTWF0cml4KTtcblxuICAgICAgICAvLyBpbnZlcnNlIG1hdHJpeCBmb3IgY29udmVyc2lvbiBmcm9tIHNjcmVlbiBjb29yZGluYWVzIHRvIGxvY2F0aW9uXG4gICAgICAgIG0gPSBtYXQ0LmludmVydChuZXcgRmxvYXQ2NEFycmF5KDE2KSwgdGhpcy5waXhlbE1hdHJpeCk7XG4gICAgICAgIGlmICghbSkgdGhyb3cgbmV3IEVycm9yKFwiZmFpbGVkIHRvIGludmVydCBtYXRyaXhcIik7XG4gICAgICAgIHRoaXMucGl4ZWxNYXRyaXhJbnZlcnNlID0gbTtcblxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vbWFwYm94LWdsL2pzL2dlby90cmFuc2Zvcm0uanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){"use strict";eval("\n\nconst assert = __webpack_require__(/*! assert */ 13);\nconst WhooTS = __webpack_require__(/*! whoots-js */ 49);\nconst Coordinate = __webpack_require__(/*! ../geo/coordinate */ 12);\n\nclass TileCoord {\n    constructor(z, x, y, w) {\n        assert(!isNaN(z) && z >= 0 && z % 1 === 0);\n        assert(!isNaN(x) && x >= 0 && x % 1 === 0);\n        assert(!isNaN(y) && y >= 0 && y % 1 === 0);\n\n        if (isNaN(w)) w = 0;\n\n        this.z = +z;\n        this.x = +x;\n        this.y = +y;\n        this.w = +w;\n\n        // calculate id\n        w *= 2;\n        if (w < 0) w = w * -1 - 1;\n        const dim = 1 << this.z;\n        this.id = ((dim * dim * w + dim * this.y + this.x) * 32) + this.z;\n\n        // for caching pos matrix calculation when rendering\n        this.posMatrix = null;\n    }\n\n    toString() {\n        return `${this.z}/${this.x}/${this.y}`;\n    }\n\n    toCoordinate(sourceMaxZoom) {\n        const zoom = Math.min(this.z, sourceMaxZoom === undefined ? this.z : sourceMaxZoom);\n        const tileScale = Math.pow(2, zoom);\n        const row = this.y;\n        const column = this.x + tileScale * this.w;\n        return new Coordinate(column, row, zoom);\n    }\n\n    // given a list of urls, choose a url template and return a tile URL\n    url(urls, sourceMaxZoom, scheme) {\n        const bbox = WhooTS.getTileBBox(this.x, this.y, this.z);\n        const quadkey = getQuadkey(this.z, this.x, this.y);\n\n        return urls[(this.x + this.y) % urls.length]\n            .replace('{prefix}', (this.x % 16).toString(16) + (this.y % 16).toString(16))\n            .replace('{z}', Math.min(this.z, sourceMaxZoom || this.z))\n            .replace('{x}', this.x)\n            .replace('{y}', scheme === 'tms' ? (Math.pow(2, this.z) - this.y - 1) : this.y)\n            .replace('{quadkey}', quadkey)\n            .replace('{bbox-epsg-3857}', bbox);\n    }\n\n    // Return the coordinate of the parent tile\n    parent(sourceMaxZoom) {\n        if (this.z === 0) return null;\n\n        // the id represents an overscaled tile, return the same coordinates with a lower z\n        if (this.z > sourceMaxZoom) {\n            return new TileCoord(this.z - 1, this.x, this.y, this.w);\n        }\n\n        return new TileCoord(this.z - 1, Math.floor(this.x / 2), Math.floor(this.y / 2), this.w);\n    }\n\n    wrapped() {\n        return new TileCoord(this.z, this.x, this.y, 0);\n    }\n\n    // Return the coordinates of the tile's children\n    children(sourceMaxZoom) {\n\n        if (this.z >= sourceMaxZoom) {\n            // return a single tile coord representing a an overscaled tile\n            return [new TileCoord(this.z + 1, this.x, this.y, this.w)];\n        }\n\n        const z = this.z + 1;\n        const x = this.x * 2;\n        const y = this.y * 2;\n        return [\n            new TileCoord(z, x, y, this.w),\n            new TileCoord(z, x + 1, y, this.w),\n            new TileCoord(z, x, y + 1, this.w),\n            new TileCoord(z, x + 1, y + 1, this.w)\n        ];\n    }\n}\n\n// Taken from polymaps src/Layer.js\n// https://github.com/simplegeo/polymaps/blob/master/src/Layer.js#L333-L383\n\nfunction edge(a, b) {\n    if (a.row > b.row) { const t = a; a = b; b = t; }\n    return {\n        x0: a.column,\n        y0: a.row,\n        x1: b.column,\n        y1: b.row,\n        dx: b.column - a.column,\n        dy: b.row - a.row\n    };\n}\n\nfunction scanSpans(e0, e1, ymin, ymax, scanLine) {\n    const y0 = Math.max(ymin, Math.floor(e1.y0));\n    const y1 = Math.min(ymax, Math.ceil(e1.y1));\n\n    // sort edges by x-coordinate\n    if ((e0.x0 === e1.x0 && e0.y0 === e1.y0) ?\n            (e0.x0 + e1.dy / e0.dy * e0.dx < e1.x1) :\n            (e0.x1 - e1.dy / e0.dy * e0.dx < e1.x0)) {\n        const t = e0; e0 = e1; e1 = t;\n    }\n\n    // scan lines!\n    const m0 = e0.dx / e0.dy;\n    const m1 = e1.dx / e1.dy;\n    const d0 = e0.dx > 0; // use y + 1 to compute x0\n    const d1 = e1.dx < 0; // use y + 1 to compute x1\n    for (let y = y0; y < y1; y++) {\n        const x0 = m0 * Math.max(0, Math.min(e0.dy, y + d0 - e0.y0)) + e0.x0;\n        const x1 = m1 * Math.max(0, Math.min(e1.dy, y + d1 - e1.y0)) + e1.x0;\n        scanLine(Math.floor(x1), Math.ceil(x0), y);\n    }\n}\n\nfunction scanTriangle(a, b, c, ymin, ymax, scanLine) {\n    let ab = edge(a, b),\n        bc = edge(b, c),\n        ca = edge(c, a);\n\n    let t;\n\n    // sort edges by y-length\n    if (ab.dy > bc.dy) { t = ab; ab = bc; bc = t; }\n    if (ab.dy > ca.dy) { t = ab; ab = ca; ca = t; }\n    if (bc.dy > ca.dy) { t = bc; bc = ca; ca = t; }\n\n    // scan span! scan span!\n    if (ab.dy) scanSpans(ca, ab, ymin, ymax, scanLine);\n    if (bc.dy) scanSpans(ca, bc, ymin, ymax, scanLine);\n}\n\nTileCoord.cover = function(z, bounds, actualZ) {\n    const tiles = 1 << z;\n    const t = {};\n\n    function scanLine(x0, x1, y) {\n        let x, wx, coord;\n        if (y >= 0 && y <= tiles) {\n            for (x = x0; x < x1; x++) {\n                wx = (x % tiles + tiles) % tiles;\n                coord = new TileCoord(actualZ, wx, y, Math.floor(x / tiles));\n                t[coord.id] = coord;\n            }\n        }\n    }\n\n    // Divide the screen up in two triangles and scan each of them:\n    // +---/\n    // | / |\n    // /---+\n    scanTriangle(bounds[0], bounds[1], bounds[2], 0, tiles, scanLine);\n    scanTriangle(bounds[2], bounds[3], bounds[0], 0, tiles, scanLine);\n\n    return Object.keys(t).map((id) => {\n        return t[id];\n    });\n};\n\n// Parse a packed integer id into a TileCoord object\nTileCoord.fromID = function(id) {\n    const z = id % 32, dim = 1 << z;\n    const xy = ((id - z) / 32);\n    const x = xy % dim, y = ((xy - x) / dim) % dim;\n    let w = Math.floor(xy / (dim * dim));\n    if (w % 2 !== 0) w = w * -1 - 1;\n    w /= 2;\n    return new TileCoord(z, x, y, w);\n};\n\nfunction getQuadkey(z, x, y) {\n    let quadkey = '', mask;\n    for (let i = z; i > 0; i--) {\n        mask = 1 << (i - 1);\n        quadkey += ((x & mask ? 1 : 0) + (y & mask ? 2 : 0));\n    }\n    return quadkey;\n}\n\nmodule.exports = TileCoord;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy9zb3VyY2UvdGlsZV9jb29yZC5qcz8zZmI4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG5jb25zdCBXaG9vVFMgPSByZXF1aXJlKCd3aG9vdHMtanMnKTtcbmNvbnN0IENvb3JkaW5hdGUgPSByZXF1aXJlKCcuLi9nZW8vY29vcmRpbmF0ZScpO1xuXG5jbGFzcyBUaWxlQ29vcmQge1xuICAgIGNvbnN0cnVjdG9yKHosIHgsIHksIHcpIHtcbiAgICAgICAgYXNzZXJ0KCFpc05hTih6KSAmJiB6ID49IDAgJiYgeiAlIDEgPT09IDApO1xuICAgICAgICBhc3NlcnQoIWlzTmFOKHgpICYmIHggPj0gMCAmJiB4ICUgMSA9PT0gMCk7XG4gICAgICAgIGFzc2VydCghaXNOYU4oeSkgJiYgeSA+PSAwICYmIHkgJSAxID09PSAwKTtcblxuICAgICAgICBpZiAoaXNOYU4odykpIHcgPSAwO1xuXG4gICAgICAgIHRoaXMueiA9ICt6O1xuICAgICAgICB0aGlzLnggPSAreDtcbiAgICAgICAgdGhpcy55ID0gK3k7XG4gICAgICAgIHRoaXMudyA9ICt3O1xuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBpZFxuICAgICAgICB3ICo9IDI7XG4gICAgICAgIGlmICh3IDwgMCkgdyA9IHcgKiAtMSAtIDE7XG4gICAgICAgIGNvbnN0IGRpbSA9IDEgPDwgdGhpcy56O1xuICAgICAgICB0aGlzLmlkID0gKChkaW0gKiBkaW0gKiB3ICsgZGltICogdGhpcy55ICsgdGhpcy54KSAqIDMyKSArIHRoaXMuejtcblxuICAgICAgICAvLyBmb3IgY2FjaGluZyBwb3MgbWF0cml4IGNhbGN1bGF0aW9uIHdoZW4gcmVuZGVyaW5nXG4gICAgICAgIHRoaXMucG9zTWF0cml4ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuen0vJHt0aGlzLnh9LyR7dGhpcy55fWA7XG4gICAgfVxuXG4gICAgdG9Db29yZGluYXRlKHNvdXJjZU1heFpvb20pIHtcbiAgICAgICAgY29uc3Qgem9vbSA9IE1hdGgubWluKHRoaXMueiwgc291cmNlTWF4Wm9vbSA9PT0gdW5kZWZpbmVkID8gdGhpcy56IDogc291cmNlTWF4Wm9vbSk7XG4gICAgICAgIGNvbnN0IHRpbGVTY2FsZSA9IE1hdGgucG93KDIsIHpvb20pO1xuICAgICAgICBjb25zdCByb3cgPSB0aGlzLnk7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IHRoaXMueCArIHRpbGVTY2FsZSAqIHRoaXMudztcbiAgICAgICAgcmV0dXJuIG5ldyBDb29yZGluYXRlKGNvbHVtbiwgcm93LCB6b29tKTtcbiAgICB9XG5cbiAgICAvLyBnaXZlbiBhIGxpc3Qgb2YgdXJscywgY2hvb3NlIGEgdXJsIHRlbXBsYXRlIGFuZCByZXR1cm4gYSB0aWxlIFVSTFxuICAgIHVybCh1cmxzLCBzb3VyY2VNYXhab29tLCBzY2hlbWUpIHtcbiAgICAgICAgY29uc3QgYmJveCA9IFdob29UUy5nZXRUaWxlQkJveCh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcbiAgICAgICAgY29uc3QgcXVhZGtleSA9IGdldFF1YWRrZXkodGhpcy56LCB0aGlzLngsIHRoaXMueSk7XG5cbiAgICAgICAgcmV0dXJuIHVybHNbKHRoaXMueCArIHRoaXMueSkgJSB1cmxzLmxlbmd0aF1cbiAgICAgICAgICAgIC5yZXBsYWNlKCd7cHJlZml4fScsICh0aGlzLnggJSAxNikudG9TdHJpbmcoMTYpICsgKHRoaXMueSAlIDE2KS50b1N0cmluZygxNikpXG4gICAgICAgICAgICAucmVwbGFjZSgne3p9JywgTWF0aC5taW4odGhpcy56LCBzb3VyY2VNYXhab29tIHx8IHRoaXMueikpXG4gICAgICAgICAgICAucmVwbGFjZSgne3h9JywgdGhpcy54KVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t5fScsIHNjaGVtZSA9PT0gJ3RtcycgPyAoTWF0aC5wb3coMiwgdGhpcy56KSAtIHRoaXMueSAtIDEpIDogdGhpcy55KVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3txdWFka2V5fScsIHF1YWRrZXkpXG4gICAgICAgICAgICAucmVwbGFjZSgne2Jib3gtZXBzZy0zODU3fScsIGJib3gpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcGFyZW50IHRpbGVcbiAgICBwYXJlbnQoc291cmNlTWF4Wm9vbSkge1xuICAgICAgICBpZiAodGhpcy56ID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyB0aGUgaWQgcmVwcmVzZW50cyBhbiBvdmVyc2NhbGVkIHRpbGUsIHJldHVybiB0aGUgc2FtZSBjb29yZGluYXRlcyB3aXRoIGEgbG93ZXIgelxuICAgICAgICBpZiAodGhpcy56ID4gc291cmNlTWF4Wm9vbSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaWxlQ29vcmQodGhpcy56IC0gMSwgdGhpcy54LCB0aGlzLnksIHRoaXMudyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFRpbGVDb29yZCh0aGlzLnogLSAxLCBNYXRoLmZsb29yKHRoaXMueCAvIDIpLCBNYXRoLmZsb29yKHRoaXMueSAvIDIpLCB0aGlzLncpO1xuICAgIH1cblxuICAgIHdyYXBwZWQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGlsZUNvb3JkKHRoaXMueiwgdGhpcy54LCB0aGlzLnksIDApO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHRpbGUncyBjaGlsZHJlblxuICAgIGNoaWxkcmVuKHNvdXJjZU1heFpvb20pIHtcblxuICAgICAgICBpZiAodGhpcy56ID49IHNvdXJjZU1heFpvb20pIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBhIHNpbmdsZSB0aWxlIGNvb3JkIHJlcHJlc2VudGluZyBhIGFuIG92ZXJzY2FsZWQgdGlsZVxuICAgICAgICAgICAgcmV0dXJuIFtuZXcgVGlsZUNvb3JkKHRoaXMueiArIDEsIHRoaXMueCwgdGhpcy55LCB0aGlzLncpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHogPSB0aGlzLnogKyAxO1xuICAgICAgICBjb25zdCB4ID0gdGhpcy54ICogMjtcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueSAqIDI7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgVGlsZUNvb3JkKHosIHgsIHksIHRoaXMudyksXG4gICAgICAgICAgICBuZXcgVGlsZUNvb3JkKHosIHggKyAxLCB5LCB0aGlzLncpLFxuICAgICAgICAgICAgbmV3IFRpbGVDb29yZCh6LCB4LCB5ICsgMSwgdGhpcy53KSxcbiAgICAgICAgICAgIG5ldyBUaWxlQ29vcmQoeiwgeCArIDEsIHkgKyAxLCB0aGlzLncpXG4gICAgICAgIF07XG4gICAgfVxufVxuXG4vLyBUYWtlbiBmcm9tIHBvbHltYXBzIHNyYy9MYXllci5qc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3NpbXBsZWdlby9wb2x5bWFwcy9ibG9iL21hc3Rlci9zcmMvTGF5ZXIuanMjTDMzMy1MMzgzXG5cbmZ1bmN0aW9uIGVkZ2UoYSwgYikge1xuICAgIGlmIChhLnJvdyA+IGIucm93KSB7IGNvbnN0IHQgPSBhOyBhID0gYjsgYiA9IHQ7IH1cbiAgICByZXR1cm4ge1xuICAgICAgICB4MDogYS5jb2x1bW4sXG4gICAgICAgIHkwOiBhLnJvdyxcbiAgICAgICAgeDE6IGIuY29sdW1uLFxuICAgICAgICB5MTogYi5yb3csXG4gICAgICAgIGR4OiBiLmNvbHVtbiAtIGEuY29sdW1uLFxuICAgICAgICBkeTogYi5yb3cgLSBhLnJvd1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHNjYW5TcGFucyhlMCwgZTEsIHltaW4sIHltYXgsIHNjYW5MaW5lKSB7XG4gICAgY29uc3QgeTAgPSBNYXRoLm1heCh5bWluLCBNYXRoLmZsb29yKGUxLnkwKSk7XG4gICAgY29uc3QgeTEgPSBNYXRoLm1pbih5bWF4LCBNYXRoLmNlaWwoZTEueTEpKTtcblxuICAgIC8vIHNvcnQgZWRnZXMgYnkgeC1jb29yZGluYXRlXG4gICAgaWYgKChlMC54MCA9PT0gZTEueDAgJiYgZTAueTAgPT09IGUxLnkwKSA/XG4gICAgICAgICAgICAoZTAueDAgKyBlMS5keSAvIGUwLmR5ICogZTAuZHggPCBlMS54MSkgOlxuICAgICAgICAgICAgKGUwLngxIC0gZTEuZHkgLyBlMC5keSAqIGUwLmR4IDwgZTEueDApKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlMDsgZTAgPSBlMTsgZTEgPSB0O1xuICAgIH1cblxuICAgIC8vIHNjYW4gbGluZXMhXG4gICAgY29uc3QgbTAgPSBlMC5keCAvIGUwLmR5O1xuICAgIGNvbnN0IG0xID0gZTEuZHggLyBlMS5keTtcbiAgICBjb25zdCBkMCA9IGUwLmR4ID4gMDsgLy8gdXNlIHkgKyAxIHRvIGNvbXB1dGUgeDBcbiAgICBjb25zdCBkMSA9IGUxLmR4IDwgMDsgLy8gdXNlIHkgKyAxIHRvIGNvbXB1dGUgeDFcbiAgICBmb3IgKGxldCB5ID0geTA7IHkgPCB5MTsgeSsrKSB7XG4gICAgICAgIGNvbnN0IHgwID0gbTAgKiBNYXRoLm1heCgwLCBNYXRoLm1pbihlMC5keSwgeSArIGQwIC0gZTAueTApKSArIGUwLngwO1xuICAgICAgICBjb25zdCB4MSA9IG0xICogTWF0aC5tYXgoMCwgTWF0aC5taW4oZTEuZHksIHkgKyBkMSAtIGUxLnkwKSkgKyBlMS54MDtcbiAgICAgICAgc2NhbkxpbmUoTWF0aC5mbG9vcih4MSksIE1hdGguY2VpbCh4MCksIHkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2NhblRyaWFuZ2xlKGEsIGIsIGMsIHltaW4sIHltYXgsIHNjYW5MaW5lKSB7XG4gICAgbGV0IGFiID0gZWRnZShhLCBiKSxcbiAgICAgICAgYmMgPSBlZGdlKGIsIGMpLFxuICAgICAgICBjYSA9IGVkZ2UoYywgYSk7XG5cbiAgICBsZXQgdDtcblxuICAgIC8vIHNvcnQgZWRnZXMgYnkgeS1sZW5ndGhcbiAgICBpZiAoYWIuZHkgPiBiYy5keSkgeyB0ID0gYWI7IGFiID0gYmM7IGJjID0gdDsgfVxuICAgIGlmIChhYi5keSA+IGNhLmR5KSB7IHQgPSBhYjsgYWIgPSBjYTsgY2EgPSB0OyB9XG4gICAgaWYgKGJjLmR5ID4gY2EuZHkpIHsgdCA9IGJjOyBiYyA9IGNhOyBjYSA9IHQ7IH1cblxuICAgIC8vIHNjYW4gc3BhbiEgc2NhbiBzcGFuIVxuICAgIGlmIChhYi5keSkgc2NhblNwYW5zKGNhLCBhYiwgeW1pbiwgeW1heCwgc2NhbkxpbmUpO1xuICAgIGlmIChiYy5keSkgc2NhblNwYW5zKGNhLCBiYywgeW1pbiwgeW1heCwgc2NhbkxpbmUpO1xufVxuXG5UaWxlQ29vcmQuY292ZXIgPSBmdW5jdGlvbih6LCBib3VuZHMsIGFjdHVhbFopIHtcbiAgICBjb25zdCB0aWxlcyA9IDEgPDwgejtcbiAgICBjb25zdCB0ID0ge307XG5cbiAgICBmdW5jdGlvbiBzY2FuTGluZSh4MCwgeDEsIHkpIHtcbiAgICAgICAgbGV0IHgsIHd4LCBjb29yZDtcbiAgICAgICAgaWYgKHkgPj0gMCAmJiB5IDw9IHRpbGVzKSB7XG4gICAgICAgICAgICBmb3IgKHggPSB4MDsgeCA8IHgxOyB4KyspIHtcbiAgICAgICAgICAgICAgICB3eCA9ICh4ICUgdGlsZXMgKyB0aWxlcykgJSB0aWxlcztcbiAgICAgICAgICAgICAgICBjb29yZCA9IG5ldyBUaWxlQ29vcmQoYWN0dWFsWiwgd3gsIHksIE1hdGguZmxvb3IoeCAvIHRpbGVzKSk7XG4gICAgICAgICAgICAgICAgdFtjb29yZC5pZF0gPSBjb29yZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIERpdmlkZSB0aGUgc2NyZWVuIHVwIGluIHR3byB0cmlhbmdsZXMgYW5kIHNjYW4gZWFjaCBvZiB0aGVtOlxuICAgIC8vICstLS0vXG4gICAgLy8gfCAvIHxcbiAgICAvLyAvLS0tK1xuICAgIHNjYW5UcmlhbmdsZShib3VuZHNbMF0sIGJvdW5kc1sxXSwgYm91bmRzWzJdLCAwLCB0aWxlcywgc2NhbkxpbmUpO1xuICAgIHNjYW5UcmlhbmdsZShib3VuZHNbMl0sIGJvdW5kc1szXSwgYm91bmRzWzBdLCAwLCB0aWxlcywgc2NhbkxpbmUpO1xuXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHQpLm1hcCgoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRbaWRdO1xuICAgIH0pO1xufTtcblxuLy8gUGFyc2UgYSBwYWNrZWQgaW50ZWdlciBpZCBpbnRvIGEgVGlsZUNvb3JkIG9iamVjdFxuVGlsZUNvb3JkLmZyb21JRCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgY29uc3QgeiA9IGlkICUgMzIsIGRpbSA9IDEgPDwgejtcbiAgICBjb25zdCB4eSA9ICgoaWQgLSB6KSAvIDMyKTtcbiAgICBjb25zdCB4ID0geHkgJSBkaW0sIHkgPSAoKHh5IC0geCkgLyBkaW0pICUgZGltO1xuICAgIGxldCB3ID0gTWF0aC5mbG9vcih4eSAvIChkaW0gKiBkaW0pKTtcbiAgICBpZiAodyAlIDIgIT09IDApIHcgPSB3ICogLTEgLSAxO1xuICAgIHcgLz0gMjtcbiAgICByZXR1cm4gbmV3IFRpbGVDb29yZCh6LCB4LCB5LCB3KTtcbn07XG5cbmZ1bmN0aW9uIGdldFF1YWRrZXkoeiwgeCwgeSkge1xuICAgIGxldCBxdWFka2V5ID0gJycsIG1hc2s7XG4gICAgZm9yIChsZXQgaSA9IHo7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgbWFzayA9IDEgPDwgKGkgLSAxKTtcbiAgICAgICAgcXVhZGtleSArPSAoKHggJiBtYXNrID8gMSA6IDApICsgKHkgJiBtYXNrID8gMiA6IDApKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1YWRrZXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGlsZUNvb3JkO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L21hcGJveC1nbC9qcy9zb3VyY2UvdGlsZV9jb29yZC5qc1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = interpolate;\n\nfunction interpolate(a, b, t) {\n    return (a * (1 - t)) + (b * t);\n}\n\ninterpolate.number = interpolate;\n\ninterpolate.vec2 = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t)\n    ];\n};\n\n/*\n * Interpolate between two colors given as 4-element arrays.\n *\n * @param {Color} from\n * @param {Color} to\n * @param {number} t interpolation factor between 0 and 1\n * @returns {Color} interpolated color\n */\ninterpolate.color = function(from, to, t) {\n    return [\n        interpolate(from[0], to[0], t),\n        interpolate(from[1], to[1], t),\n        interpolate(from[2], to[2], t),\n        interpolate(from[3], to[3], t)\n    ];\n};\n\ninterpolate.array = function(from, to, t) {\n    return from.map((d, i) => {\n        return interpolate(d, to[i], t);\n    });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L21hcGJveC1nbC9qcy91dGlsL2ludGVycG9sYXRlLmpzP2NlN2EiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludGVycG9sYXRlO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZShhLCBiLCB0KSB7XG4gICAgcmV0dXJuIChhICogKDEgLSB0KSkgKyAoYiAqIHQpO1xufVxuXG5pbnRlcnBvbGF0ZS5udW1iZXIgPSBpbnRlcnBvbGF0ZTtcblxuaW50ZXJwb2xhdGUudmVjMiA9IGZ1bmN0aW9uKGZyb20sIHRvLCB0KSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgaW50ZXJwb2xhdGUoZnJvbVswXSwgdG9bMF0sIHQpLFxuICAgICAgICBpbnRlcnBvbGF0ZShmcm9tWzFdLCB0b1sxXSwgdClcbiAgICBdO1xufTtcblxuLypcbiAqIEludGVycG9sYXRlIGJldHdlZW4gdHdvIGNvbG9ycyBnaXZlbiBhcyA0LWVsZW1lbnQgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7Q29sb3J9IGZyb21cbiAqIEBwYXJhbSB7Q29sb3J9IHRvXG4gKiBAcGFyYW0ge251bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGZhY3RvciBiZXR3ZWVuIDAgYW5kIDFcbiAqIEByZXR1cm5zIHtDb2xvcn0gaW50ZXJwb2xhdGVkIGNvbG9yXG4gKi9cbmludGVycG9sYXRlLmNvbG9yID0gZnVuY3Rpb24oZnJvbSwgdG8sIHQpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBpbnRlcnBvbGF0ZShmcm9tWzBdLCB0b1swXSwgdCksXG4gICAgICAgIGludGVycG9sYXRlKGZyb21bMV0sIHRvWzFdLCB0KSxcbiAgICAgICAgaW50ZXJwb2xhdGUoZnJvbVsyXSwgdG9bMl0sIHQpLFxuICAgICAgICBpbnRlcnBvbGF0ZShmcm9tWzNdLCB0b1szXSwgdClcbiAgICBdO1xufTtcblxuaW50ZXJwb2xhdGUuYXJyYXkgPSBmdW5jdGlvbihmcm9tLCB0bywgdCkge1xuICAgIHJldHVybiBmcm9tLm1hcCgoZCwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gaW50ZXJwb2xhdGUoZCwgdG9baV0sIHQpO1xuICAgIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9tYXBib3gtZ2wvanMvdXRpbC9pbnRlcnBvbGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_44__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib3dzZXJcIj84MzA4Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80NF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiYm93c2VyXCJcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},,function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_46__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtaW4tZG9jdW1lbnRcIj8xNDYxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80Nl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibWluLWRvY3VtZW50XCJcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},,function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_48__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ1bml0YmV6aWVyXCI/OWFkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDhfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInVuaXRiZXppZXJcIlxuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_49__;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aG9vdHMtanNcIj83ZmQ1Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80OV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwid2hvb3RzLWpzXCJcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){"use strict";eval('Object.defineProperty(exports, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_map__ = __webpack_require__(/*! ./components/map */ 10);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "default", function() { return __WEBPACK_IMPORTED_MODULE_0__components_map__["a"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "MapGL", function() { return __WEBPACK_IMPORTED_MODULE_0__components_map__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_interactive_map__ = __webpack_require__(/*! ./components/interactive-map */ 24);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "InteractiveMap", function() { return __WEBPACK_IMPORTED_MODULE_1__components_interactive_map__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_static_map__ = __webpack_require__(/*! ./components/static-map */ 16);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "StaticMap", function() { return __WEBPACK_IMPORTED_MODULE_2__components_static_map__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_map_controls__ = __webpack_require__(/*! ./components/map-controls */ 15);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "MapControls", function() { return __WEBPACK_IMPORTED_MODULE_3__components_map_controls__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_event_manager__ = __webpack_require__(/*! ./utils/event-manager */ 17);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "EventManager", function() { return __WEBPACK_IMPORTED_MODULE_4__utils_event_manager__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_fit_bounds__ = __webpack_require__(/*! ./utils/fit-bounds */ 30);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "fitBounds", function() { return __WEBPACK_IMPORTED_MODULE_5__utils_fit_bounds__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_autobind__ = __webpack_require__(/*! ./utils/autobind */ 2);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "autobind", function() { return __WEBPACK_IMPORTED_MODULE_6__utils_autobind__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__overlays_canvas_overlay__ = __webpack_require__(/*! ./overlays/canvas-overlay */ 25);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "CanvasOverlay", function() { return __WEBPACK_IMPORTED_MODULE_7__overlays_canvas_overlay__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__overlays_draggable_points_overlay__ = __webpack_require__(/*! ./overlays/draggable-points-overlay */ 26);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "DraggablePointsOverlay", function() { return __WEBPACK_IMPORTED_MODULE_8__overlays_draggable_points_overlay__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__overlays_html_overlay__ = __webpack_require__(/*! ./overlays/html-overlay */ 27);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "HTMLOverlay", function() { return __WEBPACK_IMPORTED_MODULE_9__overlays_html_overlay__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__overlays_scatterplot_overlay__ = __webpack_require__(/*! ./overlays/scatterplot-overlay */ 28);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "ScatterplotOverlay", function() { return __WEBPACK_IMPORTED_MODULE_10__overlays_scatterplot_overlay__["a"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__overlays_svg_overlay__ = __webpack_require__(/*! ./overlays/svg-overlay */ 29);\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "SVGOverlay", function() { return __WEBPACK_IMPORTED_MODULE_11__overlays_svg_overlay__["a"]; });\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// React Components\n\n\n\n\n\n\n// TODO - should these be exported or better keep them as internal?\n// If exported, should we document them?\n\n\n// Utilities\n\n\n\n// Overlays\n\n\n\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L2luZGV4LmpzPzJhMzMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuLy8gUmVhY3QgQ29tcG9uZW50c1xuZXhwb3J0IHtkZWZhdWx0IGFzIGRlZmF1bHR9IGZyb20gJy4vY29tcG9uZW50cy9tYXAnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIE1hcEdMfSBmcm9tICcuL2NvbXBvbmVudHMvbWFwJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBJbnRlcmFjdGl2ZU1hcH0gZnJvbSAnLi9jb21wb25lbnRzL2ludGVyYWN0aXZlLW1hcCc7XG5leHBvcnQge2RlZmF1bHQgYXMgU3RhdGljTWFwfSBmcm9tICcuL2NvbXBvbmVudHMvc3RhdGljLW1hcCc7XG5leHBvcnQge2RlZmF1bHQgYXMgTWFwQ29udHJvbHN9IGZyb20gJy4vY29tcG9uZW50cy9tYXAtY29udHJvbHMnO1xuXG4vLyBUT0RPIC0gc2hvdWxkIHRoZXNlIGJlIGV4cG9ydGVkIG9yIGJldHRlciBrZWVwIHRoZW0gYXMgaW50ZXJuYWw/XG4vLyBJZiBleHBvcnRlZCwgc2hvdWxkIHdlIGRvY3VtZW50IHRoZW0/XG5leHBvcnQge2RlZmF1bHQgYXMgRXZlbnRNYW5hZ2VyfSBmcm9tICcuL3V0aWxzL2V2ZW50LW1hbmFnZXInO1xuXG4vLyBVdGlsaXRpZXNcbmV4cG9ydCB7ZGVmYXVsdCBhcyBmaXRCb3VuZHN9IGZyb20gJy4vdXRpbHMvZml0LWJvdW5kcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgYXV0b2JpbmR9IGZyb20gJy4vdXRpbHMvYXV0b2JpbmQnO1xuXG4vLyBPdmVybGF5c1xuZXhwb3J0IHtkZWZhdWx0IGFzIENhbnZhc092ZXJsYXl9IGZyb20gJy4vb3ZlcmxheXMvY2FudmFzLW92ZXJsYXknO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdnYWJsZVBvaW50c092ZXJsYXl9IGZyb20gJy4vb3ZlcmxheXMvZHJhZ2dhYmxlLXBvaW50cy1vdmVybGF5JztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBIVE1MT3ZlcmxheX0gZnJvbSAnLi9vdmVybGF5cy9odG1sLW92ZXJsYXknO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFNjYXR0ZXJwbG90T3ZlcmxheX0gZnJvbSAnLi9vdmVybGF5cy9zY2F0dGVycGxvdC1vdmVybGF5JztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBTVkdPdmVybGF5fSBmcm9tICcuL292ZXJsYXlzL3N2Zy1vdmVybGF5JztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZGlzdC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')}])});